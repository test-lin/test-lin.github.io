<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="http,">










<meta name="description" content="Before diving straight into the topic, letâ€™s first look at some of the HTTP/2 terminologies used frequently. åœ¨æ·±å…¥è®¨è®ºä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸‹ç»å¸¸ä½¿ç”¨çš„ä¸€äº› HTTP/2 çš„æœ¯è¯­ã€‚  Stream: An established bidirectional connection which ma">
<meta name="keywords" content="http">
<meta property="og:type" content="article">
<meta property="og:title" content="What is HTTP&#x2F;2?(ä»€ä¹ˆæ˜¯ HTTP&#x2F;2ï¼Ÿ)">
<meta property="og:url" content="http://yoursite.com/ç¿»è¯‘/what-is-http-2/index.html">
<meta property="og:site_name" content="ç®€æ°çš„ Blog">
<meta property="og:description" content="Before diving straight into the topic, letâ€™s first look at some of the HTTP/2 terminologies used frequently. åœ¨æ·±å…¥è®¨è®ºä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸‹ç»å¸¸ä½¿ç”¨çš„ä¸€äº› HTTP/2 çš„æœ¯è¯­ã€‚  Stream: An established bidirectional connection which ma">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/img/review/0_L1GIOY16SV94h7MQ.png">
<meta property="og:updated_time" content="2019-08-23T15:16:48.820Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="What is HTTP&#x2F;2?(ä»€ä¹ˆæ˜¯ HTTP&#x2F;2ï¼Ÿ)">
<meta name="twitter:description" content="Before diving straight into the topic, letâ€™s first look at some of the HTTP/2 terminologies used frequently. åœ¨æ·±å…¥è®¨è®ºä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸‹ç»å¸¸ä½¿ç”¨çš„ä¸€äº› HTTP/2 çš„æœ¯è¯­ã€‚  Stream: An established bidirectional connection which ma">
<meta name="twitter:image" content="http://yoursite.com/img/review/0_L1GIOY16SV94h7MQ.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/ç¿»è¯‘/what-is-http-2/">





  <title>What is HTTP/2?(ä»€ä¹ˆæ˜¯ HTTP/2ï¼Ÿ) | ç®€æ°çš„ Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3094125d6c6fead2ab23a1ef8b067249";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ç®€æ°çš„ Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ç¿»è¯‘/what-is-http-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">What is HTTP/2?(ä»€ä¹ˆæ˜¯ HTTP/2ï¼Ÿ)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-21T15:12:24+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç¿»è¯‘/" itemprop="url" rel="index">
                    <span itemprop="name">ç¿»è¯‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Before diving straight into the topic, letâ€™s first look at some of the HTTP/2 terminologies used frequently.</p>
<p>åœ¨æ·±å…¥è®¨è®ºä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸‹ç»å¸¸ä½¿ç”¨çš„ä¸€äº› HTTP/2 çš„æœ¯è¯­ã€‚</p>
<ul>
<li>Stream: An established bidirectional connection which may carry one or more messages</li>
<li>Message: A complete sequence of frames that represents a request or response message</li>
<li>Frame: The smallest unit of communication in HTTP/2. Each frame contains a frame header which could identify the stream to which the frame belongs.</li>
<li><p>h2: Short term for HTTP/2</p>
</li>
<li><p>æµ: å·²å»ºç«‹çš„åŒå‘è¿æ¥ï¼Œå¯ä»¥æºå¸¦ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯</p>
</li>
<li>æ¶ˆæ¯: è¡¨ç¤ºè¯·æ±‚æˆ–å“åº”æ¶ˆæ¯çš„å®Œæ•´å¸§åºåˆ—</li>
<li>å¸§: HTTP/2 ä¸­æœ€å°çš„é€šä¿¡å•ä½ã€‚ æ¯ä¸ªå¸§åŒ…å«ä¸€ä¸ªå¸§å¤´ï¼Œå®ƒå¯ä»¥è¯†åˆ«å¸§æ‰€å±çš„æµã€‚</li>
<li>h2: HTTP/2 çš„çŸ­æœŸ</li>
</ul>
<p><strong>Note:</strong> It was originally named as HTTP/2.0 but later â€œ.0â€ part was dropped because it has caused some confusions with HTTP/1.x. So we no longer use HTTP/2.0, itâ€™s HTTP/2 or h2 for short ğŸ˜Š</p>
<p><strong>æ³¨æ„:</strong> å®ƒæœ€åˆè¢«å‘½åä¸º HTTP/2.0ï¼Œä½†åæ¥â€œ.0â€éƒ¨åˆ†è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒå¼•èµ·äº† HTTP/1.x çš„ä¸€äº›æ··æ·†ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸å†ä½¿ç”¨ HTTP/2.0ï¼Œç®€è€Œè¨€ä¹‹æ˜¯ HTTP/2 æˆ– h2</p>
<h2 id="Overview-of-HTTP-2"><a href="#Overview-of-HTTP-2" class="headerlink" title="Overview of HTTP/2"></a>Overview of HTTP/2</h2><h2 id="HTTP-2-çš„æ¦‚å¿µ"><a href="#HTTP-2-çš„æ¦‚å¿µ" class="headerlink" title="HTTP/2 çš„æ¦‚å¿µ"></a>HTTP/2 çš„æ¦‚å¿µ</h2><p>HTTP/2 is a major revision of the HTTP network protocol which is still being widely used over the World Wide Web. It was developed to overcome some of the drawbacks found in HTTP/1.0 and HTTP/1.1 versions. Overhead of repetitive headers and <strong>Head-of-line blocking</strong> (HOL blockingâ€Šâ€”â€Šwhen one request is blocking others from completing) are two such major problems addressed.</p>
<p>HTTP/2 æ˜¯ HTTP ç½‘ç»œåè®®çš„ä¸»è¦ä¿®è®¢ç‰ˆï¼Œå®ƒä»åœ¨ä¸‡ç»´ç½‘ä¸Šå¹¿æ³›ä½¿ç”¨ã€‚ å®ƒçš„å¼€å‘æ˜¯ä¸ºäº†å…‹æœ HTTP/1.0 å’Œ HTTP/1.1 ç‰ˆæœ¬ä¸­çš„ä¸€äº›ç¼ºç‚¹ã€‚ é‡å¤æ ‡é¢˜å’Œ <strong>è¡Œå¤´é˜»å¡</strong> çš„å¼€é”€ï¼ˆHOL é˜»æ­¢ - å½“ä¸€ä¸ªè¯·æ±‚é˜»æ­¢å…¶ä»–äººå®Œæˆæ—¶ï¼‰æ˜¯ä¸¤ä¸ªè¿™æ ·çš„ä¸»è¦é—®é¢˜ã€‚</p>
<p>HTTP/2 enables more efficient use of network resources, header fields compression, multiple concurrent exchanges on the same connection reducing the latency to a great extent.</p>
<p>HTTP/2 å¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ç½‘ç»œèµ„æºï¼Œå¤´å­—æ®µå‹ç¼©ï¼ŒåŒä¸€è¿æ¥ä¸Šçš„å¤šä¸ªå¹¶å‘äº¤æ¢ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº†å»¶è¿Ÿã€‚</p>
<p>HTTP/2 also introduces <strong>Server Push</strong> that allows a server to send desired data to a client that the server anticipates the client will need in the future. Thus, HTTP/2 provides enhanced security, speed, and usability.</p>
<p>HTTP/2 è¿˜å¼•å…¥äº† <strong>æœåŠ¡å™¨æ¨é€</strong>ï¼Œå…è®¸æœåŠ¡å™¨å°†æ‰€éœ€æ•°æ®å‘é€åˆ°æœåŠ¡å™¨é¢„æœŸå®¢æˆ·ç«¯å°†æ¥éœ€è¦çš„å®¢æˆ·ç«¯ã€‚ å› æ­¤ï¼ŒHTTP/2 æä¾›å¢å¼ºçš„å®‰å…¨æ€§ï¼Œé€Ÿåº¦å’Œå¯ç”¨æ€§ã€‚</p>
<p>HTTP/2 uses the same URI scheme and shares the same default HTTP ports as of HTTP/1.1.</p>
<p>HTTP/2 ä½¿ç”¨ç›¸åŒçš„ URI æ–¹æ¡ˆï¼Œå¹¶å…±äº«ä¸ HTTP/1.1 ç›¸åŒçš„é»˜è®¤ HTTP ç«¯å£ã€‚</p>
<p>All communication is performed over a single TCP connection that can carry any number of <strong>bidirectional</strong> streams. Each stream has a unique identifier and optional priority information that is used to carry bidirectional messages. The frame is the unit of communication and there are several types of frames such as HEADER, DATA, and SETTINGS. For request and response communication, HEADER and DATA frames are primarily being used.</p>
<p>æ‰€æœ‰é€šä¿¡éƒ½é€šè¿‡å•ä¸ª TCP è¿æ¥æ‰§è¡Œï¼Œè¯¥è¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„ <strong>åŒå‘æµ</strong>ã€‚æ¯ä¸ªæµéƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦å’Œå¯é€‰çš„ä¼˜å…ˆçº§ä¿¡æ¯ï¼Œç”¨äºæºå¸¦åŒå‘æ¶ˆæ¯ã€‚å¸§æ˜¯é€šä¿¡å•å…ƒï¼Œæœ‰å‡ ç§ç±»å‹çš„å¸§ï¼Œå¦‚ HEADERã€DATA å’Œ SETTINGSã€‚ å¯¹äºè¯·æ±‚å’Œå“åº”é€šä¿¡ï¼Œä¸»è¦ä½¿ç”¨ HEADER å’Œ DATA å¸§ã€‚</p>
<h2 id="Key-benefits-of-HTTP-2"><a href="#Key-benefits-of-HTTP-2" class="headerlink" title="Key benefits of HTTP/2"></a>Key benefits of HTTP/2</h2><h2 id="HTTP-2-çš„ä¸»è¦ä¼˜ç‚¹"><a href="#HTTP-2-çš„ä¸»è¦ä¼˜ç‚¹" class="headerlink" title="HTTP/2 çš„ä¸»è¦ä¼˜ç‚¹"></a>HTTP/2 çš„ä¸»è¦ä¼˜ç‚¹</h2><h3 id="Multiplexing"><a href="#Multiplexing" class="headerlink" title="Multiplexing"></a>Multiplexing</h3><p>Unlike in HTTP/1.1 where each transfer has to wait till other transfers complete, in HTTP/2, multiple requests are allowed at the same time on the same connection.</p>
<p>ä¸ HTTP/1.1 ä¸­çš„æƒ…å†µä¸åŒï¼Œå…¶ä¸­æ¯ä¸ªä¼ è¾“å¿…é¡»ç­‰åˆ°å…¶ä»–ä¼ è¾“å®Œæˆï¼Œåœ¨ HTTP/2 ä¸­ï¼Œåœ¨åŒä¸€è¿æ¥ä¸ŠåŒæ—¶å…è®¸å¤šä¸ªè¯·æ±‚ã€‚</p>
<p>In HTTP/1.x, only one response can be delivered at a time per connection, and if the client wants to make multiple parallel requests, then multiple TCP connections must be used. This also results in head-of-line-blocking and inefficient use of underlying TCP connection.</p>
<p>åœ¨ HTTP/1.x ä¸­ï¼Œæ¯ä¸ªè¿æ¥ä¸€æ¬¡åªèƒ½ä¼ é€’ä¸€ä¸ªå“åº”ï¼Œå¦‚æœå®¢æˆ·ç«¯æƒ³è¦è¿›è¡Œå¤šä¸ªå¹¶è¡Œè¯·æ±‚ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å¤šä¸ª TCP è¿æ¥ã€‚ è¿™ä¹Ÿä¼šå¯¼è‡´çº¿å¤´é˜»å¡å’Œåº•å±‚ TCP è¿æ¥çš„ä½æ•ˆä½¿ç”¨ã€‚</p>
<p>HTTP/2 overcomes these limitations by using the new binary framing layer ( where all HTTP/2 communication is split into smaller messages and frames and each of them is encoded in binary format so that both the client and server must use the new binary encoding mechanism in order to understand each other. Thus, an HTTP/1.x client will not understand an HTTP/2 only server and vice versa. ) by allowing the client and server to break down a message into independent frames, interleave them and reassemble them on the other end.</p>
<p>HTTP/2 é€šè¿‡ä½¿ç”¨æ–°çš„äºŒè¿›åˆ¶æˆå¸§å±‚å…‹æœäº†è¿™äº›é™åˆ¶ï¼ˆå…¶ä¸­æ‰€æœ‰ HTTP/2 é€šä¿¡è¢«åˆ†æˆæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶ä¸”æ¯ä¸ªéƒ½ä»¥äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ï¼Œå› æ­¤å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¿…é¡»ä½¿ç”¨æ–°çš„äºŒè¿›åˆ¶ç¼–ç æœºåˆ¶å› æ­¤ï¼ŒHTTP/1.x å®¢æˆ·ç«¯å°†æ— æ³•ç†è§£ä»… HTTP/2 æœåŠ¡å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚ï¼‰å…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°†æ¶ˆæ¯åˆ†è§£ä¸ºç‹¬ç«‹çš„å¸§ï¼Œäº¤é”™å¹¶é‡æ–°ç»„åˆå®ƒä»¬åœ¨å¦ä¸€ç«¯ã€‚</p>
<p>For example,</p>
<p>ä¾‹å¦‚ï¼Œ</p>
<p><img src="/img/review/0_L1GIOY16SV94h7MQ.png" alt></p>
<p>The above diagram illustrates multiple streams within the same connection. The client is transmitting a DATA frame over stream 5 to the server, while the server is transmitting an interleaved sequence of frames to the client over stream 1 and 3.</p>
<p>ä¸Šå›¾è¯´æ˜äº†åŒä¸€è¿æ¥ä¸­çš„å¤šä¸ªæµã€‚ å®¢æˆ·ç«¯é€šè¿‡æµ 5 å°† DATA å¸§å‘é€åˆ°æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨é€šè¿‡æµ 1 å’Œ 3 å°†äº¤é”™çš„å¸§åºåˆ—å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p>
<p>This also enables several performance benefits such as remove unnecessary HTTP/1/x workarounds in concatenated files, image sprites and domain sharding ( for further read refer: <a href="https://hpbn.co/optimizing-application-delivery/#optimizing-for-http1x" target="_blank" rel="noopener">Optimizing for HTTP/1.x</a> ), reduce the page load time by removing unnecessary latency and improving the utilization of available network capacity.</p>
<p>è¿™è¿˜å¯ä»¥å¸¦æ¥ä¸€äº›æ€§èƒ½ä¼˜åŠ¿ï¼Œä¾‹å¦‚åœ¨è¿æ¥æ–‡ä»¶ï¼Œå›¾åƒç²¾çµå’ŒåŸŸåˆ†ç‰‡ä¸­åˆ é™¤ä¸å¿…è¦çš„ HTTP/1/x å˜é€šæ–¹æ³•ï¼ˆ æœ‰å…³è¿›ä¸€æ­¥é˜…è¯»ï¼Œè¯·å‚é˜…ï¼š <a href="https://hpbn.co/optimizing-application-delivery/#optimizing-for-http1x" target="_blank" rel="noopener">ä¼˜åŒ– HTTP/1.x</a>ï¼‰ï¼Œé€šè¿‡æ¶ˆé™¤ä¸å¿…è¦çš„å»¶è¿Ÿå¹¶æé«˜å¯ç”¨ç½‘ç»œå®¹é‡çš„åˆ©ç”¨ç‡æ¥å‡å°‘é¡µé¢åŠ è½½æ—¶é—´ã€‚</p>
<h3 id="Header-compression"><a href="#Header-compression" class="headerlink" title="Header compression"></a>Header compression</h3><h3 id="æ ‡å¤´å‹ç¼©"><a href="#æ ‡å¤´å‹ç¼©" class="headerlink" title="æ ‡å¤´å‹ç¼©"></a>æ ‡å¤´å‹ç¼©</h3><p>As web pages have grown to require dozens to hundreds of requests, the redundant header fields in these requests unnecessarily consume bandwidth, measurably increasing latency. So, HTTP/2 forces all HTTP headers to be sent in a compressed format, reducing the amount of information that needs to be exchanged between the clientâ€™s browser and the server whereas HTTP/1.1 does not provide any form of header compression.</p>
<p>éšç€ç½‘é¡µå˜å¾—éœ€è¦æ•°ååˆ°æ•°ç™¾ä¸ªè¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚ä¸­çš„å†—ä½™å¤´å­—æ®µä¸å¿…è¦åœ°æ¶ˆè€—å¸¦å®½ï¼Œå¯æµ‹é‡åœ°å¢åŠ äº†å»¶è¿Ÿã€‚ å› æ­¤ï¼ŒHTTP/2 å¼ºåˆ¶æ‰€æœ‰ HTTP æ ‡å¤´ä»¥å‹ç¼©æ ¼å¼å‘é€ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦äº¤æ¢çš„ä¿¡æ¯é‡ï¼Œè€Œ HTTP/1.1 ä¸æä¾›ä»»ä½•å½¢å¼çš„æ ‡å¤´å‹ç¼©ã€‚</p>
<p>The compression works on per connection basis. That is, all the streams in one connection share the same compressor. If the compressor realizes that it has sent a header before, it will not resend that header, instead just says â€˜the same header as beforeâ€™. So, some headers that never change like Host, Accept or Cookies will not get resent, and that will save a lot of bytes! ğŸ˜ƒ</p>
<p>å‹ç¼©é€‚ç”¨äºæ¯ä¸ªè¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè¿æ¥ä¸­çš„æ‰€æœ‰æµå…±äº«ç›¸åŒçš„å‹ç¼©å™¨ã€‚å¦‚æœå‹ç¼©å™¨æ„è¯†åˆ°å®ƒä¹‹å‰å·²ç»å‘é€äº†ä¸€ä¸ªæŠ¥å¤´ï¼Œå®ƒå°†ä¸ä¼šé‡æ–°å‘é€è¯¥æŠ¥å¤´ï¼Œè€Œåªæ˜¯è¯´â€œä¸ä¹‹å‰ç›¸åŒçš„æŠ¥å¤´â€ã€‚ å› æ­¤ï¼Œä¸€äº›æ°¸è¿œä¸ä¼šåƒ Hostã€Accept æˆ– Cookies é‚£æ ·æ”¹å˜çš„æ ‡é¢˜å°†ä¸ä¼šè¢«é‡æ–°å‘é€ï¼Œè¿™å°†èŠ‚çœå¤§é‡çš„å­—èŠ‚ï¼</p>
<h3 id="Server-Push"><a href="#Server-Push" class="headerlink" title="Server Push"></a>Server Push</h3><h3 id="æœåŠ¡å™¨æ¨é€"><a href="#æœåŠ¡å™¨æ¨é€" class="headerlink" title="æœåŠ¡å™¨æ¨é€"></a>æœåŠ¡å™¨æ¨é€</h3><p>Through the server push, additional resources can be sent to the client for future use, before the client even requests them.</p>
<p>é€šè¿‡æœåŠ¡å™¨æ¨é€ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯ç”šè‡³è¯·æ±‚ä¹‹å‰å°†å…¶ä»–èµ„æºå‘é€åˆ°å®¢æˆ·ç«¯ä»¥ä¾›å°†æ¥ä½¿ç”¨ã€‚</p>
<p>Here, the server understands which resources the browser needs before the browser requests for them. Then the server will push these resources to the browser before it requests for them. This makes the entire process of retrieving all resources much faster.</p>
<p>åœ¨è¿™é‡Œï¼ŒæœåŠ¡å™¨äº†è§£æµè§ˆå™¨åœ¨æµè§ˆå™¨è¯·æ±‚ä¹‹å‰éœ€è¦å“ªäº›èµ„æºã€‚ ç„¶åï¼ŒæœåŠ¡å™¨ä¼šåœ¨è¯·æ±‚å®ƒä»¬ä¹‹å‰å°†è¿™äº›èµ„æºæ¨é€åˆ°æµè§ˆå™¨ã€‚ è¿™ä½¿å¾—æ£€ç´¢æ‰€æœ‰èµ„æºçš„æ•´ä¸ªè¿‡ç¨‹æ›´å¿«ã€‚</p>
<p>As an example when a browser requests a web page, a server responds with an HTML page and browser has to parse it and request again all embedded assets such as images, CSS and JavaScript files. In HTTP/2, using the server push concept a server can be configured to send all required assets according to a clientâ€™s request before the client requests them explicitly.</p>
<p>ä½œä¸ºæµè§ˆå™¨è¯·æ±‚ç½‘é¡µçš„ç¤ºä¾‹ï¼ŒæœåŠ¡å™¨å“åº” HTML é¡µé¢ï¼Œæµè§ˆå™¨å¿…é¡»è§£æå®ƒå¹¶å†æ¬¡è¯·æ±‚æ‰€æœ‰åµŒå…¥çš„èµ„æºï¼Œä¾‹å¦‚å›¾åƒï¼ŒCSS å’Œ JavaScript æ–‡ä»¶ã€‚ åœ¨ HTTP/2 ä¸­ï¼Œä½¿ç”¨æœåŠ¡å™¨æ¨é€æ¦‚å¿µï¼Œå¯ä»¥å°†æœåŠ¡å™¨é…ç½®ä¸ºåœ¨å®¢æˆ·ç«¯æ˜ç¡®è¯·æ±‚ä¹‹å‰æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚å‘é€æ‰€æœ‰å¿…éœ€çš„èµ„äº§ã€‚</p>
<h3 id="Stream-Priority"><a href="#Stream-Priority" class="headerlink" title="Stream Priority"></a>Stream Priority</h3><h3 id="æµçš„ä¼˜å…ˆçº§"><a href="#æµçš„ä¼˜å…ˆçº§" class="headerlink" title="æµçš„ä¼˜å…ˆçº§"></a>æµçš„ä¼˜å…ˆçº§</h3><p>While multiplexing enables sending multiple requests concurrently, stream priority enables you to define which response should come first. I.e. it helps you to define the importance of one stream relative to the other streams on the same connection via weight and dependency associated with each stream. As a result, we can optimize the resource usage via controlling the allocation of CPU, memory, bandwidth and many other resources while ensuring the delivery of high priority responses to the client.</p>
<p>è™½ç„¶å¤šè·¯å¤ç”¨å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä½†æµä¼˜å…ˆçº§ä½¿æ‚¨å¯ä»¥å®šä¹‰åº”è¯¥é¦–å…ˆå“åº”çš„å“åº”ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨é€šè¿‡ä¸æ¯ä¸ªæµå…³è”çš„æƒé‡å’Œä¾èµ–å…³ç³»æ¥å®šä¹‰ä¸€ä¸ªæµç›¸å¯¹äºåŒä¸€è¿æ¥ä¸Šçš„å…¶ä»–æµçš„é‡è¦æ€§ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶ CPUï¼Œå†…å­˜ï¼Œå¸¦å®½å’Œè®¸å¤šå…¶ä»–èµ„æºçš„åˆ†é…æ¥ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼ŒåŒæ—¶ç¡®ä¿å‘å®¢æˆ·ç«¯ä¼ é€’é«˜ä¼˜å…ˆçº§å“åº”ã€‚</p>
<h3 id="Flow-control"><a href="#Flow-control" class="headerlink" title="Flow control"></a>Flow control</h3><h3 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h3><p>This is introduced to prevent any destructive interference on streams with each other that are in the same connection that might have caused as a result of multiplexing which introduces contention over use of the TCP connection causing blocked streams. Flow control is used for both individual streams and for the connection as a whole.</p>
<p>å¼•å…¥è¿™æ˜¯ä¸ºäº†é˜²æ­¢å¯¹ç”±äºå¤šè·¯å¤ç”¨è€Œå¯èƒ½å¯¼è‡´çš„ç›¸åŒè¿æ¥çš„æµç›¸äº’ä¹‹é—´çš„ä»»ä½•ç ´åæ€§å¹²æ‰°ï¼Œè¿™å¼•èµ·äº†å¯¹ä½¿ç”¨ TCP è¿æ¥å¯¼è‡´é˜»å¡æµçš„äº‰ç”¨ã€‚ æµé‡æ§åˆ¶ç”¨äºå•ä¸ªæµå’Œæ•´ä¸ªè¿æ¥ã€‚</p>
<h3 id="Error-handling"><a href="#Error-handling" class="headerlink" title="Error handling"></a>Error handling</h3><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><p>HTTP/2 handles two classes of errors.</p>
<p>HTTP/2 å¤„ç†ä¸¤ç±»é”™è¯¯</p>
<ol>
<li>Connection errorâ€Šâ€”â€Šany error that prevents further processing of the frame layer or corrupts any connection state.</li>
<li><p>Stream errorâ€Šâ€”â€Šan error related to a specific stream that does not affect the processing of other streams.</p>
</li>
<li><p>è¿æ¥é”™è¯¯â€Šâ€”â€Šä»»ä½•é˜»æ­¢è¿›ä¸€æ­¥å¤„ç†å¸§å±‚æˆ–ç ´åä»»ä½•è¿æ¥çŠ¶æ€çš„é”™è¯¯ã€‚</p>
</li>
<li>æµé”™è¯¯â€Šâ€”â€Šä¸ç‰¹å®šæµç›¸å…³çš„é”™è¯¯ï¼Œä¸ä¼šå½±å“å…¶ä»–æµçš„å¤„ç†ã€‚</li>
</ol>
<p>I will be talking on How to Write an HTTP/2 Service and a Client in my next story ğŸ˜Š</p>
<p>æˆ‘å°†åœ¨ä¸‹ä¸€ä¸ªæ•…äº‹ä¸­è®¨è®ºå¦‚ä½•ç¼–å†™ HTTP/2 æœåŠ¡å’Œå®¢æˆ·ç«¯ğŸ˜Š</p>
<p>Mar 11,2019 ï¼ˆ2019-03-11ï¼‰</p>
<p>author: Varuni Punchihewa</p>
<p>link: <a href="https://blog.usejournal.com/what-is-http-2-380d277d208c" target="_blank" rel="noopener">https://blog.usejournal.com/what-is-http-2-380d277d208c</a></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>æ‰“èµ</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/img/wechatpay.jpg" alt="jani å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/img/alipay.jpg" alt="jani æ”¯ä»˜å®">
        <p>æ”¯ä»˜å®</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/http/" rel="tag"># http</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/åŠŸèƒ½/table-status/" rel="next" title="è¡¨çŠ¶æ€ç¨‹åºç®¡ç†åº”ç”¨">
                <i class="fa fa-chevron-left"></i> è¡¨çŠ¶æ€ç¨‹åºç®¡ç†åº”ç”¨
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/åŠŸèƒ½/redis-geo/" rel="prev" title="Redis GEO é™„è¿‘çš„è¿é”åº—">
                Redis GEO é™„è¿‘çš„è¿é”åº— <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/img/12641322.jpg" alt="jani">
            
              <p class="site-author-name" itemprop="name">jani</p>
              <p class="site-description motion-element" itemprop="description">ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/test-lin" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:liberty_linlin@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview-of-HTTP-2"><span class="nav-number">1.</span> <span class="nav-text">Overview of HTTP/2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-2-çš„æ¦‚å¿µ"><span class="nav-number">2.</span> <span class="nav-text">HTTP/2 çš„æ¦‚å¿µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Key-benefits-of-HTTP-2"><span class="nav-number">3.</span> <span class="nav-text">Key benefits of HTTP/2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-2-çš„ä¸»è¦ä¼˜ç‚¹"><span class="nav-number">4.</span> <span class="nav-text">HTTP/2 çš„ä¸»è¦ä¼˜ç‚¹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Multiplexing"><span class="nav-number">4.1.</span> <span class="nav-text">Multiplexing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Header-compression"><span class="nav-number">4.2.</span> <span class="nav-text">Header compression</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ ‡å¤´å‹ç¼©"><span class="nav-number">4.3.</span> <span class="nav-text">æ ‡å¤´å‹ç¼©</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Server-Push"><span class="nav-number">4.4.</span> <span class="nav-text">Server Push</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æœåŠ¡å™¨æ¨é€"><span class="nav-number">4.5.</span> <span class="nav-text">æœåŠ¡å™¨æ¨é€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream-Priority"><span class="nav-number">4.6.</span> <span class="nav-text">Stream Priority</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æµçš„ä¼˜å…ˆçº§"><span class="nav-number">4.7.</span> <span class="nav-text">æµçš„ä¼˜å…ˆçº§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flow-control"><span class="nav-number">4.8.</span> <span class="nav-text">Flow control</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æµé‡æ§åˆ¶"><span class="nav-number">4.9.</span> <span class="nav-text">æµé‡æ§åˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Error-handling"><span class="nav-number">4.10.</span> <span class="nav-text">Error handling</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é”™è¯¯å¤„ç†"><span class="nav-number">4.11.</span> <span class="nav-text">é”™è¯¯å¤„ç†</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jani</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
