<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ç½—é©¬æ•°å­—è½¬æ•´æ•°]]></title>
    <url>%2F%E7%AE%97%E6%B3%95%2Froman-to-integer%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦: Iï¼Œ Vï¼ŒXï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚ 12345678å­—ç¬¦ æ•°å€¼I 1V 5X 10L 50C 100D 500M 1000 ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš XXVII, å³ä¸º XX + V + II ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š I å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚ X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚ C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚ ç»™å®šä¸€ä¸ªç½—é©¬æ•°å­—ï¼Œå°†å…¶è½¬æ¢æˆæ•´æ•°ã€‚è¾“å…¥ç¡®ä¿åœ¨ 1 åˆ° 3999 çš„èŒƒå›´å†…ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: &quot;III&quot;è¾“å‡º: 3 ç¤ºä¾‹ 2: 12è¾“å…¥: &quot;IV&quot;è¾“å‡º: 4 ç¤ºä¾‹ 3: 12è¾“å…¥: &quot;IX&quot;è¾“å‡º: 9 ç¤ºä¾‹ 4: 123è¾“å…¥: &quot;LVIII&quot;è¾“å‡º: 58è§£é‡Š: L = 50, V= 5, III = 3. ç¤ºä¾‹ 5: 123è¾“å…¥: &quot;MCMXCIV&quot;è¾“å‡º: 1994è§£é‡Š: M = 1000, CM = 900, XC = 90, IV = 4. é¢˜ç›®é“¾æ¥ æç¤º å¦‚æœ I åœ¨ V æˆ– X ä¹‹å‰, å‡å» 1 å¦‚: IV = 4 and IX = 9 å¦‚æœ X åœ¨ L æˆ– C ä¹‹å‰, å‡å» 10 å¦‚: XL = 40 and XC = 90 å¦‚æœ C åœ¨ D æˆ– M ä¹‹å‰, å‡å» 100 å¦‚: CD = 400 and CM = 900 æ ‡ç­¾ æ•°å­¦ å­—ç¬¦ä¸² ä¸ªäººè§£ç­”1234567891011121314151617181920212223242526&lt;?phpfunction romanToInt($s) &#123; $map = [ 'I' =&gt; 1, 'V' =&gt; 5, 'X' =&gt; 10, 'L' =&gt; 50, 'C' =&gt; 100, 'D' =&gt; 500, 'M' =&gt; 1000 ]; $num = 0; $len = strlen($s); for ($i = 0; $i &lt; $len; $i++) &#123; if (($i &lt; $len - 1) &amp;&amp; ($map[$s&#123;$i&#125;] &lt; $map[$s&#123;$i+1&#125;]])) &#123; $num -= $map[$s&#123;$i&#125;]; &#125; else &#123; $num += $map[$s&#123;$i&#125;]; &#125; &#125; return $num;&#125;]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis GEO é™„è¿‘çš„è¿é”åº—]]></title>
    <url>%2F%E5%8A%9F%E8%83%BD%2Fredis-geo%2F</url>
    <content type="text"><![CDATA[è¯´æ˜reids é‡Œè‡ªå¸¦çš„ä¸€ä¸ªåæ ‡å®šä½æ–¹æ³•ã€‚ ä½¿ç”¨123456789101112131415161718192021222324252627282930313233&lt;?php$redis = new Redis();$redis-&gt;connect("127.0.0.1", 6379);$redis-&gt;auth('you_password');$redis-&gt;select(3);// æ·»åŠ åæ ‡$key = '7-Eleven';list($x, $y) = [23.1194200000,113.4155300000];$region = "å¹¿å·è½¦å¡åˆ†åº—";$redis-&gt;geoAdd($key, $x, $y, $region);// æ›´æ–°åæ ‡list($x, $y) = [25.1194200000,114.4155300000];$redis-&gt;geoAdd();// åˆ é™¤åæ ‡$redis-&gt;del($key);$redis-&gt;zRem($key, $region);// åº—é“ºç»çº¬åº¦$redis-&gt;geoPos($key, $region);// åº—é“ºä¸åº—é“ºä¹‹é—´çš„è·ç¦»$redis-&gt;geoDist($key, $region, $region, 'km');// é™„è¿‘çš„åº—$options = [ 'ASC'];$redis-&gt;geoRadius($key, -157.858, 21.306, 1, 'km', $options):]]></content>
      <categories>
        <category>åŠŸèƒ½</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>redis</tag>
        <tag>geo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[What is HTTP/2?(ä»€ä¹ˆæ˜¯ HTTP/2ï¼Ÿ)]]></title>
    <url>%2F%E7%BF%BB%E8%AF%91%2Fwhat-is-http-2%2F</url>
    <content type="text"><![CDATA[Before diving straight into the topic, letâ€™s first look at some of the HTTP/2 terminologies used frequently. åœ¨æ·±å…¥è®¨è®ºä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸‹ç»å¸¸ä½¿ç”¨çš„ä¸€äº› HTTP/2 çš„æœ¯è¯­ã€‚ Stream: An established bidirectional connection which may carry one or more messages Message: A complete sequence of frames that represents a request or response message Frame: The smallest unit of communication in HTTP/2. Each frame contains a frame header which could identify the stream to which the frame belongs. h2: Short term for HTTP/2 æµ: å·²å»ºç«‹çš„åŒå‘è¿æ¥ï¼Œå¯ä»¥æºå¸¦ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯ æ¶ˆæ¯: è¡¨ç¤ºè¯·æ±‚æˆ–å“åº”æ¶ˆæ¯çš„å®Œæ•´å¸§åºåˆ— å¸§: HTTP/2 ä¸­æœ€å°çš„é€šä¿¡å•ä½ã€‚ æ¯ä¸ªå¸§åŒ…å«ä¸€ä¸ªå¸§å¤´ï¼Œå®ƒå¯ä»¥è¯†åˆ«å¸§æ‰€å±çš„æµã€‚ h2: HTTP/2 çš„çŸ­æœŸ Note: It was originally named as HTTP/2.0 but later â€œ.0â€ part was dropped because it has caused some confusions with HTTP/1.x. So we no longer use HTTP/2.0, itâ€™s HTTP/2 or h2 for short ğŸ˜Š æ³¨æ„: å®ƒæœ€åˆè¢«å‘½åä¸º HTTP/2.0ï¼Œä½†åæ¥â€œ.0â€éƒ¨åˆ†è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒå¼•èµ·äº† HTTP/1.x çš„ä¸€äº›æ··æ·†ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸å†ä½¿ç”¨ HTTP/2.0ï¼Œç®€è€Œè¨€ä¹‹æ˜¯ HTTP/2 æˆ– h2 Overview of HTTP/2HTTP/2 çš„æ¦‚å¿µHTTP/2 is a major revision of the HTTP network protocol which is still being widely used over the World Wide Web. It was developed to overcome some of the drawbacks found in HTTP/1.0 and HTTP/1.1 versions. Overhead of repetitive headers and Head-of-line blocking (HOL blocking â€” when one request is blocking others from completing) are two such major problems addressed. HTTP/2 æ˜¯ HTTP ç½‘ç»œåè®®çš„ä¸»è¦ä¿®è®¢ç‰ˆï¼Œå®ƒä»åœ¨ä¸‡ç»´ç½‘ä¸Šå¹¿æ³›ä½¿ç”¨ã€‚ å®ƒçš„å¼€å‘æ˜¯ä¸ºäº†å…‹æœ HTTP/1.0 å’Œ HTTP/1.1 ç‰ˆæœ¬ä¸­çš„ä¸€äº›ç¼ºç‚¹ã€‚ é‡å¤æ ‡é¢˜å’Œ è¡Œå¤´é˜»å¡ çš„å¼€é”€ï¼ˆHOL é˜»æ­¢ - å½“ä¸€ä¸ªè¯·æ±‚é˜»æ­¢å…¶ä»–äººå®Œæˆæ—¶ï¼‰æ˜¯ä¸¤ä¸ªè¿™æ ·çš„ä¸»è¦é—®é¢˜ã€‚ HTTP/2 enables more efficient use of network resources, header fields compression, multiple concurrent exchanges on the same connection reducing the latency to a great extent. HTTP/2 å¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ç½‘ç»œèµ„æºï¼Œå¤´å­—æ®µå‹ç¼©ï¼ŒåŒä¸€è¿æ¥ä¸Šçš„å¤šä¸ªå¹¶å‘äº¤æ¢ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº†å»¶è¿Ÿã€‚ HTTP/2 also introduces Server Push that allows a server to send desired data to a client that the server anticipates the client will need in the future. Thus, HTTP/2 provides enhanced security, speed, and usability. HTTP/2 è¿˜å¼•å…¥äº† æœåŠ¡å™¨æ¨é€ï¼Œå…è®¸æœåŠ¡å™¨å°†æ‰€éœ€æ•°æ®å‘é€åˆ°æœåŠ¡å™¨é¢„æœŸå®¢æˆ·ç«¯å°†æ¥éœ€è¦çš„å®¢æˆ·ç«¯ã€‚ å› æ­¤ï¼ŒHTTP/2 æä¾›å¢å¼ºçš„å®‰å…¨æ€§ï¼Œé€Ÿåº¦å’Œå¯ç”¨æ€§ã€‚ HTTP/2 uses the same URI scheme and shares the same default HTTP ports as of HTTP/1.1. HTTP/2 ä½¿ç”¨ç›¸åŒçš„ URI æ–¹æ¡ˆï¼Œå¹¶å…±äº«ä¸ HTTP/1.1 ç›¸åŒçš„é»˜è®¤ HTTP ç«¯å£ã€‚ All communication is performed over a single TCP connection that can carry any number of bidirectional streams. Each stream has a unique identifier and optional priority information that is used to carry bidirectional messages. The frame is the unit of communication and there are several types of frames such as HEADER, DATA, and SETTINGS. For request and response communication, HEADER and DATA frames are primarily being used. æ‰€æœ‰é€šä¿¡éƒ½é€šè¿‡å•ä¸ª TCP è¿æ¥æ‰§è¡Œï¼Œè¯¥è¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„ åŒå‘æµã€‚æ¯ä¸ªæµéƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦å’Œå¯é€‰çš„ä¼˜å…ˆçº§ä¿¡æ¯ï¼Œç”¨äºæºå¸¦åŒå‘æ¶ˆæ¯ã€‚å¸§æ˜¯é€šä¿¡å•å…ƒï¼Œæœ‰å‡ ç§ç±»å‹çš„å¸§ï¼Œå¦‚ HEADERã€DATA å’Œ SETTINGSã€‚ å¯¹äºè¯·æ±‚å’Œå“åº”é€šä¿¡ï¼Œä¸»è¦ä½¿ç”¨ HEADER å’Œ DATA å¸§ã€‚ Key benefits of HTTP/2HTTP/2 çš„ä¸»è¦ä¼˜ç‚¹MultiplexingUnlike in HTTP/1.1 where each transfer has to wait till other transfers complete, in HTTP/2, multiple requests are allowed at the same time on the same connection. ä¸ HTTP/1.1 ä¸­çš„æƒ…å†µä¸åŒï¼Œå…¶ä¸­æ¯ä¸ªä¼ è¾“å¿…é¡»ç­‰åˆ°å…¶ä»–ä¼ è¾“å®Œæˆï¼Œåœ¨ HTTP/2 ä¸­ï¼Œåœ¨åŒä¸€è¿æ¥ä¸ŠåŒæ—¶å…è®¸å¤šä¸ªè¯·æ±‚ã€‚ In HTTP/1.x, only one response can be delivered at a time per connection, and if the client wants to make multiple parallel requests, then multiple TCP connections must be used. This also results in head-of-line-blocking and inefficient use of underlying TCP connection. åœ¨ HTTP/1.x ä¸­ï¼Œæ¯ä¸ªè¿æ¥ä¸€æ¬¡åªèƒ½ä¼ é€’ä¸€ä¸ªå“åº”ï¼Œå¦‚æœå®¢æˆ·ç«¯æƒ³è¦è¿›è¡Œå¤šä¸ªå¹¶è¡Œè¯·æ±‚ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å¤šä¸ª TCP è¿æ¥ã€‚ è¿™ä¹Ÿä¼šå¯¼è‡´çº¿å¤´é˜»å¡å’Œåº•å±‚ TCP è¿æ¥çš„ä½æ•ˆä½¿ç”¨ã€‚ HTTP/2 overcomes these limitations by using the new binary framing layer ( where all HTTP/2 communication is split into smaller messages and frames and each of them is encoded in binary format so that both the client and server must use the new binary encoding mechanism in order to understand each other. Thus, an HTTP/1.x client will not understand an HTTP/2 only server and vice versa. ) by allowing the client and server to break down a message into independent frames, interleave them and reassemble them on the other end. HTTP/2 é€šè¿‡ä½¿ç”¨æ–°çš„äºŒè¿›åˆ¶æˆå¸§å±‚å…‹æœäº†è¿™äº›é™åˆ¶ï¼ˆå…¶ä¸­æ‰€æœ‰ HTTP/2 é€šä¿¡è¢«åˆ†æˆæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶ä¸”æ¯ä¸ªéƒ½ä»¥äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ï¼Œå› æ­¤å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¿…é¡»ä½¿ç”¨æ–°çš„äºŒè¿›åˆ¶ç¼–ç æœºåˆ¶å› æ­¤ï¼ŒHTTP/1.x å®¢æˆ·ç«¯å°†æ— æ³•ç†è§£ä»… HTTP/2 æœåŠ¡å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚ï¼‰å…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°†æ¶ˆæ¯åˆ†è§£ä¸ºç‹¬ç«‹çš„å¸§ï¼Œäº¤é”™å¹¶é‡æ–°ç»„åˆå®ƒä»¬åœ¨å¦ä¸€ç«¯ã€‚ For example, ä¾‹å¦‚ï¼Œ The above diagram illustrates multiple streams within the same connection. The client is transmitting a DATA frame over stream 5 to the server, while the server is transmitting an interleaved sequence of frames to the client over stream 1 and 3. ä¸Šå›¾è¯´æ˜äº†åŒä¸€è¿æ¥ä¸­çš„å¤šä¸ªæµã€‚ å®¢æˆ·ç«¯é€šè¿‡æµ 5 å°† DATA å¸§å‘é€åˆ°æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨é€šè¿‡æµ 1 å’Œ 3 å°†äº¤é”™çš„å¸§åºåˆ—å‘é€åˆ°å®¢æˆ·ç«¯ã€‚ This also enables several performance benefits such as remove unnecessary HTTP/1/x workarounds in concatenated files, image sprites and domain sharding ( for further read refer: Optimizing for HTTP/1.x ), reduce the page load time by removing unnecessary latency and improving the utilization of available network capacity. è¿™è¿˜å¯ä»¥å¸¦æ¥ä¸€äº›æ€§èƒ½ä¼˜åŠ¿ï¼Œä¾‹å¦‚åœ¨è¿æ¥æ–‡ä»¶ï¼Œå›¾åƒç²¾çµå’ŒåŸŸåˆ†ç‰‡ä¸­åˆ é™¤ä¸å¿…è¦çš„ HTTP/1/x å˜é€šæ–¹æ³•ï¼ˆ æœ‰å…³è¿›ä¸€æ­¥é˜…è¯»ï¼Œè¯·å‚é˜…ï¼š ä¼˜åŒ– HTTP/1.xï¼‰ï¼Œé€šè¿‡æ¶ˆé™¤ä¸å¿…è¦çš„å»¶è¿Ÿå¹¶æé«˜å¯ç”¨ç½‘ç»œå®¹é‡çš„åˆ©ç”¨ç‡æ¥å‡å°‘é¡µé¢åŠ è½½æ—¶é—´ã€‚ Header compressionæ ‡å¤´å‹ç¼©As web pages have grown to require dozens to hundreds of requests, the redundant header fields in these requests unnecessarily consume bandwidth, measurably increasing latency. So, HTTP/2 forces all HTTP headers to be sent in a compressed format, reducing the amount of information that needs to be exchanged between the clientâ€™s browser and the server whereas HTTP/1.1 does not provide any form of header compression. éšç€ç½‘é¡µå˜å¾—éœ€è¦æ•°ååˆ°æ•°ç™¾ä¸ªè¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚ä¸­çš„å†—ä½™å¤´å­—æ®µä¸å¿…è¦åœ°æ¶ˆè€—å¸¦å®½ï¼Œå¯æµ‹é‡åœ°å¢åŠ äº†å»¶è¿Ÿã€‚ å› æ­¤ï¼ŒHTTP/2 å¼ºåˆ¶æ‰€æœ‰ HTTP æ ‡å¤´ä»¥å‹ç¼©æ ¼å¼å‘é€ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦äº¤æ¢çš„ä¿¡æ¯é‡ï¼Œè€Œ HTTP/1.1 ä¸æä¾›ä»»ä½•å½¢å¼çš„æ ‡å¤´å‹ç¼©ã€‚ The compression works on per connection basis. That is, all the streams in one connection share the same compressor. If the compressor realizes that it has sent a header before, it will not resend that header, instead just says â€˜the same header as beforeâ€™. So, some headers that never change like Host, Accept or Cookies will not get resent, and that will save a lot of bytes! ğŸ˜ƒ å‹ç¼©é€‚ç”¨äºæ¯ä¸ªè¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè¿æ¥ä¸­çš„æ‰€æœ‰æµå…±äº«ç›¸åŒçš„å‹ç¼©å™¨ã€‚å¦‚æœå‹ç¼©å™¨æ„è¯†åˆ°å®ƒä¹‹å‰å·²ç»å‘é€äº†ä¸€ä¸ªæŠ¥å¤´ï¼Œå®ƒå°†ä¸ä¼šé‡æ–°å‘é€è¯¥æŠ¥å¤´ï¼Œè€Œåªæ˜¯è¯´â€œä¸ä¹‹å‰ç›¸åŒçš„æŠ¥å¤´â€ã€‚ å› æ­¤ï¼Œä¸€äº›æ°¸è¿œä¸ä¼šåƒ Hostã€Accept æˆ– Cookies é‚£æ ·æ”¹å˜çš„æ ‡é¢˜å°†ä¸ä¼šè¢«é‡æ–°å‘é€ï¼Œè¿™å°†èŠ‚çœå¤§é‡çš„å­—èŠ‚ï¼ Server PushæœåŠ¡å™¨æ¨é€Through the server push, additional resources can be sent to the client for future use, before the client even requests them. é€šè¿‡æœåŠ¡å™¨æ¨é€ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯ç”šè‡³è¯·æ±‚ä¹‹å‰å°†å…¶ä»–èµ„æºå‘é€åˆ°å®¢æˆ·ç«¯ä»¥ä¾›å°†æ¥ä½¿ç”¨ã€‚ Here, the server understands which resources the browser needs before the browser requests for them. Then the server will push these resources to the browser before it requests for them. This makes the entire process of retrieving all resources much faster. åœ¨è¿™é‡Œï¼ŒæœåŠ¡å™¨äº†è§£æµè§ˆå™¨åœ¨æµè§ˆå™¨è¯·æ±‚ä¹‹å‰éœ€è¦å“ªäº›èµ„æºã€‚ ç„¶åï¼ŒæœåŠ¡å™¨ä¼šåœ¨è¯·æ±‚å®ƒä»¬ä¹‹å‰å°†è¿™äº›èµ„æºæ¨é€åˆ°æµè§ˆå™¨ã€‚ è¿™ä½¿å¾—æ£€ç´¢æ‰€æœ‰èµ„æºçš„æ•´ä¸ªè¿‡ç¨‹æ›´å¿«ã€‚ As an example when a browser requests a web page, a server responds with an HTML page and browser has to parse it and request again all embedded assets such as images, CSS and JavaScript files. In HTTP/2, using the server push concept a server can be configured to send all required assets according to a clientâ€™s request before the client requests them explicitly. ä½œä¸ºæµè§ˆå™¨è¯·æ±‚ç½‘é¡µçš„ç¤ºä¾‹ï¼ŒæœåŠ¡å™¨å“åº” HTML é¡µé¢ï¼Œæµè§ˆå™¨å¿…é¡»è§£æå®ƒå¹¶å†æ¬¡è¯·æ±‚æ‰€æœ‰åµŒå…¥çš„èµ„æºï¼Œä¾‹å¦‚å›¾åƒï¼ŒCSS å’Œ JavaScript æ–‡ä»¶ã€‚ åœ¨ HTTP/2 ä¸­ï¼Œä½¿ç”¨æœåŠ¡å™¨æ¨é€æ¦‚å¿µï¼Œå¯ä»¥å°†æœåŠ¡å™¨é…ç½®ä¸ºåœ¨å®¢æˆ·ç«¯æ˜ç¡®è¯·æ±‚ä¹‹å‰æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚å‘é€æ‰€æœ‰å¿…éœ€çš„èµ„äº§ã€‚ Stream Priorityæµçš„ä¼˜å…ˆçº§While multiplexing enables sending multiple requests concurrently, stream priority enables you to define which response should come first. I.e. it helps you to define the importance of one stream relative to the other streams on the same connection via weight and dependency associated with each stream. As a result, we can optimize the resource usage via controlling the allocation of CPU, memory, bandwidth and many other resources while ensuring the delivery of high priority responses to the client. è™½ç„¶å¤šè·¯å¤ç”¨å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä½†æµä¼˜å…ˆçº§ä½¿æ‚¨å¯ä»¥å®šä¹‰åº”è¯¥é¦–å…ˆå“åº”çš„å“åº”ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨é€šè¿‡ä¸æ¯ä¸ªæµå…³è”çš„æƒé‡å’Œä¾èµ–å…³ç³»æ¥å®šä¹‰ä¸€ä¸ªæµç›¸å¯¹äºåŒä¸€è¿æ¥ä¸Šçš„å…¶ä»–æµçš„é‡è¦æ€§ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶ CPUï¼Œå†…å­˜ï¼Œå¸¦å®½å’Œè®¸å¤šå…¶ä»–èµ„æºçš„åˆ†é…æ¥ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼ŒåŒæ—¶ç¡®ä¿å‘å®¢æˆ·ç«¯ä¼ é€’é«˜ä¼˜å…ˆçº§å“åº”ã€‚ Flow controlæµé‡æ§åˆ¶This is introduced to prevent any destructive interference on streams with each other that are in the same connection that might have caused as a result of multiplexing which introduces contention over use of the TCP connection causing blocked streams. Flow control is used for both individual streams and for the connection as a whole. å¼•å…¥è¿™æ˜¯ä¸ºäº†é˜²æ­¢å¯¹ç”±äºå¤šè·¯å¤ç”¨è€Œå¯èƒ½å¯¼è‡´çš„ç›¸åŒè¿æ¥çš„æµç›¸äº’ä¹‹é—´çš„ä»»ä½•ç ´åæ€§å¹²æ‰°ï¼Œè¿™å¼•èµ·äº†å¯¹ä½¿ç”¨ TCP è¿æ¥å¯¼è‡´é˜»å¡æµçš„äº‰ç”¨ã€‚ æµé‡æ§åˆ¶ç”¨äºå•ä¸ªæµå’Œæ•´ä¸ªè¿æ¥ã€‚ Error handlingé”™è¯¯å¤„ç†HTTP/2 handles two classes of errors. HTTP/2 å¤„ç†ä¸¤ç±»é”™è¯¯ Connection error â€” any error that prevents further processing of the frame layer or corrupts any connection state. Stream error â€” an error related to a specific stream that does not affect the processing of other streams. è¿æ¥é”™è¯¯ â€” ä»»ä½•é˜»æ­¢è¿›ä¸€æ­¥å¤„ç†å¸§å±‚æˆ–ç ´åä»»ä½•è¿æ¥çŠ¶æ€çš„é”™è¯¯ã€‚ æµé”™è¯¯ â€” ä¸ç‰¹å®šæµç›¸å…³çš„é”™è¯¯ï¼Œä¸ä¼šå½±å“å…¶ä»–æµçš„å¤„ç†ã€‚ I will be talking on How to Write an HTTP/2 Service and a Client in my next story ğŸ˜Š æˆ‘å°†åœ¨ä¸‹ä¸€ä¸ªæ•…äº‹ä¸­è®¨è®ºå¦‚ä½•ç¼–å†™ HTTP/2 æœåŠ¡å’Œå®¢æˆ·ç«¯ğŸ˜Š Mar 11,2019 ï¼ˆ2019-03-11ï¼‰ author: Varuni Punchihewa link: https://blog.usejournal.com/what-is-http-2-380d277d208c]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¡¨çŠ¶æ€ç¨‹åºç®¡ç†åº”ç”¨]]></title>
    <url>%2F%E5%8A%9F%E8%83%BD%2Ftable-status%2F</url>
    <content type="text"><![CDATA[è¯´æ˜è¡¨çš„çŠ¶æ€æ˜¯æˆ‘ä»¬åˆ¤æ–­ä¸šåŠ¡åˆ°è¾¾ä»€ä¹ˆåœ°æ–¹çš„æ ‡è¯†ï¼Œå®ƒå¯ä»¥æ˜¯è‹±æ–‡å•è¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°å­—ï¼Œæ›´å¯ä»¥æ˜¯æšä¸¾ã€‚åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰äººæ˜¯ç›´æ¥å†™çŠ¶æ€å€¼ï¼Œè¿™æ ·å¾ˆä¸å¥½ç»´æŠ¤ï¼Œå¦‚æœå€¼å˜æ›´ï¼Œä»–å°±å¾—æŠŠç¨‹åºé‡Œå…³è”çš„å€¼å…¨éƒ¨éƒ½éœ€è¦ä¿®æ”¹ã€‚ å¤„ç†model å¸¸é‡model å¯¹åº”çš„æ˜¯æ•°æ®è¡¨æ¥åˆ›å»ºçš„ã€‚æ‰€ä»¥è¡¨ä¸­çš„çŠ¶æ€å­—æ®µå¯ä»¥ä½¿ç”¨å¸¸é‡æ¥è¡¨ç¤ºï¼Œä½¿ç”¨æ—¶ç›´æ¥ä½¿ç”¨å¸¸é‡è®¿é—®å³å¯ã€‚ 12345678910111213&lt;?phpclass OrderModel extends Model&#123; const STATUS_TO_AUDIT = 2; const STATUS_TO_DELIVER = 3; public function getList($where) &#123; $map = []; $map['status'] = self::STATUS_TO_AUDIT; &#125;&#125; model é™æ€å±æ€§é™æ€å±æ€§ä¸»è¦çš„ä½œç”¨æ˜¯æœç´¢ä¸‹æ‹‰è¡¨å•ï¼ˆéœ€è¦æ ¼å¼åŒ–å¤„ç†ï¼‰å’Œåˆ—è¡¨çŠ¶æ€æ˜¾ç¤ºæ—¶ä½¿ç”¨ã€‚ 123456789101112&lt;?phpclass OrderModel extends Model&#123; const STATUS_TO_AUDIT = 2; const STATUS_TO_DELIVER = 3; public static $status = [ self::STATUS_TO_AUDIT =&gt; 'å¾…å®¡æ ¸', self::STATUS_TO_DELIVER =&gt; 'å¾…å‘è´§', ];&#125; æ··åˆçŠ¶æ€ç®¡ç†æ··åˆçŠ¶æ€å°±æ˜¯è¡¨ç¤ºä¸€ç§ä¸šåŠ¡çŠ¶æ€ï¼Œéœ€è¦å‡ ä¸ªçŠ¶æ€å­—æ®µè¿›è¡Œåˆ¤æ–­æ‰å¯ä»¥ç¡®è®¤ä¸šåŠ¡çš„å®é™…çŠ¶æ€ã€‚è¿™ç§æ··åˆçŠ¶æ€æ˜¯å¾ˆä¸å¥½ç»´æŠ¤çš„ï¼Œå› ä¸ºä½ åœ¨å¼€å‘ä¸­ä¼šå‘ç°ä½ æ€»æ˜¯æ¼æ”¹æŸäº›å­—æ®µè¢«æŒ¨æ‰¹ã€‚ç®¡ç†è¿™ç§çŠ¶æ€çš„åŠæ³•å°±æ˜¯æŠŠå®é™…çŠ¶æ€ç”¨æ•°ç»„å­˜å‚¨èµ·æ¥ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738&lt;?phpclass OrderModel extends Model&#123; // è®¢å•çŠ¶æ€ const STATUS_TO_AUDIT = 2; const STATUS_TO_DELIVER = 3; const STATUS_SUCCESS = 4; // å”®åçŠ¶æ€ const RETURN_NOT = 0; const RETURN_TODO = 1; const RETURN_ACCESS = 2; const RETURN_FAIL = 3; // æ— å”®åè®¢å• private $orderSuccess = [ 'status' =&gt; self::STATUS_SUCCESS, 'return_status' =&gt; self::RETURN_NOT, ]; // å”®åå¤±è´¥è®¢å• private $orderReturnFail = [ 'status' =&gt; self::STATUS_SUCCESS, 'return_status' =&gt; self::RETURN_FAIL, ]; // å˜æ›´è¡¨çŠ¶æ€,ä½¿ç”¨ç±»è¦†ç›– // $data += $this-&gt;orderReturnFail; // éªŒè¯è®¢å•çŠ¶æ€ // foreach ($this-&gt;orderReturnFail as $key =&gt; $value) &#123; // if ($data[$key] != $value) &#123; // return false; // &#125; // &#125; // return true;&#125; FQAéªŒè¯å½“å‰æ“ä½œçš„çŠ¶æ€å€¼æ˜¯å¦åˆæ³•12345&lt;?phpif (!in_array($status, array_keys(OrderModel::$statusMap)) &#123; // éæ³•çŠ¶æ€å€¼&#125; è¡¨é‡Œçš„çŠ¶æ€å€¼å¾ˆå¤šï¼Œä½†æ˜¯æ˜¾ç¤ºç»™ç”¨æˆ·åªéœ€è¦å…¶ä¸­å‡ ä¸ª123456789101112&lt;?phpclass OrderController&#123; public function getOrderStatus() &#123; return [ OrderModel::STATUS_TO_AUDIT =&gt; OrderModel::$statusMap[OrderModel::STATUS_TO_AUDIT], OrderModel::STATUS_SUCCESS =&gt; OrderModel::$statusMap[OrderModel::STATUS_SUCCESS], ]; &#125;&#125;]]></content>
      <categories>
        <category>åŠŸèƒ½</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[The Internet changes: HTTP/3 will not use TCP anymore(å› ç‰¹ç½‘å˜æ›´ï¼šHTTP/3 å°†ä¸å†ä½¿ç”¨ TCP)]]></title>
    <url>%2F%E7%BF%BB%E8%AF%91%2Fthe-internet-changes-http-3-will-not-use-tcp-anymore%2F</url>
    <content type="text"><![CDATA[QUIC is the protocol underlying the next version of HTTPQUIC æ˜¯ä¸‹ä¸€ä¸ªç‰ˆæœ¬ HTTP çš„åŸºç¡€åè®®the Internet Engineering Task Force (IETF) has revealed that the third official version of HyperText Transfer Protocol (HTTP) will not use TCP anymore. Instead, it will run over the QUIC protocol first developed by Google back in 2012. å› ç‰¹ç½‘å·¥ç¨‹å·¥ä½œç»„ï¼ˆInternet Engineering Task Force ç®€ç§°ï¼šIETFï¼‰é€éœ²ï¼Œç¬¬ä¸‰ä¸ªå®˜æ–¹ç‰ˆæœ¬çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocol ç®€ç§°ï¼šHTTPï¼‰å°†ä¸å†ä½¿ç”¨ TCPã€‚åè€Œï¼Œå®ƒå°†è¿è¡Œ 2012 å¹´ç”±è°·æ­Œé¦–æ¬¡å¼€å‘çš„ QUIC åè®®ã€‚ WHAT IS QUIC?ä»€ä¹ˆæ˜¯ QUICï¼ŸQuick UDP Internet Connections (QUIC) is, as its name states, a transport layer protocol based on multiplexed UDP connections. In fact, QUIC uses a combination of TCP + TLS + SPDY over UDP with several enhancements with respect to the current HTTP/2 over TCP implementation. å¿«é€Ÿ UDP å› ç‰¹ç½‘è¿æ¥ï¼ˆQuick UDP Internet Connections ç®€ç§°ï¼šQUICï¼‰ æ˜¯ä¸€ç§åŸºäºå¤šè·¯å¤ç”¨çš„ UDP è¿æ¥çš„ä¼ è¾“å±‚åè®®ã€‚äº‹å®ä¸Šï¼ŒQUIC ä½¿ç”¨äº† TCP + TLS + SPDY over UDP ä¸å½“å‰ HTTP/2 over TCP å®ç°çš„å‡ ä¸ªå¢å¼ºåŠŸèƒ½çš„ç»„åˆã€‚ The IETF has been working on a standardized version of Googleâ€™s QUIC since 2016, and it was recently that they announced their intention to include it for the new HTTP/3 version. However, the IETF QUIC version already diverged significantly from the original QUIC design. IETF è‡ª 2016 å¹´ä»¥æ¥ä¸€ç›´è‡´åŠ›äºå¼€å‘æ ‡å‡†åŒ–çš„ Google QUIC ç‰ˆæœ¬ï¼Œæœ€è¿‘ä»–ä»¬å®£å¸ƒæ‰“ç®—å°†å…¶ç”¨äºæ–°çš„ HTTP/3 ç‰ˆæœ¬ã€‚ç„¶è€Œï¼ŒIETF çš„ QUIC ç‰ˆæœ¬å·²ç»ä¸åŸæ¥çš„ QUIC è®¾è®¡æœ‰äº†å¾ˆå¤§çš„ä¸åŒã€‚ Position of HTTP/3 and QUIC in the protocol stackHTTP/3 å’Œ QUIC åœ¨åè®®æ ˆä¸­çš„ä½ç½® QUIC protocol aims for simplicity and speed while maintaining security thanks to the TLS 1.3 encryption. They developed a more efficient protocol in terms of connection establishment and data transfer. According to Google, QUIC handshakes frequently require zero roundtrips before sending payload, as compared to 1â€“3 roundtrips for TCP+TLS. Actually, the first connection ever requires one roundtrip and the followings will work with zero. ç”±äºé‡‡ç”¨äº† TLS 1.3 åŠ å¯†ï¼ŒQUIC åè®®æ—¨åœ¨ç®€åŒ–å’Œæé«˜é€Ÿåº¦ï¼ŒåŒæ—¶ä¿æŒå®‰å…¨æ€§ã€‚ä»–ä»¬åœ¨å»ºç«‹è¿æ¥å’Œæ•°æ®ä¼ è¾“æ–¹é¢å¼€å‘äº†ä¸€ç§æ›´æœ‰æ•ˆçš„åè®®ã€‚æ®è°·æ­Œç§°ï¼Œä¸ TCP + TLS çš„ 1-3 æ¬¡å¾€è¿”ç›¸æ¯”ï¼ŒQuicæ¡æ‰‹åœ¨å‘é€æœ‰æ•ˆè´Ÿè½½ä¹‹å‰é€šå¸¸éœ€è¦0æ¬¡å¾€è¿”ã€‚å®é™…ä¸Šï¼Œç¬¬ä¸€æ¬¡è¿æ¥éœ€è¦ä¸€æ¬¡å¾€è¿”ï¼Œä¸‹é¢çš„å†…å®¹å°†ä¸å¾€è¿”ã€‚ Furthermore, it deals better with packet loss than the current TCP. Every retransmitted packet consumes a new sequence number, hence eliminating ambiguities and preventing losses from causing RTO. As Jana Iyengar from IETF states, QUIC is not only a redefinition of the Internet transport layer but a reinvention to do the transport right. æ­¤å¤–ï¼Œå®ƒæ¯”å½“å‰çš„ TCP æ›´èƒ½å¤„ç†æ•°æ®åŒ…ä¸¢å¤±ã€‚æ¯ä¸€ä¸ªé‡æ–°ä¼ è¾“çš„åŒ…éƒ½ä¼šæ¶ˆè€—ä¸€ä¸ªæ–°çš„åºåˆ—å·ï¼Œå› æ­¤æ¶ˆé™¤äº†æ¨¡ç³Šæ€§ï¼Œå¹¶é˜²æ­¢äº†é€ æˆ RTO çš„æŸå¤±ã€‚æ­£å¦‚æ¥è‡ª IETF çš„ Jana Iyengar æ‰€è¯´ï¼ŒQUIC ä¸ä»…æ˜¯å¯¹äº’è”ç½‘ä¼ è¾“å±‚çš„é‡æ–°å®šä¹‰ï¼Œè€Œä¸”æ˜¯å¯¹å®ç°ä¼ è¾“æƒçš„é‡æ–°å®šä¹‰ã€‚ At the moment, only 1.2 % of the top websites support QUIC, but they are generally high-traffic sites: almost every Google service supports their own QUIC protocol. ç›®å‰ï¼Œåªæœ‰ 1.2% çš„é¡¶çº§ç½‘ç«™æ”¯æŒ QUICï¼Œä½†å®ƒä»¬é€šå¸¸æ˜¯é«˜æµé‡çš„ç½‘ç«™ï¼šå‡ ä¹æ¯ä¸ªè°·æ­ŒæœåŠ¡éƒ½æ”¯æŒè‡ªå·±çš„ QUIC åè®®ã€‚ IS QUIC SECURE?QUIC æ˜¯å®‰å…¨çš„ï¼ŸQUIC first development included its own encryption. However, it was just a temporary implementation destined to be replaced by TLS 1.3 as described by the IETF. QUIC çš„ç¬¬ä¸€ä¸ªå¼€å‘åŒ…æ‹¬å®ƒè‡ªå·±çš„åŠ å¯†ã€‚ç„¶è€Œï¼Œæ­£å¦‚ IETF æ‰€æè¿°çš„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªä¸´æ—¶çš„å®ç°ï¼Œæ³¨å®šè¦è¢« TLS 1.3 æ‰€å–ä»£ã€‚ Actually, the connection establishment strategy of QUIC is based on the combination of crypto and transport handshake. å®é™…ä¸Šï¼ŒQUIC çš„è¿æ¥å»ºç«‹ç­–ç•¥æ˜¯åŸºäºåŠ å¯†å’Œä¼ è¾“æ¡æ‰‹çš„ç»“åˆã€‚ QUIC relies on a combined cryptographic and transport handshake to minimize connection establishment latency. QUIC ä¾èµ–äºå¯†ç å’Œä¼ è¾“æ¡æ‰‹çš„ç»„åˆï¼Œä»¥æœ€å°åŒ–è¿æ¥å»ºç«‹å»¶è¿Ÿã€‚ Integration of QUIC and TLS, adapted from the IETFâ€™s draft of â€œUsing Transport Layer Security (TLS) to Secure QUICâ€.QUIC å’Œ TLS çš„é›†æˆï¼Œæ”¹ç¼–è‡ª IETF çš„ â€œä½¿ç”¨ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆTransport Layer Security ç®€ç§°ï¼šTLSï¼‰ä¿æŠ¤ QUICâ€ è‰æ¡ˆã€‚ With QUIC, Everything will be encrypted by default. Nevertheless, there are indeed security risks with QUIC as with any other technology. ä½¿ç”¨ QUICï¼Œé»˜è®¤æƒ…å†µä¸‹å°†åŠ å¯†æ‰€æœ‰å†…å®¹ã€‚ç„¶è€Œï¼Œä¸å…¶ä»–æŠ€æœ¯ä¸€æ ·ï¼ŒQUIC ç¡®å®å­˜åœ¨å®‰å…¨é£é™©ã€‚ The work of Robert Lychev and Samuel Jero in 2015 reported several weaknesses of the protocol. QUIC performance can be degraded by attacks like the Server Config Replay Attack. However, the confidentiality and the authenticity of the data seem to be properly secured according to their security model and tests. Robert Lychev å’Œ Samuel Jero åœ¨ 2015 å¹´çš„ç ”ç©¶æŠ¥å‘Šäº†è¯¥åè®®çš„å‡ ä¸ªå¼±ç‚¹ã€‚åƒæœåŠ¡å™¨é…ç½®é‡æ”¾æ”»å‡»è¿™æ ·çš„æ”»å‡»ä¼šé™ä½ QUIC æ€§èƒ½ã€‚ç„¶è€Œï¼Œæ ¹æ®å®‰å…¨æ¨¡å‹å’Œæµ‹è¯•ï¼Œæ•°æ®çš„æœºå¯†æ€§å’ŒçœŸå®æ€§ä¼¼ä¹å¾—åˆ°äº†é€‚å½“çš„ä¿æŠ¤ã€‚ Understanding Event-Driven Architectures (EDA): the paradigm of the future ç†è§£äº‹ä»¶é©±åŠ¨çš„architecturesï¼ˆEDAï¼‰ï¼šâ€œèŒƒå¼â€ BITCOIN case study: applying basic Digital Signal Processing into financial data BITCOIN æ¡ˆä¾‹ç ”ç©¶ï¼šå°†åŸºæœ¬æ•°å­—ä¿¡å·å¤„ç†åº”ç”¨äºé‡‘èæ•°æ® If you want to learn more about QUIC and how it will be integrated into the next version of HTTP, I strongly recommend you to check the official documentation from Google and the drafts published by IETF. You can find them in the bibliography of this article! å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äº QUIC çš„ä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•å°†å…¶é›†æˆåˆ°ä¸‹ä¸€ä¸ª HTTP ç‰ˆæœ¬ä¸­ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨æŸ¥çœ‹æ¥è‡ª Google çš„å®˜æ–¹æ–‡æ¡£å’Œ IETF å‘å¸ƒçš„è‰ç¨¿ã€‚ä½ å¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« çš„å‚è€ƒä¹¦ç›®ä¸­æ‰¾åˆ°å®ƒä»¬ï¼ Innovation is always spinning forward. Just like a Drill. åˆ›æ–°æ€»æ˜¯å‘å‰æ—‹è½¬ã€‚å°±åƒä¸€ä¸ªç»ƒä¹ ã€‚ BIBLIOGRAPHYå‚è€ƒæ–‡çŒ®[1] â€QUIC, a multiplexed stream transport over UDP â€” The Chromium Projectsâ€, Chromium.org. [Online]. Available: https://www.chromium.org/quic. [Accessed: 18- Nov- 2018] [2] M. Thomson, â€œdraft-ietf-quic-transport-16 â€” QUIC: A UDP-Based Multiplexed and Secure Transportâ€, Tools.ietf.org, 2018. [Online]. Available: https://tools.ietf.org/html/draft-ietf-quic-transport-16. [Accessed: 18- Nov- 2018] [3] S. Turner, â€œdraft-ietf-quic-tls-03 â€” Using Transport Layer Security (TLS) to Secure QUICâ€, Tools.ietf.org, 2018. [Online]. Available: https://tools.ietf.org/html/draft-ietf-quic-tls-03#section-3. [Accessed: 18- Nov- 2018] [4] E. Rescorla, â€œThe Transport Layer Security (TLS) Protocol Version 1.3â€, Tools.ietf.org, 2018. [Online]. Available: https://tools.ietf.org/id/draft-ietf-tls-tls13-23.html. [Accessed: 18- Nov- 2018] [5] R. Lychev, S. Jero, A. Boldyreva and C. Nita-Rotaru, â€œHow Secure and Quick is QUIC? Provable Security and Performance Analysesâ€, 2015. [Online]. Available: https://www.cc.gatech.edu/~aboldyre/papers/quic.pdf. [Accessed: 18- Nov- 2018] Nov 18, 2018 ï¼ˆ2018-11-18ï¼‰ author: Telmo Subira Rodriguez link: https://medium.com/drill/the-internet-changes-http-3-will-not-use-tcp-anymore-427e82eeadc0]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›æƒ³è‡ªå·±ç¬¬ä¸€æ¬¡å†™çˆ¬è™«çš„ç»å†]]></title>
    <url>%2F%E5%9B%9E%E5%BF%86%E5%BD%95%2F%E5%9B%9E%E6%83%B3%E8%87%AA%E5%B7%B1%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%86%99%E7%88%AC%E8%99%AB%E7%9A%84%E7%BB%8F%E5%8E%86%2F</url>
    <content type="text"><![CDATA[èµ·å› ç¬¬ä¸€æ¬¡çˆ¬è™«æ˜¯å› ä¸ºè§‰å¾—ä¸Šç­ä¸å¿™ï¼Œåˆä¸æƒ³æ¯å¤©ç©æ¸¸æˆè®©è‡ªå·±åæ‚”ã€‚æ‰€ä»¥ä»¥é”»ç‚¼ä¸ºç›®çš„å†™çˆ¬è™«ã€‚å› ä¸ºè‡ªå·±å°¿æ€§æ˜¯æ²¡æœ‰æ¯…åŠ›ä¹Ÿå¾ˆå®¹æ˜“æ”¾å¼ƒçš„äººã€‚æ‰€ä»¥æˆ‘é€‰æ‹©çš„å†…å®¹æ˜¯æŠ“å°ç½‘ç«™ï¼Œè®©è‡ªå·±çš„å­¦ä¹ ä¸ä¼šå¤ªè¿‡äºå›°éš¾ã€‚é‚£æ—¶å¹¶æ²¡æœ‰å¾ˆå¤šå¼€å‘ç»éªŒï¼Œä¹Ÿæ²¡æœ‰åšæ‰€è°“çš„å¯åŠ¨å‡†å¤‡ã€‚éƒ½æ˜¯æƒ³åˆ°ä»€ä¹ˆå°±å»åšä»€ä¹ˆï¼Œä¹Ÿä¸çŸ¥é“è‡ªå·±è¿™ä¸ªé¡¹ç›®è¦åšåˆ°ä»€ä¹ˆç¨‹åº¦ã€‚ å®ç°ç»è¿‡æˆ‘çš„æƒ³æ³•å¾ˆç®€å•ï¼Œå–å¾—ç½‘é¡µï¼ŒåŒ¹é…ç½‘é¡µæƒ³è¦çš„å†…å®¹å¹¶ä¿å­˜èµ·æ¥ã€‚å› ä¸ºæŠ€èƒ½é—®é¢˜ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨ python æ¥æŠ“å–ã€‚æˆ‘ç”¨çš„æ˜¯ phpã€‚ æœ€å¼€å§‹ï¼Œæˆ‘ä½¿ç”¨ file_get_content() å‡½æ•°æ¥å–å¾—ç½‘é¡µï¼Œç„¶åç”¨æ­£åˆ™åŒ¹é…æ¥åŒ¹é…å†…å®¹ï¼Œä½†æ˜¯é‚£å¤ªæ…¢äº†ï¼Œç„¶åæˆ‘å°±å»æœäº†ä¸€ä¸‹ï¼Œä½¿ç”¨äº† curl å‡½æ•°æ¥ä»£æ›¿äº† file_get_contentã€‚ æˆ‘æŠ“å–çš„ç½‘ç«™æœ‰ä¸‰ç§å†…å®¹ï¼šæ–‡ç« ã€å›¾ç»„å’Œè§†é¢‘ æ–‡ç« åªéœ€è¦æŠ“å–ç½‘é¡µå°±å¯ä»¥å–å¾—å†…å®¹äº†ã€‚ä½†æ˜¯å›¾ç»„ä¸ä½†è¦å–å¾—ç½‘é¡µï¼Œè¿˜è¦åŒ¹é…åˆ°çš„å›¾ç‰‡ä¸‹è½½åˆ°æœ¬åœ°ä¸­ã€‚å½“æ—¶å®Œå…¨å°±æ˜¯å†™ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç„¶åå°±æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘åˆ†æˆä¸¤æ­¥è„šæœ¬è¿›è¡Œå¤„ç†ã€‚ä½†æ˜¯æ€»æ˜¯è¢«å¤§å¤§å°å°çš„é—®é¢˜å¡å¾€ã€‚åé¢ä¹Ÿåªåšäº†æ–‡ç« å’Œå›¾ç»„çš„æŠ“å–ï¼Œä¹Ÿæ²¡æœ‰æ•´ç†ç»´æŠ¤äº†ã€‚ ç¢°åˆ°çš„é—®é¢˜å­—ç¬¦ç¼–ç å› ä¸ºæœ‰äº›æ–‡ç« å¹¶ä¸æ˜¯ä½¿ç”¨ utf-8 ç¼–ç ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ mb_detect_encoding å‡½æ•°æ£€æŸ¥ç½‘é¡µçš„å­—ç¬¦ç¼–ç å¹¶ç”¨ iconv å‡½æ•°è½¬æˆ utf-8 çš„æ ¼å¼ã€‚ å†…å­˜å ç”¨è¶Šè¿‡äº† php.ini çš„é™åˆ¶ï¼Œå¯¼è‡´æŠ¥å¼‚å¸¸ç¨‹åºä¸­æ–­æœ€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯æŠŠæ‰€æœ‰å¾—åˆ°çš„å†…å®¹å…ˆå­˜æ”¾åœ¨å˜é‡ä¸­ï¼Œåˆ°ç»“æŸåå†è¿›è¡Œä¸€äº›æ€§ä¿å­˜ï¼Œæ‰€ä»¥å¯¼è‡´å˜é‡å­˜äº†å¤ªå¤šæ•°æ® èµ„æºé‡å¤ç¼–ç æ—¶æ²¡æœ‰è€ƒè™‘åˆ°è„šæœ¬ä¸­æ–­çš„æƒ…å†µï¼Œæ¯æ¬¡éƒ½æ˜¯ä»å¤´å¼€å§‹ã€‚è¿˜æœ‰ä¸€äº›å›¾ç»„èµ„æºæ˜¯æœ¬æ¥å°±æ˜¯é‡å¤çš„ï¼Œ è„šæœ¬è¿è¡Œå¡æ­»ä¸‹è½½æ—¶æœ‰ç½‘ç»œæ³¢åŠ¨ã€ç”µè„‘ä¼‘çœ éƒ½ä¼šå¯¼è‡´å¡æ­»ã€‚è¿™ç§æƒ…å†µè¦ä¹ˆå°±æƒ³åŠæ³•å¤„ç†ç½‘ç»œæ³¢åŠ¨å’Œç”µè„‘çš„é—®é¢˜ï¼Œè¦ä¹ˆå°±åšä¸€äº›ä¸­æ–­å‘½ä»¤åé‡æ–°è¿è¡Œä¼šæ¥ç€æ‰§è¡Œçš„æ“ä½œã€‚ æ•°æ®ä¸¢å¤±æ–‡ç« å†…å®¹å­˜åœ¨æ•°æ®åº“ï¼Œä½¿ç”¨çš„æ˜¯ text ç±»å‹å­—æ®µï¼Œä½†æ˜¯æŠ“å–çš„å†…å®¹è¶…è¿‡äº†èŒƒå›´å¯¼è‡´å†…å®¹é—å¤±ã€‚å¯ä»¥æœ‰ä»¥ä¸‹ 2 ç§åŠæ³•å»è§£å†³è¿™ç§é—®é¢˜ã€‚ è®¾ç½®åˆé€‚çš„å­—æ®µ åˆ‡æ¢ä¸€ç§å†…å®¹å­˜å‚¨æ–¹å¼ï¼Œå¦‚å­˜æˆæ–‡ä»¶ æ‰©å±•æ€è€ƒæ¨¡æ‹Ÿç™»å½•è¿™é‡Œæ¶‰åŠåˆ° session åŸç†ã€‚ä¼ ç»Ÿçš„ç½‘ç«™ä¸€èˆ¬éƒ½ä½¿ç”¨ session åŸç†æ¥å®ç°ç™»å½•ç»‘å®šã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠç™»å½•æˆåŠŸåçš„æ‰€æœ‰ cookie å¸¦ä¸Šï¼Œå¹¶å…è®¸ cookie æ”¹å˜å³å¯ã€‚ curl å¯ä»¥è¿›è¡Œè®¾ç½® å®šæ—¶æŠ“å–ä½¿ç”¨å®šæ—¶ä»»åŠ¡ï¼Œå¹¶æŠŠä¸Šé¢è¯´çš„å¯æŒç»­æŸ¥è¯¢æ–¹æ³•ä½¿ç”¨ä¸Šå³å¯ã€‚ ååçˆ¬è™«æœ‰çˆ¬è™«è‡ªç„¶å°±ä¼šæœ‰åçˆ¬è™«çš„æœºåˆ¶ã€‚æœ‰çš„ä½¿ç”¨å•ä¸€çš„ä¸€ç§æœºåˆ¶æ¥é˜²æ­¢ï¼Œæœ‰çš„åˆæ˜¯ä½¿ç”¨æ··åˆçš„æœºåˆ¶æ¥è¿›è¡Œåˆ¶çº¦ã€‚ä¸ç®¡ä»€ä¹ˆæ–¹å¼éƒ½æœ‰è¶Šè¿‡æ–¹æ³•ã€‚ä¸»è¦åçˆ¬è™«æœ‰ï¼š301ä¸­è½¬ã€æ··ä¹±çš„å­—ç¬¦ç¼–ç ã€ä¸æˆå¯¹ html æ ‡ç­¾ä»¥åŠè¯·æ±‚é€Ÿç‡é™åˆ¶ã€‚]]></content>
      <categories>
        <category>å›å¿†å½•</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶]]></title>
    <url>%2F%E5%8A%9F%E8%83%BD%2Flogin-limit%2F</url>
    <content type="text"><![CDATA[è¯´æ˜è¿™æ˜¯ä¸€ä¸ªé˜²é¢‘ç¹è¯·æ±‚ç™»å½•æ¥å£å¯¼è‡´æœåŠ¡å™¨æ€§èƒ½å ç”¨è¿‡å¤šã€‚ä¹Ÿå¯ä»¥é˜²æ­¢åˆ«äººå°è¯•å¯†ç  åŸç†è®°å½•ç”¨æˆ·è®¿é—®æ¬¡æ•°ï¼Œåˆ°æŒ‡å®šæ¬¡æ•°åå¯¹ä»–è¿›è¡Œé”å¤„ç†ã€‚å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œå‰ç«¯ä½¿ç”¨ cookie è¿›è¡Œè¯·æ±‚è®°å½•ï¼Œè¯·æ±‚æˆåŠŸä¼šæŠŠç™»å½•æ¬¡æ•°ç›¸å…³çš„ cookie æ¸…ç†æ‰ã€‚æ¥å£ç«¯ä¹Ÿéœ€è¦ä¸€èµ·è¿›è¡Œè®°å½•é˜²æ­¢ç›´æ¥å¯¹æ¥å£è¿›è¡Œè¯·æ±‚ã€‚æ¥å£ç«¯ä½¿ç”¨ redis è®°å½•ä»–çš„ IPï¼Œåˆç”¨åˆ«ä¸€ä¸ªé”®æ¥åˆ¤åˆ«é”çŠ¶æ€ã€‚ å®ç°12345678910111213141516171819202122232425262728293031323334&lt;?php$redis = new Redis();$redis-&gt;connect("127.0.0.1", 6379);$redis-&gt;auth('you_password');$redis-&gt;select(3);$ip = get_client_ip();if ($redis-&gt;get("login_lock.&#123;$ip&#125;")) &#123; // ç¦æ­¢è®¿é—®æ¥å£&#125;// æ·»åŠ è®¿é—®æ¬¡æ•°$redis-&gt;incr("login_count.&#123;$ip&#125;");// ä¸Šé”$addLockCount = 3;if ($addLockCount &lt; $redis-&gt;get("login_count.&#123;$ip&#125;")) &#123; // é”å®šæ¬¡æ•° $redis-&gt;incr("login_lock_count.&#123;$ip&#125;"); // é”å®šæ¬¡æ•°è¶Šå¤šï¼Œé”å®šæ—¶é—´è¶Šé•¿ $lockTime = 60 * $redis-&gt;get("login_lock_count.&#123;$ip&#125;"); $redis-&gt;set("login_lock.&#123;$ip&#125;", $ip, $lockTime); // æ¸…ç©ºç™»å½•è®°å½•æ•° $redis-&gt;del("login_count.&#123;$ip&#125;");&#125;// ç™»å½•æˆåŠŸè¦è®°å¾—å»é™¤å…³è”çš„ç¼“å­˜$redis-&gt;del("login_count.&#123;$ip&#125;");$redis-&gt;del("login_lock.&#123;$ip&#125;");$redis-&gt;del("login_lock_count.&#123;$ip&#125;");]]></content>
      <categories>
        <category>åŠŸèƒ½</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›æ–‡æ•°]]></title>
    <url>%2F%E7%AE%97%E6%B3%95%2Fpalindrome-number%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯å›æ–‡æ•°ã€‚å›æ–‡æ•°æ˜¯æŒ‡æ­£åºï¼ˆä»å·¦å‘å³ï¼‰å’Œå€’åºï¼ˆä»å³å‘å·¦ï¼‰è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: 121è¾“å‡º: true ç¤ºä¾‹ 2: 123è¾“å…¥: -121è¾“å‡º: falseè§£é‡Š: ä»å·¦å‘å³è¯», ä¸º -121 ã€‚ ä»å³å‘å·¦è¯», ä¸º 121- ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚ ç¤ºä¾‹ 3: 123è¾“å…¥: 10è¾“å‡º: falseè§£é‡Š: ä»å³å‘å·¦è¯», ä¸º 01 ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚ è¿›é˜¶: ä½ èƒ½ä¸å°†æ•´æ•°è½¬ä¸ºå­—ç¬¦ä¸²æ¥è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ é¢˜ç›®é“¾æ¥ æ³¨ï¼š åè½¬å›æ–‡æ—¶éœ€æ³¨æ„æ•°å€¼æº¢å‡º æ ‡ç­¾ æ•°å­¦ ä¸ªäººè§£ç­”å¦‚é¢˜å¯çŸ¥å•æ•°ï¼Œè´Ÿæ•°ï¼Œ0ç»“å°¾çš„æ•´æ•°éƒ½ä¸æ˜¯å›æ–‡æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657# æ–¹æ³•1 å‰åæ•°å­—å¯¹æ¯”function isPalindrome($x) &#123; if ($x &lt; 9 || ($x % 10 === 0)) return false; $x = (string)$x; $i = 0; $max = strlen($x) - 1; while ($i &lt; $max) &#123; if ($x&#123;$i&#125; == $x&#123;$max&#125;) &#123; $i++; $max--; &#125; else &#123; return false; &#125; &#125; return true;&#125;# æ–¹æ³•2 ç¿»è½¬æ•°å­—å¯¹æ¯”function isPalindrome($x) &#123; if ($x &lt; 9 || ($x % 10 === 0)) return false; $rev_num = 0; $val = $x; while ($val != 0) &#123; // æ³¨ï¼šå‡¡æ˜¯æ•°å­—åè½¬éƒ½å¯èƒ½ä¼šå­˜åœ¨æ•°å­—å€¼è¶ŠèŒƒå›´çš„æƒ…å†µ $rev_num = bcmul($rev_num, 10) + ($val % 10);// ($rev_num * 10) + ($val % 10) $val = bcdiv($val, 10); // $val / 10; &#125; return ($rev_num === $x);&#125;# æ–¹æ³•3 æ•°å­—æ³•å‰åå¯¹æ¯”function isPalindrome($x) &#123; if ($x &lt; 9 || ($x % 10 === 0)) return false; // å– $x çš„ä½æ•° $bit = 1; while (9 &lt; bcdiv($x, $bit)) &#123; // é™¤å‡ºæ¥çš„æ•°å¤§äº 9 å°±è¦è¿›ä½ $bit = $bit * 10; &#125; while (9 &lt; $x) &#123; // é™¤ä¸‹çš„æ•°å¦‚æœå¤§äº 9 å°±è¿˜å¯ä»¥è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚ 10 çš„ 10ï¼Œä¸ªä½æ•°å°±ä¸ç”¨æ¯”äº† $l = bcdiv($x, $bit); // $x / $bit $r = $x % 10; if ($l != $r) return false; $x = $x % $bit; // å»å¤´ $x = bcdiv($x, 10); // å»å°¾ $x / 10 $bit = bcdiv($bit, 100); // $bit / 100 = å¤´+å°¾ = 10 * 10 &#125; return true;&#125; åšé¢˜æ€»ç»“è¿™åˆ°é¢˜åŠ æ·±äº†ä¸Šå‘¨åšçš„æ•´æ•°åè½¬æ‰€ä½¿ç”¨çš„å¾ªç¯æŠ€å·§ã€‚]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•å‡å°‘éœ€æ±‚ç†è§£çš„åå·®]]></title>
    <url>%2F%E6%80%9D%E8%80%83%2F%E5%A6%82%E4%BD%95%E5%87%8F%E5%B0%91%E9%9C%80%E6%B1%82%E7%90%86%E8%A7%A3%E7%9A%84%E5%81%8F%E5%B7%AE%2F</url>
    <content type="text"><![CDATA[å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šå› ä¸ºç§ç§åŸå› å¯¼è‡´è‡ªå·±åšçš„åŠŸèƒ½ä¸åˆæ ¼éœ€è¦é‡åšã€‚é‚£ä¹ˆå¦‚ä½•å‡å°‘éœ€è¦ç†è§£çš„åå·®å‘¢ï¼Ÿ æ€è€ƒä¸ºä»€ä¹ˆæ€»æƒ³ç€åšä¸€æ­¥æƒ³ä¸€æ­¥å‘¢å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ¥åˆ°ä»»åŠ¡æ€»æ˜¯å¿ä¸äº†è‡ªå·±å†…å¿ƒçš„å†²åŠ¨ï¼Œä¸Šå»å°±æ˜¯å¹²ã€‚è¦ä¹ˆå¼€å‘åˆ°ä¸€åŠå› ä¸ºä¸€ä¸ªåŠŸèƒ½ç»†èŠ‚æ•´ä¸ªç¨‹åºçš„è®¾è®¡éƒ½ä¸åˆç†è¦é‡æ„ï¼Œè¦ä¹ˆå®Œæˆåï¼Œæ”¹äº† N æ¬¡éƒ½è¿˜æ˜¯æ²¡æœ‰è¢«åˆ¤æ–­ä»»åŠ¡å®Œæˆã€‚å¦‚æœæˆ‘ä»¬æ¥åˆ°ä»»åŠ¡æ—¶æŠŠåŠŸèƒ½çš„æ¯ä¸ªç»†èŠ‚éƒ½è¿‡ä¸€éã€‚æŠŠä¸æ˜ç™½çš„åœ°æ–¹é—®äº§å“é—®æ¸…æ¥šï¼Œé‚£åé¢å¼€å‘å®Œåå°±åªä¼šæ˜¯éœ€æ±‚ä¿®æ”¹çš„é‚£ç§ä¿®æ”¹äº†ï¼Œè¿™å°±ä¸æ˜¯è‡ªèº«çš„é—®é¢˜äº†ã€‚ ä¸ºä»€ä¹ˆåŒä¸€ä¸ªåŸå‹åˆ«äººç†è§£çš„åŠŸèƒ½å’Œæˆ‘ç†è§£çš„ä¸åŒå°±åƒèå£«æ¯”äºšè¯´çš„ï¼šâ€œä¸€åƒä¸ªè¯»è€…å°±æœ‰ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹â€ï¼Œæ¯ä¸ªäººç†è§£æ–¹é¢éƒ½ä¼šæœ‰åå·®ã€‚æœ€å¥½çš„çŠ¶æ€å°±æ˜¯æ‰€ä»¥åŠŸèƒ½å¼€å‘çš„åŸå› éƒ½äº†è§£æ¸…æ¥šã€‚è¦ä¸ç„¶åšä¸€ä¸ªè¿ä½ è‡ªå·±éƒ½è§‰å¾—æ²¡ç”¨çš„åŠŸèƒ½ï¼Œåé¢ç æ‰äº†ä½ ä¹Ÿæ— å¤„è®²ç†å»ã€‚è€Œå®ç°çš„ç»†èŠ‚æˆ‘ä»¬å¯ä»¥å‘äº§å“ä»¥åŠç»„é•¿æ ¡å¯¹è‡ªå·±çš„ç†è§£ã€‚æ‰ä¼šæœ€å¤§é™åº¦çš„å‡å°‘è¯¯å·®ã€‚ ç»“è®ºä¸ç®¡åœ¨å·¥ä½œä¸­è¿˜æ˜¯åœ¨å¹³æ—¶ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ·±å…¥åšäº‹çš„åŸå› ã€‚å¦‚æœæ˜¯å¸®å¿™ï¼Œéœ€è¦å®Œå…¨ç¡®è®¤è‡ªå·±çš„ç†è§£æ˜¯å¦åå·®ï¼Œå¼€å‘çš„ç»†èŠ‚æ˜¯å¦æœ‰é—æ¼ã€‚æ²Ÿé€šçš„æˆæœ¬ç¡®å®æ˜¯å¾ˆå¤§ã€‚ä½†æ˜¯åŠ¨è„‘åŠ¨å˜´æ¯”åŠ¨æ‰‹æ¥çš„è½»æ¾å¾ˆå¤šã€‚]]></content>
      <categories>
        <category>æ€è€ƒ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[redis unauthorized access vulnerability simulation(redisæœªç»æˆæƒçš„è®¿é—®æ¼æ´æ¨¡æ‹Ÿ)]]></title>
    <url>%2F%E7%BF%BB%E8%AF%91%2Fredis-unauthorized-access-vulnerability-simulation%2F</url>
    <content type="text"><![CDATA[Redis, is an open source, widely popular data structure tool that can be used as an in-memory distributed database, message broker or cache. Since it is designed to be accessed inside trusted environments, it should not be exposed on the Internet. However, some Redisâ€™ are bind to public interface and even has no password authentication protection. Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ã€å¹¿æ³›æµè¡Œçš„æ•°æ®ç»“æ„å·¥å…·ï¼Œå¯ä»¥ç”¨ä½œå†…å­˜ä¸­çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€æ¶ˆæ¯ä»£ç†æˆ–ç¼“å­˜ã€‚å› ä¸ºå®ƒè¢«è®¾è®¡ä¸ºåœ¨å—ä¿¡ä»»çš„ç¯å¢ƒä¸­è®¿é—®ï¼Œæ‰€ä»¥ä¸åº”è¯¥åœ¨ Internet ä¸Šå…¬å¼€ã€‚ç„¶è€Œï¼Œä¸€äº› Redis ç»‘å®šåˆ°å…¬å…±æ¥å£ï¼Œç”šè‡³æ²¡æœ‰å¯†ç èº«ä»½éªŒè¯ä¿æŠ¤ã€‚ Under certain conditions, if Redis runs with the root account (or not even), attackers can write an SSH public key file to the root account, directly logging on to the victim server through SSH. This may allow hackers to gain server privileges, delete or steal data, or even lead to an encryption extortion, critically endangering normal business services. åœ¨æŸäº›æ¡ä»¶ä¸‹ï¼Œå¦‚æœRedisä½¿ç”¨ root å¸æˆ·è¿è¡Œï¼ˆç”šè‡³ä¸ä½¿ç”¨ï¼‰ï¼Œæ”»å‡»è€…å¯ä»¥å‘æ ¹å¸æˆ·å†™å…¥ SSH å…¬é’¥æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡ SSH ç™»å½•åˆ°å—å®³æœåŠ¡å™¨ã€‚è¿™å¯èƒ½ä½¿é»‘å®¢è·å¾—æœåŠ¡å™¨ç‰¹æƒï¼Œåˆ é™¤æˆ–çªƒå–æ•°æ®ï¼Œç”šè‡³å¯¼è‡´åŠ å¯†å‹’ç´¢ï¼Œä¸¥é‡å±å®³æ­£å¸¸çš„ä¸šåŠ¡æœåŠ¡ã€‚ The simplified flow of this exploit is: Login to a unprotected Redis Change itâ€™s backup location to .ssh directory â€” Write the SSH Keys to new backup location Remote connect and login to the target server using SSH key We should already be familiar how automatic SSH login with private + public keys works. ç®€åŒ–å®ç°æµç¨‹å¦‚ä¸‹ï¼š ç™»å½•åˆ°ä¸€ä¸ªæ— ä¿æŠ¤çš„ Redis å°†å¤‡ä»½ä½ç½®æ›´æ”¹ä¸º .ssh ç›®å½• â€”â€” å°†SSHå¯†é’¥å†™å…¥æ–°çš„å¤‡ä»½ä½ç½® ä½¿ç”¨ SSH å¯†é’¥è¿œç¨‹è¿æ¥å¹¶ç™»å½•åˆ°ç›®æ ‡æœåŠ¡å™¨ æˆ‘ä»¬åº”è¯¥å·²ç»ç†Ÿæ‚‰äº†å¦‚ä½•ä½¿ç”¨ç§æœ‰+å…¬é’¥è‡ªåŠ¨ç™»å½• SSHã€‚ Simulationæ¨¡æ‹ŸNow letâ€™s get our feet wet and set up a target machine. Weâ€™ll need two machines, they can be real machines, virtual machines, or remote machines (VPS). As long as the attack end is able to ping the target end, we are good. ç°åœ¨è®©æˆ‘ä»¬å…ˆæŠŠåšå¥½æ¨¡æ‹Ÿå‰å‡†å¤‡ã€‚æˆ‘ä»¬éœ€è¦ä¸¤å°æœºå™¨ï¼Œå®ƒä»¬å¯ä»¥æ˜¯çœŸæ­£çš„æœºå™¨ã€è™šæ‹Ÿæœºæˆ–è¿œç¨‹æœºå™¨(VPS)ã€‚åªè¦æ”»å‡»ç«¯èƒ½å¤Ÿ ping ç›®æ ‡ç«¯å°±å¯ä»¥äº†ã€‚ Environment setup for this example: Target Machine: Redis-3.2.11 on Ubuntu Attack Machine: Platform you like with Redis (I used Kali) ç¤ºä¾‹ä¸­çš„ç¯å¢ƒå¦‚ä¸‹ï¼š ç›®æ ‡æœºå™¨ï¼šubuntu ä¸‹æœ‰ Redis-3.2.11 æ”»å‡»æœºå™¨ï¼šä½ å–œæ¬¢çš„å¹³å°ä¸ Redis(æˆ‘ç”¨çš„æ˜¯ Kali) Set Up Target Machine:è®¾å®šç›®æ ‡æœºå™¨ï¼šFirst, let us set up the target machine with Redis. Download source code by é¦–å…ˆï¼Œè®©æˆ‘ä»¬é…ç½®ç›®æ ‡æœºå™¨çš„ Reidsã€‚ä¸‹è½½æºä»£ç  1wget http://download.redis.io/releases/redis-3.2.11.tar.gz Extract and build æå–å’Œæ„å»º 12tar xzf redis-3.2.11.tar.gz cd redis-3.2.11make After make, we use our favorite editor to open redis.conf in redis-3.2.11 folder. In order to be remotely accessed, we will need to comment out line bind 127.0.0.1 and disable protected-mode as shown below. ç¼–è¯‘åï¼Œæˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨æ‰“å¼€ redis-3.2.11 æ–‡ä»¶å¤¹ çš„ redis.confã€‚ä¸ºäº†è¿œç¨‹è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦æ³¨é‡Šæ‰ bind 127.0.0.1 è¡Œï¼Œå¹¶ç¦ç”¨ protected-modeï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ Now fire up Redis with the configuration file we just edited. Note that redis-server is in redis-3.2.11/src. ç°åœ¨ç”¨æˆ‘ä»¬åˆšåˆšç¼–è¾‘çš„é…ç½®æ–‡ä»¶å¯åŠ¨Redisã€‚æ³¨æ„ redis-server åœ¨ redis-3.2.11/src ä¸­ã€‚ 1src/redis-server redis.conf So far, we have finished setting up the target server. Additionally, we should also check if we have .ssh folder. If not, we should create it for the attack later. åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ç›®æ ‡æœåŠ¡å™¨çš„è®¾ç½®ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åº”è¯¥æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦æœ‰ .sshçš„æ–‡ä»¶å¤¹ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºä»¥åçš„æ”»å‡»åˆ›å»ºå®ƒã€‚ Attack Machine:æ”»å‡»æœºå™¨ï¼šFirst, make sure we can ping the target. Then, we will generate a private key and public key for SSHing into the target machine later. Run the following command to generate SSH keys and leave passphrase empty. é¦–å…ˆï¼Œç¡®ä¿æˆ‘ä»¬èƒ½é”å®šç›®æ ‡ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ç”Ÿæˆç§é’¥å’Œå…¬é’¥ï¼Œä»¥ä¾¿ç¨åå°†å…¶æ’å…¥ç›®æ ‡æœºå™¨ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”ŸæˆSSHå¯†é’¥ï¼Œå¹¶ä¿ç•™å¯†ç ä¸ºç©ºã€‚ 1ssh-keygen -t rsa Next, enter the .ssh folder. If you are root user, enter /.ssh, otherwise ~/.ssh, then copy the private key in to temp.txt. ä¸‹ä¸€æ­¥ï¼Œè¿›å…¥ .ssh ç›®å½•ã€‚å¦‚æœä½ æ˜¯ root ç”¨æˆ·ï¼Œè¿›å…¥ /.sshï¼Œå…¶ä»–çš„è¿›å…¥ ~/.sshã€‚å¤åˆ¶ç§é’¥åˆ° temp.txtã€‚ 1(echo -e &quot;\n\n&quot;; cat id_rsa.pub; echo -e &quot;\n\n&quot;) &gt; temp.txt Some may be wondering that why do we put two blank lines before and after the public key? We will leave that as a mystery for right now if you donâ€™t know :) æœ‰äº›äººå¯èƒ½æƒ³çŸ¥é“ï¼Œä¸ºä»€ä¹ˆåœ¨å…¬é’¥ä¹‹å‰å’Œä¹‹åè¦æ”¾ä¸¤è¡Œç©ºç™½?å¦‚æœä½ ä¸çŸ¥é“ï¼Œæˆ‘ä»¬æš‚æ—¶æŠŠå®ƒä½œä¸ºä¸€ä¸ªè°œ :) Good! So far we have generated a pair a keys, we will need to find a way to smuggle the public key to the Redis server (target machine.) å¥½äº†ï¼åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ç”Ÿæˆäº†ä¸€å¯¹å¯†é’¥ï¼Œæˆ‘ä»¬å°†éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•å°†å…¬é’¥å·è¿åˆ°RedisæœåŠ¡å™¨(ç›®æ ‡æœºå™¨)ã€‚ We are going to use redis-cli, the Redis command line interface, to send commands to Redis and read the replies sent by the server directly in the terminal. æˆ‘ä»¬å°†ä½¿ç”¨ redis-cliï¼Œå³ Redis å‘½ä»¤è¡Œæ¥å£ï¼Œå‘ Redis å‘é€å‘½ä»¤ï¼Œå¹¶ç›´æ¥è¯»å–ç»ˆç«¯æœåŠ¡å™¨å‘é€çš„å“åº”ã€‚ Run the following commands in redis-3.2.11/src folder. (Or depending where we are, we can always specify the path to the files we use) åœ¨ redis-3.2.11/src æ–‡ä»¶å¤¹ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚(æˆ–è€…æ ¹æ®æˆ‘ä»¬çš„ä½ç½®ï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥æŒ‡å®šæˆ‘ä»¬ä½¿ç”¨çš„æ–‡ä»¶çš„è·¯å¾„) 1cat /.ssh/temp.txt | redis-cli -h 203.137.255.255 -x set s-key Here, letâ€™s take a look at the command. We use -h flag to specify the remote Redis server IP so that redis-cli knows where to connect and send commands. The part after -x is saying that we are setting the key in redis named s-key with the value in temp.txt. åœ¨è¿™é‡Œï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å‘½ä»¤ã€‚æˆ‘ä»¬ä½¿ç”¨ -h æ ‡å¿—æ¥æŒ‡å®šè¿œç¨‹ Redis æœåŠ¡å™¨ IPï¼Œä»¥ä¾¿ redis-cli çŸ¥é“åœ¨ä½•å¤„è¿æ¥å’Œå‘é€å‘½ä»¤ã€‚-x åé¢çš„éƒ¨åˆ†è¡¨ç¤ºï¼Œæˆ‘ä»¬æ­£åœ¨è®¾ç½® redis ä¸­çš„é”®åä¸º s-keyï¼Œå…¶å€¼ä½äº temp.txt ä¸­ã€‚ Yea, we have a key with our SSH key sneaked in! Letâ€™s connect to the Redis and play around its configuration. Use redis-cli to connect to the Redis server again. æ˜¯çš„ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯†é’¥ï¼ŒSSH å¯†é’¥å·å·æºœè¿›æ¥äº†!è®©æˆ‘ä»¬è¿æ¥åˆ°Rediså¹¶ç ”ç©¶å®ƒçš„é…ç½®ã€‚å†æ¬¡ä½¿ç”¨ redis-cli è¿æ¥åˆ° Redis æœåŠ¡å™¨ã€‚ Looking at the above screenshot, we first verify the value of the key s-key by using the command GET s-key, which is what we want â€“ the public key with two blank lines before and after. Then I tried the command â€œdirâ€ just to see what it says (kidding). What we actually want to do here is to get the value of â€œs-keyâ€ (SSH public key) stored in the .ssh folder so that we can remote SSH login to the target machine whithout having to type the password. æŸ¥çœ‹ä¸Šé¢çš„å±å¹•æˆªå›¾ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨å‘½ä»¤ GET s-key æ¥éªŒè¯é”® s-key çš„å€¼ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„â€”â€”å‰åå„æœ‰ä¸¤è¡Œç©ºç™½çš„å…¬é’¥ã€‚ç„¶åï¼Œæˆ‘å°è¯•å‘½ä»¤ â€œdirâ€ï¼Œåªæ˜¯ä¸ºäº†çœ‹çœ‹å®ƒè¯´äº†ä»€ä¹ˆ(å¼€ç©ç¬‘)ã€‚è¿™é‡Œæˆ‘ä»¬çœŸæ­£æƒ³åšçš„æ˜¯è·å–å­˜å‚¨åœ¨ .ssh æ–‡ä»¶å¤¹ä¸­çš„â€œs-keyâ€(SSHå…¬é’¥)çš„å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿œç¨‹sshç™»å½•åˆ°ç›®æ ‡æœºå™¨ï¼Œè€Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚ Thus, we will do this: å› æ­¤ï¼Œæˆ‘ä»¬å°†è¿™æ ·åš: 123456CONFIG GET dir # get your redis directory# In the output of above command &quot;/home/xxxx/redis-3.2.11/src&quot; is the directory where redis server is installed. CONFIG SET dir/home/xxxx/.ssh # set the backup location to the .ssh folder(or) CONFIG SET dir /root/.ssh CONFIG SET dbfilename authorized_keys# lastly we back our data containing our &quot;s-key&quot; key-value pair up in the .ssh foldersave The authorized_keys file in SSH specifies the SSH keys that can be used for logging into the user account for which the file is configured Source: ssh.comThe screenshot shown above already demonstrates the steps mentioned here. SSHä¸­çš„ authorized_keys æ–‡ä»¶æŒ‡å®šäº† SSH å¯†é’¥ï¼Œå¯ç”¨äºç™»å½•åˆ°æ–‡ä»¶é…ç½®æºçš„ç”¨æˆ·å¸æˆ·: ssh.comä¸Šé¢çš„æˆªå›¾å·²ç»æ¼”ç¤ºäº†è¿™é‡Œæåˆ°çš„æ­¥éª¤ã€‚ Harvest Timeç»“æœæ—¶é—´On Attack Machine, try to SSH in the Target Machine using the following command. åœ¨æ”»å‡»æœºå™¨ä¸Šï¼Œå°è¯•ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åœ¨ç›®æ ‡æœºå™¨ä¸ŠSSHã€‚ 12# command: private key username@server IPssh -i id_rsa username@203.137.255.255 YAS! As we can see, we have a successful auto-login with SSH keys! Voila, we have now completed the attack simulation. ğŸ˜ƒ å¥½ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æˆåŠŸåœ°ä½¿ç”¨ SSH å¯†é’¥è‡ªåŠ¨ç™»å½•!ç§ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å®Œæˆäº†æ”»å‡»æ¨¡æ‹Ÿã€‚ğŸ˜ƒ (Smiley face actually means that Iâ€™m finally almost done writing this up ğŸ˜‚) (ç¬‘è„¸å®é™…ä¸Šæ„å‘³ç€æˆ‘å·®ä¸å¤šå†™å®Œäº†ğŸ˜‚) At the end of this section, I would like to show what is Redisâ€™s backup file look like. åœ¨æœ¬èŠ‚çš„æœ€åï¼Œæˆ‘æƒ³å±•ç¤ºä¸€ä¸‹ä»€ä¹ˆæ˜¯ Redis çš„å¤‡ä»½æ–‡ä»¶ã€‚ Notice the unreadable characters? Add â€œ\n\nâ€ before and after the key content was just to be safe and separate it from other â€œstuffâ€ so that it can be parsed correctly. ğŸ‘Œ æ³¨æ„åˆ°è¿™äº›ä¸å¯è¯»çš„å­—ç¬¦äº†å—?åœ¨å…³é”®å†…å®¹ä¹‹å‰å’Œä¹‹åæ·»åŠ â€œ\n\nâ€åªæ˜¯ä¸ºäº†å®‰å…¨èµ·è§ï¼Œå¹¶å°†å…¶ä¸å…¶ä»–â€œå†…å®¹â€åˆ†å¼€ï¼Œä»¥ä¾¿æ­£ç¡®è§£æã€‚ Use Search Engine to find Vulnerable Redis Serversä½¿ç”¨æœç´¢å¼•æ“æŸ¥æ‰¾æ˜“å—æ”»å‡»çš„RedisæœåŠ¡å™¨Alrighty, as I mentioned, we are going to use Shodan to search servers that has Redis footprint (characteristics). å¥½çš„ï¼Œæ­£å¦‚æˆ‘æåˆ°çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Shodan æ¥æœç´¢å…·æœ‰ Redis footprint(ç‰¹å¾)çš„æœåŠ¡å™¨ã€‚ Let us do a simple search by Redisâ€™ default port. è®©æˆ‘ä»¬åšä¸€ä¸ªç®€å•çš„æœç´¢ï¼Œé€šè¿‡Redisçš„é»˜è®¤ç«¯å£ã€‚ Looks like we have 75,665 search results. Aaaaaand guess what! Right down there (not shown but we can see it if we scroll down) there are TONS of host that has NO password protection!! çœ‹èµ·æ¥æˆ‘ä»¬æœ‰ 75,665 ä¸ªæœç´¢ç»“æœã€‚çŒœçŒœçœ‹!å°±åœ¨é‚£é‡Œ(æ²¡æœ‰æ˜¾ç¤ºï¼Œä½†æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬å‘ä¸‹æ»šåŠ¨)æœ‰äº›ä¸»æœºæ²¡æœ‰å¯†ç ä¿æŠ¤!! This vulnerability was found years ago and still countless of machines are opening up themselves in such an easy way for attackers to have fun in there serverâ€¦ è¿™ä¸ªæ¼æ´æ˜¯å‡ å¹´å‰å‘ç°çš„ï¼Œä»ç„¶æœ‰æ— æ•°çš„æœºå™¨ä»¥è¿™ç§ç®€å•çš„æ–¹å¼æ‰“å¼€è‡ªå·±ï¼Œè®©æ”»å‡»è€…åœ¨é‚£é‡Œçš„æœåŠ¡å™¨ä¸­å¾—åˆ°ä¹è¶£â€¦ According to Shodan, there are around 56,000 unprotected Redis instances in 2015. æ ¹æ® Shodan çš„æ•°æ®ï¼Œ2015 å¹´å¤§çº¦æœ‰ 5,6000 ä¸ªä¸å—ä¿æŠ¤çš„Rediså®ä¾‹ã€‚ According to ZoomEye, the distribution of the instances is. æ ¹æ® ZoomEyeï¼Œå®ä¾‹çš„åˆ†å¸ƒæ˜¯ã€‚ According to ZoomEye, the top ranking countries of these instances are: China, USA, Germanyâ€¦ ZoomEyeè¡¨ç¤ºï¼Œè¿™äº›ä¾‹å­ä¸­æ’åæœ€é«˜çš„å›½å®¶æ˜¯:ä¸­å›½ã€ç¾å›½ã€å¾·å›½â€¦â€¦ Okay, back to the business. So how do we verify if a server is protected using python? It turns out to be fairly simple. å¥½äº†ï¼Œå›åˆ°æ­£é¢˜ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•éªŒè¯æ˜¯å¦ä½¿ç”¨ python ä¿æŠ¤æœåŠ¡å™¨å‘¢ï¼Ÿç»“æœç›¸å½“ç®€å•ã€‚ Use socket to connect to the target IP Perform a GET request If the server is unprotected, you GET request will succeed; otherwise it will fail ä½¿ç”¨å¥—æ¥å­—è¿æ¥åˆ°ç›®æ ‡IP æ‰§è¡ŒGETè¯·æ±‚ å¦‚æœæœåŠ¡å™¨ä¸å—ä¿æŠ¤ï¼Œæ‚¨çš„GETè¯·æ±‚å°†æˆåŠŸ;å¦åˆ™å°±ä¼šå¤±è´¥ Mitigationå‡è½» Donâ€™t bind to 0.0.0.0 If you have to, change the default port (6379) Set a password (for everything) ä¸è¦ç»‘å®š 0.0.0.0 å¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œä¿®æ”¹é»˜è®¤ç«¯å£ (6379) ä¸ºæ‰€æœ‰çš„ Reids è®¾ç½®å¯†ç  Sep 11, 2018 ï¼ˆ2018-09-11ï¼‰ author: Victor Zhu link: https://medium.com/@Victor.Z.Zhu/redis-unauthorized-access-vulnerability-simulation-victor-zhu-ac7a71b2e419]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>redis</tag>
        <tag>å®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•´æ•°åè½¬]]></title>
    <url>%2F%E7%AE%97%E6%B3%95%2Freverse-integer%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®ç»™å‡ºä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•´æ•°ä¸­æ¯ä½ä¸Šçš„æ•°å­—è¿›è¡Œåè½¬ã€‚ ç¤ºä¾‹ 1:12è¾“å…¥: 123è¾“å‡º: 321 ç¤ºä¾‹ 2:12è¾“å…¥: -123è¾“å‡º: -321 ç¤ºä¾‹ 3:12è¾“å…¥: 120è¾“å‡º: 21 æ³¨æ„: å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨å¾—ä¸‹ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œåˆ™å…¶æ•°å€¼èŒƒå›´ä¸º [$âˆ’2^{31}$, $2^{31}$ âˆ’ 1]ã€‚è¯·æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æœåè½¬åæ•´æ•°æº¢å‡ºé‚£ä¹ˆå°±è¿”å› 0ã€‚ é¢˜ç›®é“¾æ¥ æ ‡ç­¾ æ•°å­¦ ä¸ªäººè§£ç­”ç–‘é—®ç‚¹ï¼š 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°éœ€è¦æ€ä¹ˆåˆ¤æ–­ï¼Ÿ æ€è·¯ï¼šæ•´æ•°è½¬æˆå­—ç¬¦ä¸²ç±»å‹ï¼Œå¾ªç¯å­—ç¬¦ä¸²å­—æ¯è¿›è¡Œå¤„ç† 123456789101112131415161718192021222324252627282930313233343536373839404142434445# æ–¹æ³•1 ä½¿ç”¨å¼±è¯­ç‰¹å¾è½¬æ¢function reverse($x) &#123; $rev = ''; $signed = ''; $x = (string)$x; for ($i = 0; $i &lt; strlen($x); $i++) &#123; if ($x&#123;$i&#125; == '-') &#123; $signed = '-'; continue; &#125; $rev = $x&#123;$i&#125; . $rev; &#125; $return = $signed . (int)$rev; if ($return &lt; pow(-2, 31) || (pow(2, 31)-1) &lt; $return) &#123; return 0; &#125; return $return;&#125;## æ–¹æ³•2 æ ¹æ®é¢˜è§£è§£é¢˜ï¼Œæ–¹æ³•æ¯”è¾ƒå¥‡ç‰¹ï¼Œæ–­ç‚¹äº†å‡ æ¬¡æ‰ç†è§£å®é™…æ€è·¯function reverse($x) &#123;// $x = 123; $rev = 0; $max_val = pow(2, 31)-1; // 2147483647 $min_val = pow(-2, 31); // -2147483648 while ($x) &#123; $pop = $x % 10; // å–å€¼æœ€åä¸€ä½ 123 % 10 = 3, 12 % 10 = 2, 1 % 10 = 1; $x = bcdiv($x, 10); // å€¼è¿›ä½ $x = 12, $x = 1 // 3 &gt; 214748364.7 || (3 == 214748364.7 &amp;&amp; 2 &gt; 7) if ($rev &gt; bcdiv($max_val, 10) || ($rev == bcdiv($max_val, 10) &amp;&amp; $pop &gt; 7)) return 0; // 3 &lt; -214748364.8 || (3 == -214748364.8 &amp;&amp; 2 &lt; -8) if ($rev &lt; bcdiv($min_val, 10) || ($rev == bcdiv($min_val, 10) &amp;&amp; $pop &lt; -8)) return 0; // åˆ¤æ–­å½“å‰ç»„è£…æœ‰æ²¡æœ‰è¶Šè¿‡èŒƒå›´ï¼Œæ²¡æœ‰çš„è¯ï¼Œåˆ¤æ–­å½“å‰æ˜¯å¦å’Œæœ€å¤§å€¼é™¤10åçš„å€¼ä¸€æ ·ï¼Œå†æ ¹æ®å°¾å€¼åˆ¤æ–­æ˜¯å¦è¶Šè¿‡èŒƒå›´ $rev = bcmul($rev, 10) + $pop; // è¿”å›çš„å€¼ 0*10+3, 3*10+2, 32*10+1 &#125; return $rev;&#125; åšé¢˜æ€»ç»“ä¸€å¼€å§‹æ²¡æœ‰é™ä¸‹å¿ƒæ¥æ”¶é›†å’Œæ‹†åˆ†éš¾ç‚¹ï¼Œæ‰€ä»¥ä¸€ç›´æ‹–åˆ°ç°åœ¨æ‰åšï¼Œåšçš„æ—¶å€™æ„å¤–çš„ç®€å•ã€‚]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSL éå¯¹ç§°åŠ å¯†]]></title>
    <url>%2F%E5%8A%9F%E8%83%BD%2FSSL%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%2F</url>
    <content type="text"><![CDATA[è¯´æ˜SSL(Secure Sockets Layer å®‰å…¨å¥—æ¥å±‚),åŠå…¶ç»§ä»»è€…ä¼ è¾“å±‚å®‰å…¨ï¼ˆTransport Layer Securityï¼ŒTLSï¼‰æ˜¯ä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨åŠæ•°æ®å®Œæ•´æ€§çš„ä¸€ç§å®‰å…¨åè®®ã€‚è€Œå®ƒçš„ä»£è¡¨è½¯ä»¶åˆ™æ˜¯ OpenSSLã€‚php ä½¿ç”¨ openssl å‡½æ•°åˆ™å¯ä»¥å¯¹ OpenSSL è¿›è¡Œè°ƒç”¨ã€‚ åŸç†éå¯¹ç§°åŠ å¯†ä¸»è¦æ˜¯é€šè¿‡ ssl çš„å…¬é’¥ç§é’¥éƒ½å¯ä»¥åŠ å¯†è§£å¯†çš„ç‰¹æ€§æ¥åšçš„ä¸€ä¸ªæ•°æ®å®‰å…¨éªŒè¯ã€‚ä½¿ç”¨åˆ°éå¯¹ç§°åŠ å¯†æŠ€æœ¯çš„å…¬å¸æœ‰æ”¯ä»˜å®ã€å¾®åšã€‚å¤§è‡³äº¤äº’æµç¨‹å¦‚ä¸‹ï¼š å‰ç½®å‡†å¤‡ æœåŠ¡ç«¯éœ€è¦å¼€æ”¾å…¬é’¥ æ¥å…¥æ–¹éœ€è¦æä¾›å…¬é’¥ç»™æœåŠ¡ç«¯ è¯·æ±‚ä¸è¿”å› æ¥å…¥æ–¹è¯·æ±‚æœåŠ¡ç«¯ï¼Œä½¿ç”¨è‡ªå·±çš„ç§é’¥ç”ŸæˆåŠ å¯†ä¸² æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚é‡Œçš„ç”¨æˆ·ç¼–å·å–æ¥å…¥æ–¹å…¬é’¥ æ ¹æ®æ¥å…¥æ–¹å…¬é’¥å¯¹è¯·æ±‚åŠ å¯†ä¸²è¿›è¡Œæ ¡éªŒ æœåŠ¡ç«¯å¤„ç†å®Œåï¼Œä½¿ç”¨æœåŠ¡ç«¯ç§é’¥ä¸ºè¿”å›æ•°æ®æ·»åŠ åŠ å¯†ä¸² æ¥å…¥æ–¹éªŒè¯åè¿›è¡ŒæŒ‡å®šå¤„ç† ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;?php$data = [ 'account_id' =&gt; 1,];$privateKeyId = openssl_pkey_get_private(file_get_contents('id_rsa'));openssl_sign(json_encode($data), $requestSign, $privateKeyId, OPENSSL_ALGO_SHA256);$data['sign'] = base64_encode($requestSign);// ===== è¯·æ±‚æ¥å£ ====$request = $data;$sign = base64_decode($data['sign']);unset($request['sign']);$userPublicKeyId = openssl_pkey_get_public(file_get_contents('id_rsa.pub'));if (! openssl_verify(json_encode($request), $sign, $userPublicKeyId, OPENSSL_ALGO_SHA256)) &#123; while ($error = openssl_error_string()) &#123; print_r($error); &#125;&#125;$response = [ 'status' =&gt; 200, 'message' =&gt; 'hello world'];$severPrivateKeyId = openssl_pkey_get_private(file_get_contents('private_key.pem'));openssl_sign(json_encode($response), $responseSign, $severPrivateKeyId, OPENSSL_ALGO_SHA256);$response['sign'] = base64_encode($responseSign);// ===== æ¥å£å“åº” ====$ruslt = $response;$sign = base64_decode($ruslt['sign']);unset($ruslt['sign']);$severPublicKeyId = openssl_pkey_get_public(file_get_contents('public_key.pem'));if (! openssl_verify(json_encode($ruslt), $sign, $severPublicKeyId, OPENSSL_ALGO_SHA256)) &#123; while ($error = openssl_error_string()) &#123; print_r($error); &#125;&#125;// å¤„ç†ä¸šåŠ¡é€»è¾‘ FQAä¸ºä»€ä¹ˆä¸æ˜¯å…ˆä½¿ç”¨æœåŠ¡ç«¯çš„å…¬é’¥åŠ å¯†è¿›è¡Œè¯·æ±‚å…ˆå‘¢ï¼Ÿæˆ‘ä¸€å¼€å§‹æ„æ€æ—¶æ˜¯è¿™æ ·æƒ³çš„ï¼Œè¯·æ±‚ä½¿ç”¨æœåŠ¡ç«¯å…¬é’¥åŠ å¯†ï¼Œæ¥å£è¿”å›ä½¿ç”¨æ¥å…¥æ–¹çš„ç§é’¥è¿›è¡Œè§£å¯†ã€‚æ„Ÿè§‰å¹¶æ²¡æœ‰ä»€ä¹ˆæ¯›ç—…ï¼Œä½†æ˜¯ç»†ç»†ä¸€æƒ³ï¼Œè¿™é‡Œæ¶‰åŠåˆ°è¯ä¹¦å®‰å…¨é—®é¢˜å’Œè¯·æ±‚éªŒè¯é—®é¢˜ã€‚ è¯·æ±‚æ—¶ä½¿ç”¨çš„æ˜¯æœåŠ¡ç«¯å…¬é’¥ï¼Œå‡­åŠ å¯†ä¸²ä¸Šé¢çš„ç”¨æˆ·å·æ˜¯æ— æ³•ä¿è¯è¯·æ±‚ç”¨æˆ·çœŸå®æ€§ å“åº”æ—¶å¦‚æœæ¥å…¥æ–¹ç§é’¥æ³„æ¼ï¼Œå°±å¯ä»¥è¢«äººç›´æ¥æ¨¡æ‹Ÿæ”¯ä»˜å›è°ƒäº†]]></content>
      <categories>
        <category>åŠŸèƒ½</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•ç¡®è®¤åŠŸèƒ½çš„å¼€å‘æ—¶é—´]]></title>
    <url>%2F%E6%80%9D%E8%80%83%2F%E5%A6%82%E4%BD%95%E7%A1%AE%E8%AE%A4%E5%8A%9F%E8%83%BD%E7%9A%84%E5%BC%80%E5%8F%91%E6%97%B6%E9%97%B4%2F</url>
    <content type="text"><![CDATA[æœ‰å¾ˆå¤šäººéƒ½å¯¹è‡ªå·±å¼€å‘ä¸€ä¸ªåŠŸèƒ½éœ€è¦èŠ±è´¹çš„æ—¶é—´ä»€ä¹ˆä¸äº†è§£ã€‚æŠ¥åŠŸèƒ½å¼€å‘æ—¶é—´çš„æ—¶å€™æ€»æ˜¯é æ„Ÿè§‰æ¥ã€‚æ—¶é—´æŠ¥é•¿äº†è¿˜å¥½è§£å†³ï¼Œä½†æ˜¯æŠ¥çš„æ—¶é—´çŸ­äº†ï¼Œè‡ªå·±å°±å¾—åŠ ç­æ‰å¯ä»¥å®Œæˆä»»åŠ¡ï¼ŒæŠ‘æˆ–è€…å®Œä¸æˆã€‚ æ€è€ƒé‚£äº›å› ç´ å½±å“äº†å¼€å‘æ—¶é—´é€šå¸¸å½±å“å› ç´ æ˜¯åŠŸèƒ½é€»è¾‘ä¸äº†è§£æˆ–å¤ªå¤æ‚ã€åŠŸèƒ½éœ€æ±‚é¢‘ç¹å˜æ›´ä»¥åŠè‡ªèº«æŠ€æœ¯ä¸ç†Ÿç»ƒå¯¼è‡´çš„ã€‚ 1ã€åŠŸèƒ½éœ€æ±‚é¢‘ç¹å˜æ›´å¹¶ä¸æ˜¯è‡ªå·±çš„é—®é¢˜ï¼Œå¯ä»¥è¦æ±‚å¢åŠ å¼€å‘æ—¶é—´ï¼Œä»¥é˜²æ­¢è‡ªå·±æ¯æ¬¡éƒ½ä¸ºå˜æ›´ä¹°å•ã€‚2ã€é€»è¾‘ä¸äº†è§£æˆ–å¤ªå¤æ‚éœ€è¦èŠ±æ—¶é—´å»ç†æ¸…ï¼Œä¸è¦æ€¥ç€å»å¼€å‘ï¼Œè¦ä¸ç„¶å¾ˆå®¹æ˜“å‡ºç°åšç€åšç€å°±å»é—®ç»†èŠ‚çš„æƒ…å†µæˆ–åšå®Œè¢«è¯´å’Œæƒ³è¦çš„å®Œå…¨ä¸ä¸€æ ·ã€‚3ã€æœ€åæŠ€æœ¯çš„é—®é¢˜å°±æ˜¯è‡ªå·±çš„é”…äº†ï¼ŒåŠ ç­ä¹Ÿæ— è¯å¯è¯´ï¼ˆå°±å½“ä¸ºè‡ªå·±å­¦ä¹ ä¹°å•ï¼Œè¿˜æ˜¯å¾ˆæœ‰å¥½å¤„çš„ï¼‰ã€‚ é—®åŠŸèƒ½éœ€è¦èŠ±å¤šå°‘æ—¶é—´æ—¶ï¼Œåº”è¯¥æ€ä¹ˆå›ç­”æ¨èä¸è¦é©¬ä¸Šéšæ„Ÿè§‰æ¥å®šæ—¶é—´ï¼Œå¯ä»¥è¯´ï¼šâ€œåœ¨ä¸­åˆä¼‘æ¯å‰ç»™ä½ ç­”å¤å¯ä»¥å—ï¼Ÿâ€ è¿™æ ·å¯ä»¥é¢„ç•™æ›´å¤šçš„æ—¶é—´ç»™éœ€æ±‚è¿›è¡Œè¯„ä¼°ã€‚å¦‚æœåˆ«æ‹’ç»äº†ï¼Œå¯ä»¥é—®ä¸‹åˆ«äººçš„åº•çº¿ï¼šâ€œè¿™ä¸ªåŠŸèƒ½æœ€è¿Ÿä»€ä¹ˆæ—¶å€™è¦ï¼Ÿâ€ã€‚æ³¨æ„å–”ï¼Œè¿™æ ·é—®ä»–å¾ˆå¯ä»¥æ˜¯å¾ˆå‰ç«¯å’Œæµ‹è¯•çš„æ—¶é—´éƒ½ç®—ä¸Šå»çš„ï¼Œå¹¶ä¸æ˜¯å•å•åå°å¼€å‘çš„æ—¶é—´ã€‚å¦‚æœè¿è¿™ä¸ªè¦æ±‚éƒ½æ‹’ç»äº†ï¼Œé‚£çœŸçš„éœ€è¦è€ƒè™‘æ¢å…¬å¸äº†ã€‚å› ä¸ºè¿åŠŸèƒ½ä»€ä¹ˆæ—¶å€™éœ€è¦å®Œæˆéƒ½ä¸æ¸…æ¥šã€‚ ä¼°é”™äº†ä»»åŠ¡æ—¶é—´è¯¥æ€ä¹ˆåŠå¾ˆå¤šæ—¶å€™å°±ç®—å¾ˆè®¤çœŸçš„å»é¢„ä¼°å¼€å‘æ—¶é—´ï¼Œä¹Ÿä¼šæœ‰ä¼°æ—¶è¿‡é•¿ï¼Œä¼°æ—¶è¿‡çŸ­çš„é—®é¢˜ã€‚ä¼°æ—¶è¿‡é•¿çš„è¿˜å¥½ï¼Œå¯ä»¥é—®ä¸Šçº§è¦æ–°éœ€è¦æ¥å¼€å‘ï¼Œæˆ–æ˜¯å­¦ä¹ éƒ½éšä½ ã€‚ä¼°æ—¶è¿‡çŸ­å¹¶ä¸æ˜¯è‡ªå·±é—·å¤´åŠ ç­å»è§£å†³ï¼Œè¿™æ˜¯æœ€åçš„åšæ³•ã€‚åº”è¯¥æå‰å‘ä¸Šçº§æ±‡æŠ¥ï¼Œè¯´æ˜é”™ä¼°åŸå› ï¼Œå°½å¯èƒ½çš„æ‹¿åˆ°æ›´å¤šçš„å¼€å‘æ—¶é—´ã€‚å¦‚æœä½ ä¸å‘ä¸Šçº§æ±‡æŠ¥å¯¼è‡´é¡¹ç›®è¢«å»¶æœŸï¼Œæ‰€æœ‰åæœå°†ç”±è‡ªå·±æ‰¿æ‹…ã€‚ ç»“è®ºæˆ‘ä»¬éœ€è¦æ›´åŠ çš„äº†è§£è‡ªå·±çš„èƒ½åŠ›ï¼Œé‚£äº›åœ°æ–¹èŠ±çš„æ—¶é—´è¿‡å¤šäº†ï¼Œé‚£äº›åœ°æ–¹å¯ä»¥åšçš„æ›´å¥½ã€‚è¿™äº›éƒ½æ˜¯å¯èƒ½é€šè¿‡ä¸€æ¬¡æ¬¡ç»Ÿè®¡å»äº†è§£çš„ã€‚]]></content>
      <categories>
        <category>æ€è€ƒ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Explain SSL Pinning with simple codes(ç”¨ç®€å•ä»£ç è§£é‡Š SSL å›ºå®š)]]></title>
    <url>%2F%E7%BF%BB%E8%AF%91%2Fexplain-ssl-pinning-with-simple-codes%2F</url>
    <content type="text"><![CDATA[HTTPS and SSL PinningHTTPS å’Œ SSL å›ºå®šThere are two major factors in an HTTPS connection, a valid certificate that server presents during handshaking, and a cipher suite to be used for data encryption during transmission. The certificate is the essential component and serves as a proof of identity of the server. The client will only trust the server if the server can provide a valid certificate that is signed by one of the trusted Certificate Authorities that come pre-installed in the client, otherwise, the connection will be aborted. HTTPS è¿æ¥æœ‰ä¸¤ä¸ªä¸»è¦å› ç´ ï¼Œæ¡æ‰‹æ—¶æœåŠ¡å™¨æä¾›ä¸€ä¸ªæœ‰æ•ˆè¯ä¹¦ï¼Œä»¥åŠåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ç”¨äºæ•°æ®åŠ å¯†çš„å¯†ç å¥—ä»¶ã€‚è¯ä¹¦æ˜¯åŸºæœ¬ç»„ä»¶ï¼Œç”¨ä½œæœåŠ¡å™¨èº«ä»½çš„è¯æ˜ã€‚åªæœ‰å½“æœåŠ¡å™¨èƒ½å¤Ÿæä¾›ç”±é¢„è£…åœ¨å®¢æˆ·æœºä¸­çš„å—ä¿¡ä»»è¯ä¹¦é¢å‘æœºæ„ä¹‹ä¸€ç­¾åçš„æœ‰æ•ˆè¯ä¹¦æ—¶ï¼Œå®¢æˆ·æœºæ‰ä¼šä¿¡ä»»æœåŠ¡å™¨ï¼Œå¦åˆ™è¿æ¥å°†è¢«ä¸­æ­¢ã€‚ An attacker can abuse this mechanism by either install a malicious root CA certificate to user devices so the client will trust all certificates that are signed by the attacker, or even worse, compromised a CA completely. Therefore relying on the certificates received from servers alone cannot guarantee the authenticity of the server, and it is vulnerable to potential man-in-the-middle attack. æ”»å‡»è€…å¯ä»¥æ»¥ç”¨æ­¤æœºåˆ¶ï¼Œæ–¹æ³•æ˜¯å‘ç”¨æˆ·è®¾å¤‡å®‰è£…æ¶æ„æ ¹CAè¯ä¹¦ï¼Œä»¥ä¾¿å®¢æˆ·æœºä¿¡ä»»ç”±æ”»å‡»è€…ç­¾åçš„æ‰€æœ‰è¯ä¹¦ï¼Œæˆ–è€…æ›´ç³Ÿï¼Œå®Œå…¨ç ´åCAã€‚å› æ­¤ï¼Œä»…ä¾é ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯ä¹¦æ— æ³•ä¿è¯æœåŠ¡å™¨çš„çœŸå®æ€§ï¼Œå®¹æ˜“å—åˆ°æ½œåœ¨çš„ä¸­é—´äººæ”»å‡»ã€‚ SSL Pinning is a technique that we use in client side to avoid man-in-the-middle attack by validating the server certificates again even after SSL handshaking. The developers embed (or pin) a list of trustful certificates to the client application during development, and use them to compare against with the server certificates during runtime. If there is a mismatch between the server and the local copy of certificates, the connection will simply be disrupted, and no further user data will be even sent to that server. This enforcement ensures that the user devices are communicating only to the dedicated trustful servers. SSL å›ºå®šæ˜¯æˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼Œé€šè¿‡åœ¨ SSL æ¡æ‰‹ä¹‹åå†æ¬¡éªŒè¯æœåŠ¡å™¨è¯ä¹¦æ¥é¿å…ä¸­é—´äººæ”»å‡»ã€‚å¼€å‘äººå‘˜åœ¨å¼€å‘æœŸé—´å‘å®¢æˆ·æœºåº”ç”¨ç¨‹åºåµŒå…¥(æˆ–pin)ä¸€ç»„å¯ä¿¡è¯ä¹¦ï¼Œå¹¶åœ¨è¿è¡Œæ—¶ä½¿ç”¨å®ƒä»¬ä¸æœåŠ¡å™¨è¯ä¹¦è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœæœåŠ¡å™¨å’Œè¯ä¹¦çš„æœ¬åœ°å‰¯æœ¬ä¸åŒ¹é…ï¼Œåˆ™è¿æ¥å°†è¢«ä¸­æ–­ï¼Œç”šè‡³ä¸å†å‘è¯¥æœåŠ¡å™¨å‘é€ç”¨æˆ·æ•°æ®ã€‚è¿™ç§å¼ºåˆ¶ç¡®ä¿ç”¨æˆ·è®¾å¤‡åªä¸ä¸“ç”¨çš„å¯ä¿¡æœåŠ¡å™¨é€šä¿¡ã€‚ However, developers must take extra caution in SSL Pinning, When a pinned certificate is expired and the server has updated a new certificate, since the new certificate is definitely different from the pinned one that the client currently has, the clients will not trust the updated certificate and therefore terminate the connection, in which no further communications can be established between clients and servers, so the application is basically â€˜brickedâ€™. Therefore, to avoid such situation, it is always advisable to pin the future certificates in the client applications before release. ç„¶è€Œ,å¼€å‘äººå‘˜å¿…é¡»é‡‡å–é¢å¤–çš„è°¨æ…åœ¨SSLå›ºå®š,å½“å›ºå®šè¯ä¹¦è¿‡æœŸå’ŒæœåŠ¡å™¨å·²ç»æ›´æ–°ä¸€ä¸ªæ–°çš„è¯ä¹¦,è‡ªä»æ–°è¯ä¹¦è‚¯å®šæ˜¯ä¸åŒçš„å›ºå®šå®¢æˆ·ç›®å‰,å®¢æˆ·ä¸ä¼šä¿¡ä»»æ›´æ–°åçš„è¯ä¹¦,å› æ­¤ç»ˆæ­¢è¿æ¥,æ²¡æœ‰è¿›ä¸€æ­¥çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å¯ä»¥å»ºç«‹,æ‰€ä»¥åº”ç”¨ç¨‹åºåŸºæœ¬ä¸Šæ˜¯â€œç»™â€ã€‚å› æ­¤ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œé€šå¸¸å»ºè®®åœ¨å‘å¸ƒä¹‹å‰å°†æœªæ¥çš„è¯ä¹¦å›ºå®šåœ¨å®¢æˆ·æœºåº”ç”¨ç¨‹åºä¸­ã€‚ There are usually two ways we can achieve SSL Pinning in client applications. Pin either the whole certificate or its hashed public key. The hashed public key pinning is the preferred approach because the same private key can be used in signing the updated certificate, therefore we can save the trouble of pinning a new hashed public key for a new certificate, and reduce the risk of app â€˜brickingâ€™. é€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åœ¨å®¢æˆ·æœºåº”ç”¨ç¨‹åºä¸­å®ç°SSLå›ºå®šã€‚å¯¹æ•´ä¸ªè¯ä¹¦æˆ–å…¶æ•£åˆ—å…¬é’¥è¿›è¡ŒPinã€‚æ•£åˆ—å…¬é’¥å›ºå®šæ˜¯é¦–é€‰æ–¹æ³•ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç§é’¥å¯¹æ›´æ–°åçš„è¯ä¹¦è¿›è¡Œç­¾åï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥çœå»ä¸ºæ–°è¯ä¹¦å›ºå®šæ–°æ•£åˆ—å…¬é’¥çš„éº»çƒ¦ï¼Œå¹¶é™ä½åº”ç”¨ç¨‹åºâ€œå˜é»‘â€çš„é£é™©ã€‚ Codes In Actionä»£ç åœ¨è¡ŒåŠ¨I am going to write a simple Android application that communicates with &lt;www.google.com&gt;, and use Charles proxy as a man-in-the-middle server, and finally demonstrate how an effective SSL Pining can stop man-in-the-middle attack. æˆ‘å°†ç¼–å†™ä¸€ä¸ªä¸ &lt;www.google.com&gt; é€šä¿¡çš„ç®€å• Android åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨Charles proxyä½œä¸ºä¸­é—´äººæœåŠ¡å™¨ï¼Œæœ€åæ¼”ç¤ºä¸€ä¸ªæœ‰æ•ˆçš„ SSL Pining å¦‚ä½•é˜»æ­¢ä¸­é—´äººæ”»å‡»ã€‚ Please note that the following codes are for educational purpose and they are not meant for use in production. Please consider using a mature solution from reputable libraries such as okhttp for your application. è¯·æ³¨æ„ä»¥ä¸‹ä»£ç æ˜¯ç”¨äºæ•™è‚²ç›®çš„ï¼Œå¹¶ä¸ç”¨äºç”Ÿäº§ã€‚è¯·è€ƒè™‘ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºä½¿ç”¨æ¥è‡ªå£°èª‰è‰¯å¥½çš„åº“çš„æˆç†Ÿè§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ okhttpã€‚ 123456789101112131415161718192021222324252627// Read the pinned certificate from local (i.e., assets folder)// è¯»å–æœ¬åœ°å›ºå®šè¯ä¹¦val inputStream = context.assets.open("google.crt")val pinnedCertificate = CertificateFactory.getInstance("X.509") .generateCertificate(inputStream)// Create a request to www.google.com// åˆ›å»ºä¸€ä¸ª www.google.com çš„è¯·æ±‚val url = URL("https://www.google.com")val httpsUrlConnection = url.openConnection() as HttpsURLConnection// Establish the connection// å»ºç«‹è¿æ¥httpsUrlConnection.connect()// Check the certificates and see if one of the server certificates// matches the pinned certificate// æ£€æŸ¥è¯ä¹¦ï¼Œçœ‹çœ‹å…¶ä¸­ä¸€ä¸ªæœåŠ¡å™¨è¯ä¹¦æ˜¯å¦ä¸å›ºå®šè¯ä¹¦åŒ¹é…if (httpsUrlConnection.serverCertificates.contains(pinnedCertificate)) &#123; // Open stream // æ‰“å¼€æµ httpsUrlConnection.inputStream Log.d("Pinning", "Server certificates validation successful")&#125; else &#123; Log.d("Pinning", "Server certificates validation failed") throw SSLException("Server certificates validation failed for google.com")&#125; The above codes are self-explanatory. The server certificates from HttpsUrlConnection are to be checked against with the local pinned certificate, the connection input stream will be open if there is a certificate match, and an SSLException will be thrown otherwise. ä»¥ä¸Šä»£ç æ˜¯ä¸è¨€è‡ªæ˜çš„ã€‚å°†ä½¿ç”¨æœ¬åœ°å›ºå®šè¯ä¹¦æ£€æŸ¥æ¥è‡ª â€œHttpsUrlConnectionâ€ çš„æœåŠ¡å™¨è¯ä¹¦ï¼Œå¦‚æœè¯ä¹¦åŒ¹é…ï¼Œè¿æ¥è¾“å…¥æµå°†æ‰“å¼€ï¼Œå¦åˆ™å°†æŠ›å‡º â€œSSLExceptionâ€ã€‚ I use openssl command to download the &lt;www.google.com&gt; certificate and save it as a pinned certificate in the assets folder. Just run this code and you will see message Server certificates validation successful in the logcat. æˆ‘ä½¿ç”¨opensslå‘½ä»¤ä¸‹è½½è¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºå›ºå®šåœ¨assetsæ–‡ä»¶å¤¹ä¸­çš„è¯ä¹¦ã€‚åªè¦è¿è¡Œè¿™æ®µä»£ç ï¼Œæ‚¨å°†åœ¨logcatä¸­çœ‹åˆ°æ¶ˆæ¯â€œæœåŠ¡å™¨è¯ä¹¦éªŒè¯æˆåŠŸâ€ã€‚ Now fire up Charles, and install Charles root certificate to the test device and configure test device proxy setting to the IP address of Charles service. With Charles root certificate being installed as trusted CA, Charles now acts as a man-in-the-middle, and all the certificate signed by Charles will be trusted by the client system by default. However, since we have pinned the legit &lt;www.google.com&gt; certificate in our demo application, the server certificate validation will fail in this case. ç°åœ¨å¯åŠ¨ Charlesï¼Œå°† Charles æ ¹è¯ä¹¦å®‰è£…åˆ°æµ‹è¯•è®¾å¤‡ï¼Œå¹¶å°†æµ‹è¯•è®¾å¤‡ä»£ç†è®¾ç½®é…ç½®ä¸º Charles æœåŠ¡çš„ IP åœ°å€ã€‚å°† Charles æ ¹è¯ä¹¦å®‰è£…ä¸º trusted CA åï¼ŒCharles ç°åœ¨å……å½“ä¸­é—´äººçš„è§’è‰²ï¼Œåœ¨ç¼ºçœæƒ…å†µä¸‹ï¼Œå®¢æˆ·æœºç³»ç»Ÿå°†ä¿¡ä»» Charles ç­¾åçš„æ‰€æœ‰è¯ä¹¦ã€‚ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬åœ¨æ¼”ç¤ºåº”ç”¨ç¨‹åºä¸­å›ºå®šäº† legit è¯ä¹¦ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹æœåŠ¡å™¨è¯ä¹¦éªŒè¯å°†å¤±è´¥ã€‚ Run the test application with Charles proxy enabled, as expected, you will see SSLException with message Server certificates validation failed for google.com in the logcat. è¿è¡Œå¯ç”¨äº† Charles proxy çš„æµ‹è¯•åº”ç”¨ç¨‹åºï¼Œå¦‚é¢„æœŸçš„é‚£æ ·ï¼Œæ‚¨å°†åœ¨ logcat ä¸­çœ‹åˆ° â€œSSLExceptionâ€ å’Œæ¶ˆæ¯ â€œServer certificates validation failed for google.comâ€ã€‚ Further readingæ‰©å±•é˜…è¯»The purpose of this post is just to provide an entry-level introduction to SSL Pinning technique, you can read the original proposal from Paypal engineering team, and learn more about the bug that results in ineffective SSL Pinning in Java/Android. æœ¬æ–‡çš„ç›®çš„åªæ˜¯æä¾›SSLå›ºå®šæŠ€æœ¯çš„å…¥é—¨ä»‹ç»ï¼Œæ‚¨å¯ä»¥é˜…è¯» Paypal å·¥ç¨‹å›¢é˜Ÿçš„original proposal äº†è§£æ›´å¤šå…³äºå¯¼è‡´ Java/Android ä¸­SSLå›ºå®šæ— æ•ˆçš„ bugã€‚ Oct 23, 2018 ï¼ˆ2018-10-23ï¼‰ author: Zhang QiChuan link: https://medium.com/@zhangqichuan/explain-ssl-pinning-with-simple-codes-eaee95b70507]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸¤æ•°ä¹‹å’Œ]]></title>
    <url>%2F%E7%AE%97%E6%B3%95%2Ftwo-sum%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œä½ ä¸èƒ½é‡å¤åˆ©ç”¨è¿™ä¸ªæ•°ç»„ä¸­åŒæ ·çš„å…ƒç´ ã€‚ ç¤ºä¾‹: ç»™å®š nums = [2, 7, 11, 15], target = 9 å› ä¸º nums[0] + nums[1] = 2 + 7 = 9æ‰€ä»¥è¿”å› [0, 1] é¢˜ç›®é“¾æ¥ æ ‡ç­¾ æ•°ç»„ å“ˆå¸Œè¡¨ ä¸ªäººè§£ç­”12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061# æ–¹æ³•1function twoSum($nums, $target) &#123; $count = count($nums); for ($i=0; $i &lt; $count; $i++) &#123; for ($j=($i+1); $j &lt; $count; $j++) &#123; // $j ä¹‹æ˜¯ $i+1 æ˜¯å› ä¸ºä¸èƒ½é‡å¤åˆ©ç”¨æ•°ç»„ä¸­åŒæ ·çš„å…ƒç´ ã€‚ if (($nums[$i]+$nums[$j]) == $target) &#123; return [$i, $j]; &#125; &#125; &#125; return [];&#125;# æ–¹æ³•2ï¼šå»ºç«‹å€¼é”®å¯¹åº”function twoSum($nums, $target) &#123; $count = count($nums); $values = []; for ($i=0; $i &lt; $count; $i++) &#123; $values[$nums[$i]] = $i; &#125; for ($i=0; $i &lt; $count; $i++) &#123; $value = $target - $nums[$i]; if (isset($values[$value])) &#123; return [$i, $values[$value]]; &#125; &#125; return [];&#125;# æ–¹æ³•3: é€šè¿‡å€¼æ‰¾é”®function twoSum($nums, $target) &#123; for ($i=0; $i &lt; count($nums); $i++) &#123; $searchValue = $target - $nums[$i]; // array_search æ˜¯è¯­è¨€è‡ªå¸¦çš„å‡½æ•°ï¼Œåº”è¯¥å’Œæ–¹æ³•2å·®ä¸å¤šã€‚ if ($key = array_search($searchValue, $nums)) &#123; return [$i, $key]; &#125; unset($nums[$i]); &#125; return [];&#125;# æ–¹æ³•4ï¼šåŒ¹é…ä¸åˆ°çš„å€¼å­˜æ”¾åˆ°æ•°ç»„ä¸­ï¼Œæ–¹ä¾¿åé¢æŸ¥æ‰¾function twoSum($nums, $target) &#123; $values = []; for ($i=0; $i &lt; count($nums); $i++) &#123; $value = $target - $nums[$i]; if (isset($values[$value])) &#123; return [$i, $values[$value]]; &#125; $values[$nums[$i]] = $i; &#125; return [];&#125; åšé¢˜æ€»ç»“è™½ç„¶ä¸¤æ•°ç›¸åŠ å¾—åˆ°ç»“æœå¾ˆç®€å•ï¼Œä½†æ˜¯æ²¡æœ‰å®ç°æ€è·¯é€ƒé¿äº†è®¸ä¹…ã€‚åé¢çœ‹äº†è§£ç­”çš„æ–‡å­—ï¼Œä¸çœ‹ä»£ç ã€‚æ‰ä»¥æœ€ç®€å•çš„æ–¹å¼åšå‡ºæ¥ã€‚ æœªæŒæ¡çŸ¥é“ç‚¹ ç©ºé—´/æ—¶é—´å¤æ‚åº¦è®¡ç®— åŒå¾ªç¯æŒæ¡ä¸å¥½]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµè§ˆé‡ç»Ÿè®¡]]></title>
    <url>%2F%E5%8A%9F%E8%83%BD%2Freview%2F</url>
    <content type="text"><![CDATA[éœ€æ±‚ç»Ÿè®¡å•†å“å’Œå“ç‰Œçš„æµè§ˆé‡ã€‚å“ç‰Œå’Œå•†å“çš„å…³ç³»æ˜¯ä¸€å¯¹å¤šã€‚ å®ç°æ–¹å¼ç›´æ¥æ”¹åº“æœ€å·®çš„è§£å†³æ–¹æ¡ˆï¼Œä¼šå½±å“æ•´ä¸ªæ•°æ®è¡¨çš„æ€§èƒ½ã€‚ ä½¿ç”¨ redis è¿›è¡Œè®°å½•æ–¹æ³•1ï¼š æ¯è®¿é—®ä¸€æ¬¡ï¼Œæ·»åŠ ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆåªéœ€å­˜åœ¨è®¿é—®å¯¹å‘çš„ ID å³å¯ï¼‰ã€‚é€šè¿‡å®šæ—¶ä»»åŠ¡æ¯ 5 åˆ†é’Ÿå¤„ç†ä¸€æ¬¡é˜Ÿåˆ—ï¼Œå¤„ç†å®Œä¼šåˆ é™¤é˜Ÿåˆ—ã€‚é€šè¿‡é˜Ÿåˆ—å†…å®¹å–æŒ‡å®šçš„å…³è”æ˜ å°„åˆ° redis hash ä¸­ã€‚ä¸ºäº†ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œè¿˜æœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡å¯¹æ•°æ®åº“ç»Ÿè®¡å­—æ®µè¿›è¡Œæ›´æ–°ã€‚é˜Ÿåˆ—æ ¼å¼å’Œ hash æ ¼å¼å¦‚ä¸‹ï¼š 123456&apos;goods&apos; =&gt; [ &apos;1&apos; =&gt; 1, // å•†å“ID =&gt; è®¿é—®æ•°é‡]&apos;brand&apos; =&gt; [ &apos;1&apos; =&gt;1, // å“ç‰ŒID =&gt; è®¿é—®æ•°é‡] æ–¹æ³•2ï¼š æ¯æ¬¡è®¿é—®éƒ½è¿›è¡Œç›´æ¥è¿½åŠ ã€‚è€Œè¯»å–æ—¶ç›´æ¥è¯»å– reids é‡Œçš„å€¼ï¼Œè¿™æ ·å®æ—¶æ€§æ¯”è¾ƒé«˜ã€‚è¿˜éœ€è¦ä¸€ä¸ªå®šæ—¶å¯¹ç»Ÿè®¡æ•°é‡è¿›è¡Œæ›´æ–°ï¼ˆæ¯å¤©åªéœ€æ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚]]></content>
      <categories>
        <category>åŠŸèƒ½</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[git æäº¤æ—¥å¿—å›é¡¾æ€»ç»“]]></title>
    <url>%2F%E5%B7%A5%E5%85%B7%2Fgit-think%2F</url>
    <content type="text"><![CDATA[è¯´æ˜å¹´å‰æˆ‘éœ€è¦ç¼–å†™å…¬å¸å½“å¹´çš„å·¥ä½œæ€»ç»“ï¼Œæ‰€ä»¥æŠŠé¡¹ç›®é‡Œçš„æäº¤æ—¥å¿—æ‹‰å‡ºæ¥æŸ¥çœ‹ï¼Œå…¶ä¸­æœ‰å‡ ç±»æäº¤æ˜¯æ— æ•ˆçš„ä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ•´ç†èµ·æ¥ååˆ†è›‹ç–¼ï¼Œæ‰€ä»¥è®°å½•ä¸‹æ¥ã€‚ ç¤ºä¾‹åªæœ‰æ“ä½œç±»å‹ fix add ä¸Šé¢è¿™ä¸¤ä¸ªå¯ä»¥çŸ¥é“æ˜¯ä¿®å¤åŠŸèƒ½å’Œæ·»åŠ åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦çœ‹ä»£ç æ‰èƒ½çŸ¥é“ä¿®å¤çš„æ˜¯ä»€ä¹ˆï¼Œæ·»åŠ çš„æ˜¯ä»€ä¹ˆã€‚ æäº¤è¯´æ˜ä½¿ç”¨å¤–æ–‡è¿›è¡Œè¯´æ˜ fix refund è‹±æ–‡ä¸å¥½çš„äººå¯èƒ½çœ‹åˆ°è‹±æ–‡å¾—éœ€è¦æƒ³å‡ ç§’ï¼Œç”šè‡³éœ€è¦ç¿»è¯‘ã€‚ æ— è¯¦ç»†è¯´æ˜ ä¸¥é‡BUGä¿®å¤ é€€è´§é€€æ¬¾æ—¶é—´è®°å½• è™½ç„¶çŸ¥é“æ˜¯ä¿®å¤ä¸¥é‡ BUGï¼Œä½†æ˜¯ BUG æ˜¯ä»€ä¹ˆåŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆæ˜¯ä¸¥é‡ BUG å¹¶ä¸çŸ¥é“ã€‚è€Œç¬¬äºŒç§è™½ç„¶æ²¡å¤šå¤§æ¯›ç—…ï¼Œä½†æ”¹æˆ â€œè¡¥å……é—æ¼é€€è´§é€€æ¬¾å®Œæˆæ—¶é—´â€ ä¼šæ›´å¥½äº›ã€‚ å¤šä¸ªåŠŸèƒ½æ··åœ¨ä¸€èµ·æäº¤ ä¿®æ”¹xxx æ·»åŠ xxx å»é™¤xxx ä¸å»ºè®®è¿™æ ·å­æäº¤ï¼Œä½†æ˜¯åé¢å›é¡¾ä»£ç çš„æ—¶å€™åŒºåˆ†ä¸å‡ºæ¯ä¸ªé¡¹å¯¹åº”çš„å†…å®¹ã€‚ä¸è¦æ€•æäº¤æ¡æ•°å¤šï¼Œå¦‚æœéœ€è¦å®¡é˜…ä»£ç å°±çŸ¥é“åˆ†å¼€æäº¤çš„å¥½å¤„äº†ã€‚ æ— æ„ä¹‰çš„è¯´æ˜ ä¿®å¤ xxx æ–‡ä»¶ æäº¤è®°å½•é‡Œä¼šè®°å½•å½“æ¬¡æäº¤çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ²¡æœ‰è¯´æ˜çš„æ„ä¹‰ã€‚ ä½¿ç”¨ GitHub issues çš„æ–¹å¼æäº¤ fix issues #894 è¿™ç§æäº¤æ˜¯æ¨¡ä»¿ GitHub ä¸Šçš„æäº¤æ–¹å¼ï¼Œå®ƒä¼šè‡ªåŠ¨å…³è”ä¸ŠæŒ‡å®šçš„ issuesï¼Œå¯¹ç›´æ¥åœ¨ GitHub ä¸Šå®¡é˜…ä»£ç æ—¶å¾ˆå¥½ç”¨ã€‚ä½†æ˜¯å¯¹äºå®Œå…¨ç‹¬ç«‹çš„ä»£ç ä»“åº“æ¥è¯´ï¼Œä¼šä¸çŸ¥é“å…·ä½“çš„é—®é¢˜æ˜¯ä»€ä¹ˆã€‚å¯ä»¥ä¿ç•™è¿™ä¸ªæ–¹å¼å†™åœ¨è¯´æ˜ç¬¬äºŒè¡Œå³å¯ã€‚gogs ä¹Ÿæœ‰ç±»ä¼¼çš„åŠŸèƒ½ã€‚ä½†å¯¹äºç¦…é“ï¼Œè¿™ç§æ²¡æœ‰å…³è”çš„æ¥è¯´ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦è®°å½•ä¸Šå»ã€‚ æ€»ç»“ å¯¹æäº¤è¿›è¡Œåˆ†ç±» ç»Ÿä¸€æäº¤æ ¼å¼ è¿‡æ®µæ—¶é—´å›æ¥æŸ¥çœ‹æäº¤è®°å½•è¿˜èƒ½çœ‹æ˜ç™½æäº¤è¯´æ˜ï¼Œé‚£å°±ä»£è¡¨è¯´æ˜è¡¨è¿°ä¸Šæ²¡æœ‰é—®é¢˜ 1234567891011121314feat: xxx åŠŸèƒ½è¯¦ç»†è¯´æ˜ï¼šfix: xxx åŠŸèƒ½çš„ xxx é—®é¢˜è¯¦ç»†è¯´æ˜ï¼šå…³è”issuesï¼š#123del: xxx åŠŸèƒ½[çš„å¼ƒç”¨ xxx æ–¹æ³•]è¯¦ç»†è¯´æ˜ï¼šadjust: xxx åŠŸèƒ½[çš„ xxx]è¯¦ç»†è¯´æ˜ï¼š[] å¯é€‰çš„å†…å®¹]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ—¥å¿—æ·±å…¥ç†è§£]]></title>
    <url>%2F%E6%A6%82%E5%BF%B5%2Flog%2F</url>
    <content type="text"><![CDATA[è¯´æ˜å¾ˆå¤šè½¯ä»¶ï¼Œç³»ç»Ÿéƒ½ä¼šæœ‰ç€è‡ªå·±çš„æ—¥å¿—ï¼Œè®°å½•æ—¥å¿—çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ã€‚ æ—¥å¿—å¯ä»¥è®°å½•è°è°è°åœ¨ä»€ä¹ˆæ—¶å€™åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œè¿™äº›è®°å½•å¯ä»¥è®©æˆ‘ä»¬çŸ¥é“ç”¨æˆ·æ˜¯æ€ä¹ˆæ“ä½œç³»ç»ŸæŠ¥çš„é”™è¯¯ã€‚å¯ç”¨æ¥æ‰¾é”™ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ—¥å¿—åˆ†æè½¯ä»¶å»åˆ†æï¼Œæœ€è¿‘ç”¨æˆ·åšé‚£äº›æ“ä½œæ¯”è¾ƒå¤šã€‚æœç´¢ä»€ä¹ˆå…³é”®è¯æ¯”è¾ƒå¤šï¼Œæœ‰åˆ©äºè¿è¥çš„ç­–ç•¥åˆ¶å®šã€‚å¯ç”¨æ¥åˆ†æ ä¾‹å­ windows äº‹ä»¶æŸ¥çœ‹å™¨é‡Œçš„ windowsæ—¥å¿—æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚å®ƒåˆ†ä¸ºåº”ç”¨ç¨‹åºæ—¥å¿—ï¼Œå®‰å…¨æ—¥å¿—ï¼Œç³»ç»Ÿæ—¥å¿— åº”ç”¨ç¨‹åºæ—¥å¿—ï¼šä¸»è¦è®°å½•ç³»ç»Ÿè½¯ä»¶åº”ç”¨çš„é”™è¯¯å®‰å…¨æ—¥å¿—ï¼šæ¯”è¾ƒæ•æ„Ÿçš„ç³»ç»Ÿæ“ä½œï¼Œå¦‚ç®¡ç†å‘˜ç™»å½•ï¼Œä¿®æ”¹å¯†ç ç³»ç»Ÿæ—¥å¿—ï¼šç³»ç»Ÿç›¸å…³çš„æ“ä½œï¼Œå¦‚windowsçš„æœåŠ¡æ“ä½œ æ‰€æœ‰çš„æ—¥å¿—éƒ½è®°å½•äº†é”™è¯¯çº§åˆ«ï¼Œæ—¥æœŸæ—¶é—´ï¼Œæ¥æºï¼Œä»»åŠ¡ç±»å‹ï¼Œç³»ç»Ÿç”¨æˆ·ï¼Œè®¡ç®—æœºï¼Œæ—¥å¿—å†…å®¹ é€šè¿‡æ—¥å¿—è®°å½•çš„å†…å®¹ï¼Œå¯ä»¥è½»æ˜“çš„å¾—çŸ¥è½¯ä»¶çš„é”™è¯¯æ˜¯ä»€ä¹ˆã€‚ å®ƒè¿˜æä¾›äº†ç­›é€‰å’Œæ’åºçš„åŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬å»æŸ¥æ‰¾é”™è¯¯ã€‚ åŸºç¡€æ¦‚å¿µä¸»è¦è®°å½•çš„æ—¥å¿—å†…å®¹ é”™è¯¯çº§åˆ« æ—¥æœŸæ—¶é—´ æ¥æº IP é¡¹ç›®å ä»»åŠ¡ç±»å‹ æ—¥å¿—å†…å®¹ æ“ä½œå†…å®¹çš„ç®€å†™ ç”¨æˆ·çš„è¯·æ±‚å‚æ•°ï¼Œå¯ç”¨ json é¡¹ç›®çš„æ—¥å¿—æ²¡æœ‰windowsæ—¥å¿—é‡Œçš„é‚£ä¹ˆç»†ï¼Œå› ä¸ºæˆ‘ä»¬é¢å¯¹çš„èŒƒå›´æ¯”å®ƒå°å¤ªå¤šäº†ï¼Œæœ‰äº›å†…å®¹å°±æ²¡æœ‰å¿…è¦è®°å½• è®°å½•æ ¼å¼ jsonï¼šè¿™ä¸ªå¯ä»¥å¾ˆå¥½çš„åŒºåˆ†æ•°æ®æ˜¯é‚£ä¸€é¡¹é‡Œé¢çš„ï¼Œä½†æ˜¯åœ¨ç›´æ¥æŸ¥çœ‹ä¸Šä¸æ˜¯å¾ˆç›´è§‚ï¼Œéœ€è¦å–å‡ºè½¬æ ¼å¼ï¼Œæœ‰äº›å†…å®¹è¿˜ä¼šæœ‰æ¢è¡Œçš„ã€‚ å­—ç¬¦ä¸²ï¼šç›´æ¥æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æ¯”è¾ƒç›´è§‚ï¼Œä½†æ˜¯å¦‚æœéœ€è¦å¯¼å…¥åˆ†æå·¥å…·æ—¶ï¼Œéœ€è¦å†™æ­£åˆ™ä¸€é¡¹é¡¹åŒ¹é…å‡ºæ¥ï¼Œå†å¯¼å…¥ æ—¥å¿—å­˜å‚¨æ–¹å¼ æ•°æ®åº“ ä¸ªäººååˆ†ä¸æ¨èçš„è®°å½•æ–¹å¼ï¼Œå› ä¸ºæ—¥å¿—åªè¦æœ‰äººè®¿é—®ç¨‹åºå°±ä¼šå†™åº“ã€‚è®¿é—®å°‘å€’æ— æ‰€è°“ï¼Œè®¿é—®å¤§ä¼šå¤§é‡æ¶ˆè€—æ•°æ®åº“çš„æ€§èƒ½ å†™æ•°æ®åº“æ…¢ï¼Œé«˜å¹¶å‘çš„æ—¶å€™ä¼šé”è¡¨ æ–‡ä»¶ è¿™ä¸ªæ¯”æ•°æ®åº“å¥½å¾ˆå¤šï¼Œä¹Ÿæ¯”è¾ƒä¼ ç»Ÿçš„åšæ³•ã€‚ä¼šå ç”¨ç³»ç»ŸIOï¼Œå†™æ“ä½œå¤ªå¤šæ—¶ä¼šå¯¼è‡´ç³»ç»Ÿå¡é¡¿ã€‚ä¸è€ƒè™‘è¢«æ”»å‡»æ—¶å¯ç›´æ¥ä½¿ç”¨ ç»Ÿè®¡å’ŒæŸ¥æ‰¾æ²¡æœ‰æ•°æ®åº“é‚£ä¹ˆåŠŸèƒ½ä¸°å¯Œï¼Œå¯ä»¥ç›´æ¥å¯¼è‡³åˆ†æç³»ç»Ÿä¸­è¿›è¡Œæ“ä½œã€‚ æ‰©å±•ï¼šçŸ¥é“è‡ªå·±æœåŠ¡å™¨çš„ IO å†™å…¥é€Ÿç‡ï¼Œå»ä¼°ç®—æ¯åˆ†é’Ÿå¯ä»¥å†™å¤šå°‘æ—¥å¿—ï¼Œ å‡å¦‚æœåŠ¡å™¨å†™å…¥é€Ÿç‡æ˜¯ 100k/s å…¶ä»–è½¯ä»¶é¢„è®¡å ç”¨ 30k/s å»é™¤å®¹å·® 20k/s é‚£å¯ç”¨çš„æ˜¯ 50k/s æ¯åˆ†é’Ÿå¯å†™ 51200b çš„æ—¥å¿— å†è®¾æ¯æ¡æ—¥å¿— 500b é‚£æ¯åˆ†é’Ÿçº§æœ€å¤šå¯å†™102æ¡æ—¥å¿— å†…å­˜ è¯»å†™é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å†…å­˜ä¸€èˆ¬ä¸ä¼šå¾ˆå¤§ï¼Œæ™®é4gä»¥ä¸Šã€‚å»é™¤å…¶ä»–åº”ç”¨çš„å†…å­˜å¼€é”€ï¼Œå¯ç”¨çš„å†…å­˜å¹¶ä¸å¤šã€‚å¯ä»¥å®šæ—¶è½¬å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ é™¤äº†æ•°æ®åº“ä¸æ¨èå¤–ï¼Œä½¿ç”¨æ–‡ä»¶è¿˜æ˜¯ä½¿ç”¨å†…å­˜çš„å¯èƒ½é€šè¿‡å†™å…¥æ¡æ•°è¿›è¡Œä¼°ç®—ã€‚ä½¿ç”¨ä»€ä¹ˆæ–¹å¼ ç¨‹åºå®ç°è§„èŒƒ php çš„ psr-3 éš¾ç‚¹ï¼š 1. è¦è®°æ—¥å¿—çš„åœ°æ–¹é‚£ä¹ˆå¤šï¼Œæ€ä¹ˆå¯¹å…¶è¿›è¡Œç®€åŒ–æ“ä½œ é€šè¿‡URLåŒ¹é…æ¥è®°å½•å¤§æ¦‚æ“ä½œ é€šè¿‡phpå¼‚å¸¸å¤„ç†è®°å½•é”™è¯¯æ—¥å¿—ï¼Œä¸ [ä¸Šä¸€æœŸæ–‡ç« ](https://segmentfault.com/a/1190000016824772) å…³è” ç‰¹æ®Šçš„éœ€æ±‚åšç›´æ¥è®°å½•å¤„ç†ï¼Œå¦‚ï¼šæœç´¢å…³é”®è¯è¯é¢‘ç»Ÿè®¡æœ€è¿‘çƒ­é—¨å…³é”®è¯ ç®¡ç† elk: elsticsearch + logstash + kibana æ¯”è¾ƒæµè¡Œçš„ä¸€å¥—æ—¥å¿—åˆ†æç³»ç»Ÿ è‡ªåˆ¶ç®¡ç†ç³»ç»Ÿ å†™åœ¨æœ€åæ—¥å¿—ä¸ç®¡æ˜¯å¯¹ç³»ç»Ÿè¿˜æ˜¯å¯¹ä¸ªäººæ¥è¯´éƒ½æ˜¯å¾ˆæœ‰å¿…è¦å­˜åœ¨çš„ä¸œè¥¿ã€‚ èº«è¾¹çš„äº‹ç‰©æ€»ä¼šåœ¨æŸä¸ªæ—¶é—´ç‚¹æ¶ˆé€ï¼Œæˆ‘ä»¬éœ€è¦çæƒœï¼Œç•™æœ‰ç¾å¥½çš„è®°å¿†ï¼Œå»è®°å½•å®ƒï¼Œç›´åˆ°æŸå¤©è¿”å›ç¿»çœ‹ï¼Œå›å¿†èµ·å½“æ—¶ç•™æœ‰çš„é…¸ç”œè‹¦è¾£ã€‚]]></content>
      <categories>
        <category>æ¦‚å¿µ</category>
      </categories>
      <tags>
        <tag>log</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[phpå¼‚å¸¸å¤„ç†çš„æ·±å…¥]]></title>
    <url>%2F%E6%B7%B1%E5%85%A5%2Fphp-exception%2F</url>
    <content type="text"><![CDATA[å¼•å‡ºå¦‚æœä½ è°ƒä¸€ä¸ªç±»ï¼Œè°ƒç”¨æ—¶æ•°æ®éªŒè¯æ—¶æŠ¥äº†ä¸ªé”™ï¼Œä½ ä¼šä»¥ä»€ä¹ˆæ–¹å¼è¿”å› æ•°ç»„ï¼Œå¸ƒå°”å€¼ï¼Ÿ æ•°ç»„è¿™ä¸ªå¯ä»¥å¸¦é”™è¯¯åŸå› å›æ¥ï¼Œé‚£å¸ƒå°”å€¼å‘¢ï¼Ÿ è¿”å›äº†ä¸ª false, æŠ¥é”™æ—¶æŠŠé”™è¯¯æ”¾åœ¨ç±»å˜é‡é‡Œï¼Ÿè¿˜æ˜¯ä¸“é—¨ç”¨ä¸€ä¸ªè·å–é”™è¯¯çš„æ–¹æ³•è¿›è¡Œè·å–ï¼Ÿ ä¸Šé¢è¯´çš„æƒ…å†µæ˜¯ä»£ç å®Œå…¨æ²¡æœ‰é—®é¢˜çš„æƒ…å†µã€‚é‚£å¦‚æœæ˜¯ä¸€äº›ç¬¬ä¸‰æ–¹çš„å·¥å…·åŒ…ï¼Œä½ åˆæ€ä¹ˆçŸ¥é“ä»–é‡Œé¢çš„æ‰§è¡Œä¼šä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚ ä½ è¯´æœ¬åœ°è¿è¡Œæ˜¯æ²¡é—®é¢˜çš„ï¼Œç¯å¢ƒè¿™ç§ä¸œè¥¿ä¸å¥½è¯´ã€‚ æ‰€ä»¥æˆ‘ä»¬å°±ç”¨åˆ°äº† å¼‚å¸¸ è¿™ä¸ªä¸œè¥¿ ä¸‹é¢æ˜¯æˆ‘ä»¬éœ€è¦äº†è§£çš„é—®é¢˜ ä»€ä¹ˆæ—¶å€™æŠ›å¼‚å¸¸ï¼Ÿæ€ä¹ˆæ¥å¼‚å¸¸ï¼Ÿå¼‚å¸¸è¦æ€ä¹ˆå¤„ç†ï¼Ÿä»–çš„ä½¿ç”¨åœºæ™¯åˆæ˜¯ä»€ä¹ˆï¼Ÿ åŸºç¡€çŸ¥è¯† åŸºç¡€æ“ä½œ try â€¦ catch() throw é”™è¯¯çº§åˆ« è‡´å‘½é”™è¯¯ E_ERRORï¼Œ è¯­æ³•é”™è¯¯ E_PARSEï¼Œ è­¦å‘Šé”™è¯¯ E_WARNINGï¼Œ é€šçŸ¥é”™è¯¯ E_NOTICE phpå¼‚å¸¸å¤„ç†ç±» é¢„å®šä¹‰å¼‚å¸¸ 1* ErrorException (extends Exception) SPLå¼‚å¸¸ç±» 1234567891011121314* LogicException (extends Exception) // è¡¨ç¤ºç¨‹åºé€»è¾‘ä¸­çš„é”™è¯¯çš„å¼‚å¸¸ã€‚è¿™ç§å¼‚å¸¸åº”è¯¥ç›´æ¥åœ¨ä»£ç ä¸­çš„ä¿®å¤ * BadFunctionCallException // å›è°ƒè°ƒç”¨æœªå®šä¹‰çš„å‡½æ•°æˆ–ç¼ºå°‘ä¸€äº›å‚æ•°æ—¶ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ * BadMethodCallException // å›è°ƒæ–¹æ³•æ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„æ–¹æ³•æˆ–ç¼ºå¤±ä¸€äº›å‚æ•°æ—¶ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ * DomainException // å€¼ä¸éµå®ˆå®šä¹‰çš„æœ‰æ•ˆæ•°æ®åŸŸæ—¶ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ * InvalidArgumentException // å‚æ•°ä¸æ˜¯é¢„æœŸç±»å‹æ—¶ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ * LengthException // é•¿åº¦æ— æ•ˆæ—¶ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ * OutOfRangeException // è¯·æ±‚éæ³•ç´¢å¼•æ—¶å¼•å‘çš„å¼‚å¸¸ï¼Œè¿™åº”è¯¥åœ¨ç¼–è¯‘æ—¶å°±æ£€æµ‹åˆ°çš„é”™è¯¯* RuntimeException (extends Exception) // åœ¨è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ * OutOfBoundsException // å€¼ä¸æ˜¯æœ‰æ•ˆé”®æ—¶ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œè¿™è¡¨ç¤ºåœ¨ç¼–è¯‘æ—¶æ— æ³•æ£€æµ‹åˆ°çš„é”™è¯¯ * OverflowException // åœ¨å‘å®Œæ•´å®¹å™¨ä¸­æ·»åŠ å…ƒç´ æ—¶å¼•å‘çš„å¼‚å¸¸ * RangeException // åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸ºæŒ‡ç¤ºèŒƒå›´é”™è¯¯è€Œå¼•å‘çš„å¼‚å¸¸ã€‚é€šå¸¸è¿™æ„å‘³ç€é™¤äº†/overflowä»¥å¤–è¿˜æœ‰ä¸€ä¸ªç®—æœ¯é”™è¯¯ã€‚è¿™æ˜¯è¿è¡Œæ—¶çš„DomainExceptionç‰ˆæœ¬ * UnderflowException // åœ¨ç©ºå®¹å™¨ä¸Šæ‰§è¡Œæ— æ•ˆæ“ä½œ(å¦‚åˆ é™¤å…ƒç´ )æ—¶å¼•å‘çš„å¼‚å¸¸ * UnexpectedValueException // å€¼ä¸ä¸€ç»„å€¼ä¸åŒ¹é…æ—¶ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚é€šå¸¸ï¼Œå½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°å¹¶æœŸæœ›è¿”å›å€¼ä¸ºæŸç§ç±»å‹æˆ–å€¼(ä¸åŒ…æ‹¬ç®—æœ¯æˆ–ç¼“å†²åŒºç›¸å…³é”™è¯¯)æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µ å¼‚å¸¸å¤„ç†ç›¸å…³å‡½æ•° 12345error_reporting // è®¾ç½®æŠ¥å‘Šçš„é”™è¯¯çº§åˆ«register_shutdown_function // æ³¨å†Œä¸€ä¸ªä¼šåœ¨phpä¸­æ­¢æ—¶æ‰§è¡Œçš„å‡½æ•°set_error_handler // è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰çš„é”™è¯¯å¤„ç†å‡½æ•°set_exception_handler // è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å‡½æ•°error_get_last // è·å–æœ€åå‘ç”Ÿçš„é”™è¯¯ ä½¿ç”¨åœºæ™¯ ç³»ç»Ÿ ä¸»è¦æŠ“çš„æ˜¯æ— æ³•é¢„æµ‹çš„é”™è¯¯ï¼Œç»Ÿä¸€è¿”å›ï¼Œæ²¡æœ‰ä½¿ç”¨ tryâ€¦catch æ¥æ”¶çš„å¼‚å¸¸ç›´æ¥è·³è¿›è®¾ç½®çš„æ–¹æ³•ä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;?phpnamespace App\Exception;use Exception;/** * å¼‚å¸¸å¥æŸ„ï¼ˆå…¥å£ï¼‰ç±» */class Handler&#123; // é»˜è®¤é”™è¯¯å¤„ç† public static function errorHandler($errno, $errstr, $errfile = '', $errline = 0) &#123; &#125; // é»˜è®¤å¼‚å¸¸å¤„ç† public static function exceptionHandler($ex) &#123; try &#123; throw $ex; &#125; catch (Order $e) &#123; echo "è®¢å•å¼‚å¸¸"; &#125; catch (Goods $e) &#123; echo "å•†å“å¼‚å¸¸"; &#125; catch (User $e) &#123; echo "ç”¨æˆ·å¼‚å¸¸"; &#125; catch (Exception $e) &#123; echo "å…¶ä»–å¼‚å¸¸"; &#125; &#125; // è‡´å‘½é”™è¯¯å¤„ç† public static function fatalErrorHandler() &#123; if ($e = error_get_last()) &#123; print_r($e); &#125; &#125;&#125;/** * è®¢å•å¼‚å¸¸ */class Order extends Exception&#123;&#125;/** * å•†å“å¼‚å¸¸ */class Goods extends Exception&#123;&#125;/** * ç”¨æˆ·å¼‚å¸¸ */class User extends Exception&#123;&#125; 12345678910&lt;?php// å…¥å£æ–‡ä»¶ä¸­error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);register_shutdown_function(array('App\\Exception\\Handler', 'fatalErrorHandler'));set_error_handler(array('App\\Exception\\Handler', 'errorHandler'));set_exception_handler(array('App\\Exception\\Handler', 'exceptionHandler')); å·¥å…· å®šä¹‰è‡ªå®šä¹‰çš„å¼‚å¸¸ï¼Œä¸€æœ‰é”™è¯¯ç›´æ¥æŠ›å‡ºã€‚ä½¿ç”¨å·¥å…·çš„ç¨‹åºåªéœ€é€šè¿‡ Exception æ¥æ”¶å¼‚å¸¸å³å¯, æ‰€æœ‰å¼‚å¸¸éƒ½é€šè¿‡è¿™ä¸ªè¿›è¡Œå¤„ç†çš„ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?phpnamespace Testlin\Db\Exception;use Exception;interface ExceptionInterface&#123;&#125;class Db extends Exception implements ExceptionInterface&#123;&#125;class Pdo extends Db&#123;&#125;?&gt;&lt;?phpnamespace Testlin\Db;use Exception;use Testlin\Db\Exception\Pdo;class Db&#123; protected $db; public function __construct($config) &#123; $this-&gt;db = new PDO($config); if ($this-&gt;db == false) &#123; throw new Pdo("è¿æ¥å¤±è´¥"); &#125; &#125;&#125;?&gt; æ–‡ç« ä¾‹å­ å·¥å…·åŒ…ä¾‹å­ é¡¹ç›®ä¾‹å­ FQA1ã€ä¸ºä»€ä¹ˆè¦å®šè‡ªå®šä¹‰å¼‚å¸¸ç±», ç³»ç»Ÿä¸æ˜¯å·²ç»ç»™äº†å¾ˆå¤šé€‰æ‹©ï¼Œè€Œä¸”å¾ˆå¤š composer åŒ…é‡Œéƒ½åªæ˜¯ç»§æ‰¿ä¸€ä¸‹ã€‚ ç­”ï¼šå…¶å®è‡ªå®šä¹‰å¼‚å¸¸æ˜¯ä¸ºäº†ç”¨åŒºåˆ†å¼‚å¸¸é¢—ç²’åº¦çš„ï¼Œæ¯”å¦‚ æˆ‘å®šäº† è®¢å•å¼‚å¸¸ï¼Œå•†å“å¼‚å¸¸ï¼Œç”¨æˆ·å¼‚å¸¸ ç±»ï¼Œä½†æ˜¯ è®¢å•é‡Œçš„å¼‚å¸¸å¤šç§å¤šæ ·ï¼Œæ¯”å¦‚è®¢å•æ”¯ä»˜å¼‚å¸¸ï¼Œè®¢å•ç”Ÿæˆå¼‚å¸¸ã€‚ * RuntimeException (extends Exception) * Order * Paymen * Created * Goods * User * Withdraw å½“é¡¹ç›®æŠ›å‡ºå¼‚å¸¸æ—¶ 123456789&lt;?php try &#123; $param = []; // æ“ä½œé‚£ä¸ªæ–¹æ³•æ—¶ä¼ çš„å‚æ•° throw App\Exception\Order\Payment::forParam('æ‰§è¡Œxxxæ“ä½œå¼‚å¸¸', $param); &#125; catch (Exception $e) &#123; // ç›¸å…³æ“ä½œ get_class($e); // å½“å‰å¼‚å¸¸ç±» App\Exception\Order\Payment &#125; é€šè¿‡å¼‚å¸¸ç±»åï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“æ˜¯è®¢å•æ”¯ä»˜å¼‚å¸¸ã€‚è¿™é‡Œå¯ä»¥ä»£æ›¿é”™è¯¯å·ï¼Œè€Œä¸”æ›´æ¸…æ™°æ˜äº† 2ã€ä¸ºä»€ä¹ˆæœ‰ä¸€äº› composer åŒ…é‡Œçš„è‡ªå®šä¹‰å¼‚å¸¸ï¼Œæœ‰çš„æœ‰å¾ˆå¤šæ–¹æ³•ã€‚æœ‰ä»€ä¹ˆç”¨å¤„å—ï¼Ÿ ä½œç”¨1ï¼šæ ¼å¼åŒ–å¼‚å¸¸ æ¯”å¦‚ï¼šæŠ›å‡ºçš„å¼‚å¸¸æç¤ºæ˜¯ â€œid=xx çš„ç”¨æˆ·ä¸å­˜åœ¨â€ï¼Œæˆ‘ä»¬ä¼šæœ‰ä»¥ä¸‹ä¸¤ç§å†™æ³• 12345678910111213141516171819202122&lt;?php// æ™®é€šæ“ä½œ$id = 1;throw new Payment("id=&#123;$id&#125; çš„ç”¨æˆ·ä¸å­˜åœ¨");// æ ¼å¼åŒ–å¼‚å¸¸use App\Exception\Order;class Payment extends Order&#123; public static function forId($id) &#123; return new self(sprintf( 'id=%s çš„ç”¨æˆ·ä¸å­˜åœ¨', $id )); &#125;&#125;$id = 1;throw Payment::forId($id); ä½œç”¨2ï¼šç»„ä»¶çº§åˆ«çš„å¼‚å¸¸ 12345678910111213141516171819202122232425&lt;?phpnamespace Testlin\Db\Exception;use Exception;interface ExceptionInterface&#123;&#125;class Mysqli extends Exception impements ExceptionInterface&#123;&#125;class Pdo extends Exception impements ExceptionInterface&#123;&#125;try &#123; throw new Testlin\Db\Exception\Mysqli('sql æ‰§è¡Œå¤±è´¥');&#125; catch (Testlin\Db\Exception\ExceptionInterface $e) &#123; // è¿™é‡Œå–å¾—çš„å¼‚å¸¸åªä¼šæ˜¯ç»§æ‰¿è¿™ä¸ªæ¥å£çš„å¼‚å¸¸ // å¯ä»¥åªé’ˆå¯¹è¿™ä¸ªå·¥å…·åŒ…è¿›è¡Œå¤„ç†&#125;]]></content>
      <categories>
        <category>æ·±å…¥</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[satis composer æœ¬åœ°ä»“åº“æ­å»º]]></title>
    <url>%2F%E5%B7%A5%E5%85%B7%2Fcomposer-local-repository%2F</url>
    <content type="text"><![CDATA[ç¯å¢ƒ windows nginx php composer å®‰è£…æ‹‰å– satis é¡¹ç›®åŒ…ï¼Œå¹¶æ‹‰å–é¡¹ç›®ä¾èµ– 12345composer create-project composer/satis --stability=devcd satiscomposer install é…ç½®ä¿®æ”¹ satis/config.json æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ 123456789101112131415161718192021&#123; "name": "composer æœ¬åœ°ä»“åº“", "homepage": "http://packages.example.org", // è®¿é—®åŸŸå "repositories": [// è¦æ‹‰å–åŒ…çš„ä»“åº“åœ°å€ &#123; "type": "vcs", "url": "https://github.com/test-lin/db.git" &#125;, &#123; "type": "vcs", "url": "https://github.com/test-lin/queue.git" &#125;, &#123; "type": "vcs", "url": "https://github.com/test-lin/cache.git" &#125;, &#123; "type": "vcs", "url": "http://192.168.6.251:3000/php/xjwSpider.git" &#125; ], "require": &#123; // è¦æ‹‰å–åˆ°æœ¬åœ°çš„åŒ…æ–‡ä»¶ æ³¨ï¼šä¸ä¼šåŒ…å«åŒ…çš„ä¾èµ– "test-lin/db": "*", "test-lin/queue": "*", "test-lin/cache": "*", "php/xjwSpider": "*" &#125;, "archive": &#123; "directory": "dist", "format": "tar", "prefix-url": "http://packages.example.org" // * è¿™ä¸ªå‚æ•°æ˜¯å½“å‰é¡¹ç›®çš„åŸŸåï¼Œä½œç”¨æ˜¯ä»¥zipå‹ç¼©åŒ…çš„æ–¹å¼ç›´æ¥ä¸‹è½½åŒ…æ–‡ä»¶ &#125;&#125; æ‹‰å–åŒ…åˆ°æœ¬åœ°ä»“åº“web/ æ˜¯æœ¬åœ°ä»“åº“è®¿é—®åœ°å€ã€‚ 1php bin/satis build config.json web/ å¦‚æœéœ€è¦å®šæ—¶æ›´æ–°ï¼Œåˆ™éœ€è¦é…ç½®å®šæ—¶ä»»åŠ¡å»å®šæ—¶æ›´æ–° è®¾ç½®æœ¬åœ°ä»“åº“nginx è®¾ç½®è™šæ‹Ÿä¸»æœº 12345678910111213server &#123; listen 80; server_name packages.example.org; root /var/www/satis/web; index index.php index.html; location ~* \.php$ &#123; include fastcgi_params; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; &#125;&#125; ä½¿ç”¨æœ¬åœ°ä»“åº“ä¸­çš„åŒ…composer.json æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ json æ‹‰å–ï¼Œå³å¯è·å–æœ¬åœ°åº“äº†. å¦‚æœæœ¬åœ°ä»“åº“ä¸å­˜åœ¨ä¸”æœ‰ç½‘ç»œä¼šå»ç½‘ç»œä¸­è·å–ã€‚repositories å‚æ•°å¯ä»¥è®¾ç½®å¤šä¸ª 123456&#123; "repositories": [&#123; "type": "composer", "url": "http://packages.example.org" &#125;]&#125; FQA1. github çš„åŒ…éœ€è¦é…ç½® token123Could not fetch https://api.github.com/repos/test-lin/db/git/refs/heads?per_page=100, please create a GitHub OAuth token to go over the API rate limitHead to https://github.com/settings/tokens/new?scopes=repo&amp;description=Composer+on+packages.example.org+2018-06-28+0310to retrieve a token. It will be stored in "/home/vagrant/.config/composer/auth.json" for future use by Composer. è§£å†³æ–¹æ³•ï¼š è®¿é—®å‘½ä»¤è¡Œä¸­æç¤ºçš„ https://github.com/settings/tokens/new?scopes=repo&amp;description=Composer+on+packages.example.org+2018-06-28+0310 å¤åˆ¶ token description æ–‡æœ¬æ¡†ä¸­å†…å®¹ æ‹‰åˆ°é¡µåº• ç‚¹å‡» generate token åœ¨å‘½ä»¤è¡Œä¸­ç²˜è´´å¤åˆ¶å†…å®¹ç¡®è®¤é™å¯ 2. ç§æœ‰åŒ…ï¼Œæ‹‰å–ä¸äº†è§£å†³æ–¹æ³•ï¼š æœ¬åœ°ç”Ÿæˆ ssh key ï¼Œé…ç½®åˆ°è¦æ‹‰å–é¡¹ç›®çš„å¹³å°å³å¯ï¼Œå…å¯†æ‹‰å–äº† 123ssh-keygen -t rsacat ~/.ssh/id_rsa.pub ä»¥ gogs ä¸ºä¾‹ 3. composer ä¸æ”¯æŒ http1Your configuration does not allow connections to http://192.168.6.251:3000/php/xjwSpider.git. See https://getcomposer.org/doc/06-config.md#secure-http for details. è§£å†³æ–¹æ³•ï¼š 1composer config -g secure-http false 4. æ‹‰å–çš„åŒ… composer.json é…ç½®æœ‰è¯¯12[Composer\Repository\InvalidRepositoryException]No valid composer.json was found in any branch or tag of http://192.168.6.251:3000/php/xjwSpider.git, could not load a package from it. è§£å†³æ–¹æ³•ï¼š ç¡®ä¿é¡¹ç›®æ ¹éƒ¨æœ‰ composer.json composer.json é‡Œéœ€è¦è®¾ç½® name]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>composer</tag>
        <tag>satis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[1.1 Xdebugçš„å®‰è£…é…ç½®]]></title>
    <url>%2F%E5%B7%A5%E5%85%B7%2Fxdebug-install-and-config%2F</url>
    <content type="text"><![CDATA[ä»‹ç»æˆ‘ä¹‹å‰é…ç½®ç›´æ¥æŒ‰ç½‘ä¸Šçš„æ–‡ç« è¿›è¡Œé…ç½®æ€»æ˜¯é…ç½®ä¸æˆåŠŸï¼Œé‡Œé¢å¾ˆå¤šä¸œè¥¿ä¸äº†è§£ã€‚å½“æˆ‘åœ¨ xdebug å®˜ç½‘çœ‹åˆ°äº† xdebug è¿œç¨‹è°ƒè¯•åŸç†å›¾æ—¶ï¼Œæˆ‘æ‰çŸ¥é“åº”è¯¥æ€ä¹ˆé…ç½® xdebugã€‚é…ç½®çš„å‚æ•°ä¹Ÿå°‘äº†å¾ˆå¤šï¼Œä¹Ÿä¸éœ€è¦åœ¨ IDE é‡Œå¯¹ä¸€ä¸ªä¸ªè¯·æ±‚åœ°å€è¿›è¡Œé…ç½®ã€‚ä½“éªŒæ¯”ä¹‹å‰çœ‹åˆ°çš„æ–‡ç« è®¾ç½®å¥½ç”¨å¤šäº† ç¯å¢ƒè¯´æ˜ windows vagrant+vbox+centos7+nginx+php phpstorm é…ç½®å‰å‡†å¤‡ æ£€æŸ¥ php ç¯å¢ƒæ˜¯å¦å·²ç»å­˜åœ¨ xdebug æ‹“å±•äº† åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ php -m å¯ä»¥æŸ¥çœ‹ php å·²åŠ è½½çš„æ‹“å±• äº†è§£è‡ªå·±ç¯å¢ƒçš„é…ç½® php ç‰ˆæœ¬ php.ini æ‰€åœ¨åœ°å€ æœåŠ¡å™¨ç³»ç»Ÿä½æ•° 32ä½ è¿˜æ˜¯ 64ä½ xdebug å’Œ phpstorm äº¤äº’çš„åŸç† æœåŠ¡å™¨çš„IPå’Œç«¯å£æ˜¯ 10.0.1.2:80 IDE çš„å®¢æˆ·ç«¯IPæ˜¯ 10.0.1.42, æ‰€ä»¥æœåŠ¡å™¨ä¸Š xdebug.remote_host=10.0.1.42 IDE ç›‘å¬çš„è°ƒè¯•ç«¯å£ä¸º 9000, æ‰€ä»¥æœåŠ¡å™¨ä¸Š xdebug.remote_port=9000 IDE æ‰€åœ¨çš„å®¢æˆ·ç«¯ï¼Œå¯¹ xdebug çš„æœåŠ¡å™¨è¿›è¡Œè¯·æ±‚ Xdebug ä¸ 10.0.1.42:9000 çš„å®¢æˆ·ç«¯ IDE ç›‘å¬ç«¯å£å…³è” è¿è¡Œè°ƒè¯•, xdebug æ‰€åœ¨çš„æœåŠ¡å™¨æä¾› HTTP å“åº” æœåŠ¡å™¨çš„IPå’Œç«¯å£æ˜¯ 10.0.1.2:80 IDE çš„å®¢æˆ·ç«¯IPæ˜¯ä¸€ä¸ªæœªçŸ¥çš„IP, æ‰€ä»¥æœåŠ¡å™¨ä¸Š xdebug.remote_connect_back=1 IDE ç›‘å¬çš„è°ƒè¯•ç«¯å£ä¸º 9000, æ‰€ä»¥æœåŠ¡å™¨ä¸Š xdebug.remote_port=9000 å‘å‡º HTTP è¯·æ±‚åï¼ŒXdebug å°†ä» HTTP è¯·æ±‚å¤´è·å– IP åœ°å€ Xdebug ä¼šå’Œä» HTTP è¯·æ±‚å¤´è·å– IP åœ°å€çš„å®¢æˆ·ç«¯ IDE ç›‘å¬ç«¯å£å…³è” è¿è¡Œè°ƒè¯•, xdebug æ‰€åœ¨çš„æœåŠ¡å™¨æä¾› HTTP å“åº” ä¸‹è½½ç¼ºå°‘çš„æ‰©å±•å’Œè½¯ä»¶ phpstorm ç¼–è¾‘å™¨ xdebug æ‰©å±• é…ç½®php ç¯å¢ƒé…ç½®æ·»åŠ  xdebug æ‰©å±• ä¸‹è½½ xdebug æ‰©å±•æºç  123456cd /usr/local/srcwget https://xdebug.org/files/xdebug-2.7.0alpha1.tgzè§£å‹tar -zxvf xdebug-2.7.0alpha1.tgz ç¼–è¯‘å®‰è£… 123456789101112131415161718cd xdebug-2.7.0alpha1ç”Ÿæˆå®‰è£…è„šæœ¬phpizeè®¾ç½®å®‰è£…é…ç½®å‚æ•°vim install-sh&gt; /configure --with-php-config=/usr/local/php/bin/php-configè¿è¡Œå®‰è£…é…ç½®sh install-shç¼–è¯‘æ‰©å±•ï¼Œä½¿ç”¨ä¸¤ä¸ª cpu å†…æ ¸è¿è¡Œï¼ˆå¯ä»¥å¿«å¾ˆå¤šï¼‰make -j 2ç¼–è¯‘å®‰è£…make install æ³¨æ„ï¼š ç¼–è¯‘å®‰è£…åï¼Œä¼šè¿”å›æ‰©å±•æ‰€åœ¨æ–‡ä»¶å¤¹ã€‚ php.ini ä¸­æ·»åŠ  xdebug é…ç½® 12345678[xdebug]zend_extension=&quot;/usr/local/php/lib/php/extensions/no-debug-non-zts-20160303/xdebug.so&quot;xdebug.idekey=&quot;PHPSTORM&quot;xdebug.remote_enable = Onxdebug.remote_autostart=Onxdebug.remote_connect_back=Onxdebug.remote_port=9001 phpstorm é…ç½® æ‰“å¼€è®¾ç½® file -&gt; settings -&gt; Languages &amp; Frameworks è®¾ç½®é¡¹ç›®ä½¿ç”¨ç¯å¢ƒ è®¾ç½® debug é…ç½® Languages &amp; Frameworks -&gt; php -&gt; debug è®¾ç½® xdebug dbgp é…ç½® Languages &amp; Frameworks -&gt; php -&gt; debug -&gt; dbgp proxy è®¾ç½®å½“å‰é¡¹ç›®æ‰€åœ¨æœåŠ¡å™¨åœ°å€å’ŒåŸŸå å¼€å§‹è°ƒè¯• æ‰“å¼€ç¼–è¾‘å™¨è°ƒè¯•ç›‘å¬ åœ¨æŒ‡å®šæ§åˆ¶å™¨ä¸­æ·»åŠ æ–­ç‚¹ è¯·æ±‚åœ°å€ï¼Œç¼–è¾‘å™¨ä¼šè‡ªåŠ¨è¿›å…¥è°ƒè¯•æ¨¡å¼ä¸­ ç³»åˆ—æ–‡ç«  xdebugçš„å®‰è£…é…ç½® [æœ¬ç¯‡] xdebugçš„å®é™…è¿ç”¨ xdebugæ€§èƒ½åˆ†æ FQAæˆ‘çš„ php è¿è¡Œç¯å¢ƒåœ¨ windows ä¸‹åº”è¯¥è¦æ€ä¹ˆè®¾ç½®windows çš„æ·»åŠ æ‰©å±•ä¼šæ¯” linux ç®€å•å¾ˆå¤šã€‚ç›´æ¥ä¸‹è½½ dll æ‰©å±•æ–‡ä»¶å°±å¯ä»¥äº†ã€‚é™¤äº† zend_extension è®¾ç½®çš„åœ°å€ä¸ä¸€æ ·ã€‚å…¶ä»–å¯ä»¥ xdebug é…ç½®å¯ä»¥å…±ç”¨ã€‚ php.ini ä¸­é…ç½® xdebug ä¸ºä»€ä¹ˆä¸ç”¨é»˜è®¤çš„ 9000 ç«¯å£å› ä¸º php-fpm æ˜¯ä½¿ç”¨ cgiåè®® è¿›è¡Œè¿è¡Œï¼Œæ‰€ä»¥å®ƒä¹Ÿéœ€è¦ç«¯å£ï¼Œè€Œå®ƒé»˜è®¤çš„ç«¯å£ä¹Ÿæ˜¯ 9000ã€‚å¦‚æœä½ åƒæˆ‘è¿™æ ·ä½¿ç”¨è™šæ‹Ÿæœºçš„æ–¹å¼è¿›è¡Œè®¿é—®é¡¹ç›®ï¼Œä¸ä¼šå‡ºé—®é¢˜ã€‚ä½†æ˜¯å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æœ¬åœ°çš„ php-fpm é‚£ä»–å°±ä¼šå‡ºç°ç«¯å£è¢«å ç”¨çš„æƒ…å†µã€‚ä¸ºäº†é¿å…å°±ç›´æ¥ç”¨ 9001 æ¥ä»£æ›¿é»˜è®¤ç«¯å£ php.ini ä¸­å¯ä»¥é…ç½®çš„ xdebug å‚æ•°æœ‰é‚£äº›ï¼Œæˆ‘åº”è¯¥åœ¨é‚£é‡Œå¾—åˆ°æ›´å…¨é¢çš„å‚æ•°è¯´æ˜xdebug å®˜ç½‘é‚£é‡Œçš„æ‰‹å†Œæœ‰è¯¦ç»†è¯´æ˜ï¼Œ xdebug è¿œç¨‹è¿æ¥æ–‡æ¡£é“¾æ¥ é‡Œçš„ ctrl + f æœç´¢ Related Settings å°±å¯ä»¥çœ‹åˆ°è¿æ¥å‚æ•°äº† æˆ‘åº”è¯¥ä¸‹è½½é‚£ä¸ªç‰ˆæœ¬çš„ xdebugå¦‚æœå®åœ¨ä¸çŸ¥é“è‡ªå·±çš„ windos ç³»ç»Ÿçš„ php ç¯å¢ƒè¯¥ç”¨é‚£ä¸ªç‰ˆæœ¬çš„æ‰©å±•å¯ä»¥é€šè¿‡ä¸‹è½½é¡µæä¾›çš„å·¥å…·è¿›è¡Œä¸‹è½½ å·¥å…·é“¾æ¥ å¤šè¡Œæ–‡æœ¬æ¡†é‡Œé¢æ˜¯æ”¾é€šè¿‡ php -i å‘½ä»¤è¿”å›çš„é…ç½®å†…å®¹ä¸ºäº†æ›´å®Œæ•´çš„å–å¾—å‚æ•°å¯ä»¥ php -i &gt; D:/php-ini.txt ä¿å­˜åˆ°æ–‡ä»¶ä¸­ ä¸ºä»€ä¹ˆæˆ‘çš„ ide é…ç½®å¥½åï¼Œå¯åŠ¨è°ƒè¯•ç›‘å¬æ²¡æœ‰æ•ˆæœè¿™ä¸ªå¾ˆæœ‰å¯èƒ½æ˜¯ä½ ç³»ç»Ÿçš„é˜²ç«å¢™çš„å®‰å…¨æœºåˆ¶ã€‚æŠŠè¿™ä¸ªç«¯å£ä¿å­˜èµ·æ¥äº†ï¼Œå¯ä»¥ç›´æ¥å…³é—­é˜²ç«å¢™è¿›è¡Œè°ƒè¯•]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>xdebug</tag>
        <tag>phpstorm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[1.2 xdebugçš„å®é™…è¿ç”¨]]></title>
    <url>%2F%E5%B7%A5%E5%85%B7%2Fxdebug-use%2F</url>
    <content type="text"><![CDATA[ä»‹ç»åœ¨ ä¸Šä¸€æœŸ ä¸­æˆ‘ä»¬å·²ç»æŠŠ xdebug å’Œ phpstorm çš„å…³è”é…ç½®è®¾ç½®å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä¼šæ·±å…¥çš„ä»‹ç» debug çš„è¿ç”¨ã€‚åˆ†ä¸º3ç‚¹å†…å®¹ å¿«é€Ÿæ‰¾åˆ°é”™è¯¯çš„åŸå›  è¾…åŠ©è¯»æ‡‚æ¯”æ•ˆå¤æ‚çš„ä»£ç  ä»£ç é‡æ„ ç¯å¢ƒè¯´æ˜ windows vagrant+vbox+centos7+nginx+php phpstorm å­¦å‰å‡†å¤‡ xdebug + phpstorm è°ƒè¯•ç¯å¢ƒå·²ç»å¯ä»¥æ­£å¸¸è¿è¡Œ è°ƒè¯•è·³è½¬ å›¾æ ‡ æè¿° å½“å½“å‰åº”ç”¨ç¨‹åºåœæ­¢æ—¶ï¼Œå•å‡»æ­¤æŒ‰é’®å†æ¬¡è°ƒè¯•ã€‚ å•å‡»æ­¤æŒ‰é’®å¯æš‚åœç¨‹åºæ‰§è¡Œã€‚ å•å‡»æ­¤æŒ‰é’®ï¼Œé€šè¿‡æ ‡å‡†å…³é—­è„šæœ¬ä»å¤–éƒ¨ç»ˆæ­¢å½“å‰è¿›ç¨‹ã€‚ å•å‡»æ­¤æŒ‰é’®ä»¥æ‰“å¼€æ–­ç‚¹å¯¹è¯æ¡†ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­é…ç½®æ–­ç‚¹è¡Œä¸ºã€‚ ä½¿ç”¨æ­¤æŒ‰é’®åˆ‡æ¢æ–­ç‚¹çŠ¶æ€ã€‚ å•å‡»æ­¤æŒ‰é’®ä»¥çªå‡ºæ˜¾ç¤ºç¼–è¾‘å™¨ä¸­çš„å½“å‰æ‰§è¡Œç‚¹ï¼Œå¹¶åœ¨æ¡†æ¶çª—æ ¼ä¸­æ˜¾ç¤ºç›¸åº”çš„å †æ ˆæ¡†æ¶ã€‚ å•å‡»æ­¤æŒ‰é’®æ‰§è¡Œç¨‹åºï¼Œç›´åˆ°å½“å‰æ–¹æ³•æˆ–æ–‡ä»¶ä¸­çš„ä¸‹ä¸€è¡Œï¼Œè·³è¿‡åœ¨å½“å‰æ‰§è¡Œç‚¹å¼•ç”¨çš„æ–¹æ³•(å¦‚æœæœ‰çš„è¯)ã€‚å¦‚æœå½“å‰è¡Œæ˜¯æ–¹æ³•ä¸­çš„æœ€åä¸€è¡Œï¼Œåˆ™æ‰§è¡Œæ­¥éª¤åˆ°åœ¨æ­¤æ–¹æ³•ä¹‹åæ‰§è¡Œçš„è¡Œã€‚ f7å•å‡»æ­¤æŒ‰é’®ï¼Œä½¿è°ƒè¯•å™¨æ­¥éª¤è¿›å…¥åœ¨å½“å‰æ‰§è¡Œç‚¹è°ƒç”¨çš„æ–¹æ³•ã€‚ å•å‡»æ­¤æŒ‰é’®ï¼Œè°ƒè¯•å™¨å°†ä»å½“å‰æ–¹æ³•ä¸­é€€å‡ºï¼Œå¹¶ç«‹å³æ‰§è¡Œè¯¥è¡Œã€‚ å•å‡»æ­¤æŒ‰é’®æ¢å¤ç¨‹åºæ‰§è¡Œå¹¶æš‚åœï¼Œç›´åˆ°æ‰§è¡Œç‚¹åˆ°è¾¾ç¼–è¾‘å™¨ä¸­å½“å‰æ¸¸æ ‡ä½ç½®çš„è¡Œã€‚ä¸éœ€è¦æ–­ç‚¹ã€‚å®é™…ä¸Šï¼Œæ’å…¥ç¬¦å·å¤„çš„å½“å‰è¡Œæœ‰ä¸€ä¸ªä¸´æ—¶æ–­ç‚¹é›†ï¼Œä¸€æ—¦ç¨‹åºæ‰§è¡Œæš‚åœï¼Œå°±ä¼šåˆ é™¤å®ƒã€‚å› æ­¤ï¼Œå¦‚æœæ’å…¥ç¬¦å·ä½äºå·²ç»æ‰§è¡Œçš„è¡Œä¸Šï¼Œåˆ™ç¨‹åºå°†é‡æ–°å¼€å§‹æ‰§è¡Œï¼Œå› ä¸ºæ— æ³•å›æ»šåˆ°ä»¥å‰çš„æ–­ç‚¹ã€‚å½“æ‚¨æ·±å…¥åˆ°æ–¹æ³•åºåˆ—ä¸­å¹¶éœ€è¦stæ—¶ï¼Œè¿™ä¸ªæ“ä½œç‰¹åˆ«æœ‰ç”¨ å¿«é€Ÿæ‰¾åˆ°é”™è¯¯çš„åŸå› åœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°å¾ˆå¤š bugã€‚ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§ php è¯­è¨€æŠ¥é”™ æŠ¥é”™æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆçœ‹ä¸‹æŠ¥é”™å†…å®¹ï¼Œè¿™å¾ˆé‡è¦ï¼Œä»–å¯ä»¥è®©ä½ çŸ¥é“ä½ çš„ä»£ç é”™é‚£é‡Œäº†ã€‚ä¸€èˆ¬ä¼šè¿”å›ç»™ä½ é”™è¯¯æ˜¯é‚£ä¸€è¡Œï¼Œç¯å¢ƒè£…äº† xdebug åè¿˜ä¼šæ˜¾ç¤ºé”™è¯¯çš„åœ°å€è¿è¡Œæ—¶ç»è¿‡äº†é‚£äº›æ–‡ä»¶ï¼Œé‚£äº›æ–¹æ³• å†™æ•°æ®åº“æ“ä½œå¤±çµ è¿™ä¸ªé”™è¯¯éš¾åº¦å°±é«˜äº†äº›ã€‚å› ä¸ºä½ éœ€è¦äº†è§£å½“å‰ä¸šåŠ¡éœ€è¦æ”¹é‚£äº›æ•°æ®è¡¨ã€‚æ“ä½œè¿‡åé‚£å¼ è¡¨çš„æ•°æ®æ¼äº†ã€‚è¿™ä¸ªæ“ä½œä½ æœ‰æ²¡æœ‰å†™ã€‚è™½ç„¶è¯´åªè¦è‡ªå·±äº†è§£ä¸šåŠ¡å°±å¯ä»¥ä¸ç”¨è°ƒè¯•ä¹Ÿå¯ä»¥å¿«é€Ÿè§£å†³ï¼Œä½†æ˜¯ä¼ å‚æˆ–è¿”å›å¾ˆå¤æ‚ã€‚é‚£è¿™ä¸ªå°±å¾ˆé€‚åˆäº† è¾…åŠ©è¯»æ‡‚æ¯”æ•ˆå¤æ‚çš„ä»£ç å·¥ä½œä¸­å¹¶ä¸æ˜¯å…¨éƒ½æ˜¯è‡ªå·±ä½¿ç”¨æ¡†æ¶å¼€å‘ï¼Œæœ‰æ—¶è¿˜ä¼šä¸ºäº†è¿›åº¦ä½¿ç”¨ä¸€äº›å¼€æºçš„é¡¹ç›®ï¼ˆecshopï¼Œdedecmsï¼‰ã€‚ä¹Ÿå¯èƒ½æ˜¯å‰åŒäº‹é—ç•™çš„ä»£ç ã€‚è‡ªå·±å†™çš„ä¸œè¥¿å¾ˆå®¹æ˜“çœ‹æ‡‚ï¼Œä½†æ˜¯çœ‹åˆ«äººçš„ä¸œè¥¿ï¼Œå¦‚æœå†™çš„ä¸å¥½é‚£ç»å¯¹æ˜¯æ¶æ¢¦ã€‚ä½ ä¼šåœ¨çœ‹éƒ½ä¸æƒ³çœ‹ï¼Œå¿ƒé‡Œåœ¨åæ§½ä»£ç ä¸åˆç†çš„åœ°æ–¹ã€‚å¿ƒä¸­å§‹ç»ˆååˆ†æŠ—æ‹’ï¼Œå¯¼è‡´åŠŸèƒ½å˜æ›´å»¶æœŸã€‚ å¤æ‚çš„ä»£ç åªéœ€è¦çŸ¥é“å®ƒä¼šæ¥æ”¶ä»€ä¹ˆå‚æ•°ï¼Œè¿”å›ä»€ä¹ˆä¸œè¥¿å°±å¯ä»¥äº†ã€‚å¦‚æœä¸æ˜¯å¾ˆé‡è¦å®Œå…¨å¯ä»¥ä¸çœ‹å®ƒå†…éƒ¨çš„å†…å®¹ã€‚æŠŠå®ƒéš”ç¦»å¼€æ¥ã€‚ å­¦ä¹ æŠ€æœ¯è¶…å‰çš„ä»£ç è¿è¡Œé€»è¾‘ã€‚é‚£å°±éœ€è¦è¿›è¡Œæ–­ç‚¹è°ƒè¯•äº†ã€‚ ä»£ç é‡æ„ä»£ç é‡æ„æ˜¯ç»´æŠ¤ä¸€ä¸ªå†™çš„å¾ˆçƒ‚çš„é¡¹ç›®å¿…éœ€ç»å†çš„è¿‡ç¨‹ã€‚é‡æ„çš„æ ¸å¿ƒä¹Ÿæ˜¯çŸ¥é“æŒ‡å®šçš„æ–¹æ³•æœ‰é‚£äº›æ”¹å˜ï¼Œæˆ–æŠŠå®ƒæ‹†åˆ†å‡ºæ¥ã€‚æˆ–æŠŠå®ƒæ•´åˆåˆ°ä¸€å—ã€‚ æ–­ç‚¹æŸ¥çœ‹åŸé€»è¾‘æœ‰é‚£äº›æ“ä½œï¼Œè®°å½•ä¸‹æ¥ï¼Œå¦‚æœä¸æ˜¯ç®—æ³•ï¼Œä¸»è¦è®°å½•çš„è¿˜æ˜¯æ•°æ®è¡¨æ“ä½œ æ¯ä¸ªæ“ä½œéƒ½æœ‰ä¼ å‚å’Œè¿”å›ï¼Œåœ¨è°ƒè¯•æ¨¡å¼ä¸‹æˆ‘ä»¬å¾ˆå®¹æ˜“å°±çŸ¥é“è®¿é—®æ–¹æ³•å‰ç¯å¢ƒä¸­æœ‰é‚£äº›å‚æ•°å¯ä¾›ä½¿ç”¨ é‡æ„å®Œåï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„è¯·æ±‚å‚æ•°æ¥è®¿é—®é‡æ„ä»£ç ã€‚ç»“æœä¸€è‡´å°±ä¸ºé‡æ„å®Œæˆäº† ç³»åˆ—æ–‡ç«  xdebugçš„å®‰è£…é…ç½® xdebugçš„å®é™…è¿ç”¨ [æœ¬ç¯‡] xdebugæ€§èƒ½åˆ†æ FQA æ–‡ç« å­—å¤ªå¤šäº†ï¼Œä¸æƒ³çœ‹ æˆ‘çš„æ–‡ç« æœ‰å¯¹åº”çš„è§†é¢‘ï¼Œä½ å¯ä»¥é€šè¿‡è§†é¢‘æ¥è¿›è¡Œå­¦ä¹ è¿™ä¸€æœŸçš„å†…å®¹ã€‚ä½†æ˜¯ä½ ä¸è¦åæ§½æˆ‘è¯­è¨€è¡¨è¾¾èƒ½åŠ›å’Œæ™®é€šè¯ï¼Œå› ä¸ºæˆ‘å¹³æ—¶ä¹Ÿä¸æ€ä¹ˆè¯´è¯ï¼Œæƒ³ç»ƒä¹ å£æ‰æ‰åšçš„è§†é¢‘ã€‚é™„ä¸Š é“¾æ¥]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>xdebug</tag>
        <tag>phpstorm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[1.3 xdebugæ€§èƒ½åˆ†æ]]></title>
    <url>%2F%E5%B7%A5%E5%85%B7%2Fxdebug-property%2F</url>
    <content type="text"><![CDATA[ä»‹ç»åœ¨ä¸Šä¸¤æœŸä¸­æˆ‘å·²ç»å¯¹ xdebug æœ€æ ¸å¿ƒçš„æ“ä½œå·²ç»è¿›è¡Œäº†è®²è§£ã€‚ç›¸ä¿¡ä½ å¯ä»¥æ‘†è„±å†™ var_dump($data);die; çš„ç¼–å†™å’Œå®Œæˆè°ƒè¯•åçš„æ¸…é™¤äº†ã€‚è¿™ä¸€æœŸæˆ‘ä»¬æ¥å­¦ä¹ xdebugçš„ç¬¬äºŒä¸ªç‰¹è‰²-æ€§èƒ½åˆ†æã€‚è¿™ä¸€ä¸ªåŠŸèƒ½ï¼Œåœ¨å®æ“ä¸­ç”¨çš„ä¸æ˜¯å¾ˆå¤šã€‚ ä½¿ç”¨åœºæ™¯ï¼š é«˜å¹¶å‘é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½ä¼˜åŒ–ã€‚é€šè¿‡æŸ¥çœ‹è¿è¡Œä¸€ä¸ªæ–¹æ³•ç»è¿‡çš„ä¾èµ–è€—æ—¶æƒ…å†µï¼Œè¿›è¡Œä»£ç ä¼˜åŒ–ã€‚ ç¯å¢ƒè¯´æ˜ windows vagrant+vbox+centos7+nginx+php phpstorm å­¦å‰å‡†å¤‡ xdebug + phpstorm è°ƒè¯•ç¯å¢ƒå·²ç»å¯ä»¥æ­£å¸¸è¿è¡Œ å­¦ä¹ ç‚¹ æ˜ç™½ xdebug æ€§èƒ½åˆ†æéœ€è¦åšé‚£äº›é…ç½® çŸ¥é“æ€ä¹ˆå»çœ‹æ€§èƒ½æŠ¥å‘Š xdebug é…ç½®xdebug æ˜¯é€šè¿‡è®¿é—®æŒ‡å®šæ–¹æ³•ã€‚ç”Ÿæˆæ€§èƒ½åˆ†ææ–‡ä»¶ï¼Œå†é€šè¿‡åˆ†æè½¯ä»¶è¿›è¡ŒæŸ¥çœ‹æ€§èƒ½ç»“æœã€‚ php.ini æ·»åŠ é…ç½® 123456xdebug.profiler_enable=Offxdebug.profiler_enable_trigger=Onxdebug.profiler_enable_trigger_value="create"xdebug.profiler_output_dir="/tmp/"xdebug.profiler_output_name="cachegrind.out.%R" phpstorm åˆ†ææ€§èƒ½æ–‡ä»¶æ¯”è¾ƒå»ºè®®ä¸€ä¸ªæ–¹æ³•è®¿é—®å®Œåï¼Œç”Ÿæˆåˆ†ææ–‡ä»¶ï¼Œé©¬ä¸Šè¿›è¡Œæ€§èƒ½åˆ†æï¼Œåˆ†æå®Œåå†æ¸…é™¤æ–‡ä»¶ã€‚ä¸ºäº†æ•°æ®å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿›è¡Œå¤šæ¬¡å¯¹æ¯”ã€‚æ‰¾æ€§èƒ½å‚æ•°çš„å¹³å‡å€¼æ¥æé«˜å‡†ç¡®æ€§ã€‚ æˆ‘ä»¬å¾—çŸ¥é“é‚£ä¸ªä¾èµ–æ–¹æ³•è€—æ—¶æœ€ä¹…ï¼Œæ˜¯ä»€ä¹ˆåŸå› ã€‚æœ‰æ²¡æœ‰ä¼˜åŒ–çš„å¯èƒ½ã€‚ phpstorm xdebug æ€§èƒ½åˆ†æå·¥å…·è¯¦è§£æˆ‘ä»¬é€šè¿‡ tool -&gt; Analyze Xdebug profiler Snapshot æ‰“å¼€æ€§èƒ½åˆ†ææ–‡ä»¶ cachegrind.out. æ‰“å¤´çš„æ–‡ä»¶ã€‚å°±ä¼šè¿›å…¥ä»¥ä¸‹ç•Œé¢ äº†è§£å„ä¸ªé€‰é¡¹çš„æ„æ€ Refresh - åˆ·æ–° Execution statistics - æ‰§è¡Œç»Ÿè®¡æ•°æ® Call Trees - å“ªä¸ªå‡½æ•°è°ƒç”¨å“ªä¸ªå‡½æ•° Callable - å·²æ‰§è¡Œçš„æ–‡ä»¶ Own Time - å‡½æ•°æ‰§è¡Œè‡ªå·±çš„ä»£ç æ‰€èŠ±è´¹çš„æ—¶é—´(ä¸åŒ…æ‹¬å¯¹å…¶ä»–å‡½æ•°çš„è°ƒç”¨) Calls - è°ƒç”¨æ¬¡æ•° Callees - è°ƒç”¨å“ªäº›å‡½æ•° Callers - ä»å‡½æ•°è¢«è°ƒç”¨çš„åœ°æ–¹ time å‰çš„æ•°å­—ä»£è¡¨çš„æ˜¯ä»€ä¹ˆæ„æ€ time åˆ—é‡Œæœ‰ æ•°å­—å’Œç™¾åˆ†æ¯”ã€‚åˆ†åˆ«ä»£è¡¨ æ‰§è¡Œæ—¶é—´å’Œæ‰§è¡Œå ç”¨æ€»æ—¶é—´ç™¾åˆ†æ¯” å•ä½æ˜¯ server æ—è¾¹çš„ time é‚£é‡Œè¿›è¡Œè®¾ç½®.é»˜è®¤æ˜¯ ms callees é‡Œçš„æ–¹æ³•å¤§éƒ¨åˆ†éƒ½ä¼šå‡ºæ¥ä¸€ä¸ªæŠ˜å çš„å›¾æ ‡ï¼Œæœ‰ä»€ä¹ˆç”¨ è¿™ä¸ªå¯ä»¥è®©æˆ‘ä»¬æŸ¥çœ‹ä»–çš„ä¸Šä¸€æ­¥æ‰§è¡Œäº†ä»¥ä»€ä¹ˆæ“ä½œã€‚è¿™ä¸ªå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬åœ¨äº†è§£è°ƒç”¨åˆ°è¿™ä¸ªå‡½æ•°çš„è¿‡ç¨‹ã€‚ æ‰¾åˆ°æˆ‘ä»¬å…³å¿ƒçš„æ•°æ® é‚£äº›åœ°æ–¹å ç”¨çš„æ‰§è¡Œæ—¶é—´æœ€å¤šï¼Œä¸ºä»€ä¹ˆ æˆ‘ä»¬å¯ä»¥åœ¨ Execution statistics æ ‡ç­¾é‡Œå¯¹ own time è¿›è¡Œæ’åºå–æ‰§è¡Œå ç”¨æœ€å¤šçš„å†…å®¹ã€‚é‡Œé¢ä¼šåŒ…å«æ–‡ä»¶å’Œå‡½æ•°ä»¥åŠæ–¹æ³•ã€‚å¦‚æœæˆ‘ä»¬è®¾ç½®äº† server å…³è”å½“å‰çš„é¡¹ç›®ï¼Œç»Ÿè®¡é‡Œçš„æ–¹æ³•æ˜¯å¯ä»¥è¿›è¡Œè·³è½¬åˆ°é¡¹ç›®çš„å®é™…ä»£ç é‡Œã€‚ æˆ‘ä»¬é€šè¿‡ Callees æ ‡ç­¾æŸ¥çœ‹å‡½æ•°é‡Œé‚£äº›æ–¹æ³•è°ƒç”¨è€—æ—¶æœ€å¤š é‚£äº›æ–¹æ³•è°ƒç”¨æœ€å¤šæ¬¡ï¼Œåœ¨é‚£äº›åœ°æ–¹è°ƒç”¨çš„æ¯”è¾ƒå¤š Execution statistics æ ‡ç­¾é‡Œå¯¹ calls è¿›è¡Œæ’åºå–æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„å‡½æ•°æˆ–æ–¹æ³•ã€‚ å¯é€šè¿‡ä¸‹é¢çš„ Callers æŸ¥çœ‹é‚£äº›åœ°æ–¹å¯¹ä»–è¿›è¡Œäº†è°ƒç”¨ ç³»åˆ—æ–‡ç«  xdebugçš„å®‰è£…é…ç½® xdebugçš„å®é™…è¿ç”¨ xdebugæ€§èƒ½åˆ†æ [æœ¬ç¯‡] FQAä¸ºä»€ä¹ˆè¦è®¾ç½® xdebug.profiler_output_name é»˜è®¤çš„ä¸å°±å¯ä»¥äº†å—ï¼Ÿå¦‚æœä½ çš„é¡¹ç›®ä¸æ˜¯å¤šå…¥å£çš„ç±»å‹ï¼Œä½ ä¿å­˜çš„åˆ°ä¸€ä¸ªæ–‡ä»¶å°±ä¼šå‡ºç°æ€§èƒ½åˆ†ææ–‡ä»¶ä¸ç²¾ç¡®çš„æƒ…å†µã€‚è€Œæˆ‘åœ¨ä¸Šæ–‡ä¸­ç”¨çš„æ˜¯ $_SERVER[â€˜REQUEST_URIâ€™] ä½œä¸ºæ–‡ä»¶åç¼€ã€‚å¯ä»¥å¾ˆå¥½çš„åŒºåˆ†æ€§èƒ½åˆ†ææ–‡ä»¶ã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>xdebug</tag>
        <tag>phpstorm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç«™å®‰å…¨é…ç½®ï¼ˆå“åº”å¤´ç¯‡ï¼‰]]></title>
    <url>%2F%E5%AE%89%E5%85%A8%2Fhttp-header%2F</url>
    <content type="text"><![CDATA[é»˜è®¤çš„ç½‘ç«™ç¯å¢ƒä¸­ã€‚æœ‰å¾ˆå¤šæš´éœ²ç¯å¢ƒä¿¡æ¯çš„åœ°æ–¹ã€‚ åœ¨ HTTP å“åº”å¤´ä¸­ Server å‚æ•°ä¼šæŠŠ http æœåŠ¡å™¨çš„ç±»å‹å’Œç‰ˆæœ¬ä¿¡æ¯å®Œæ•´çš„è¿”å›. apache å°±æ›´è¿‡åˆ†äº†. php ç‰ˆæœ¬ä¹Ÿä¼šæ˜¾ç¤ºå‡ºæ¥ Set-Cookie å‚æ•°å…³è”åå°çš„æœåŠ¡å™¨çš„ session é»˜è®¤ä¼šä½¿ç”¨ PHPSESSID X-Powered-By å‚æ•°ä¼šè¿”å›å½“å‰ç¯å¢ƒæ‰€ä½¿ç”¨çš„è¯­è¨€ä»¥åŠç‰ˆæœ¬ä¿¡æ¯ã€‚ é‚£è¦æ€ä¹ˆåŠå‘¢. è™½ç„¶åœ¨æˆ‘çœ‹æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰. ä½†æ˜¯é»‘å®¢å¤§ä½¬ä»¬å¯ä¸ä¼šé‚£ä¹ˆæƒ³. å¤šæš´éœ²ä¸€äº›ä¿¡æ¯å°±ä¼šå¤šä¸€äº›å®‰å…¨éšæ‚£. è¯ä¸å¤šè¯´. ä»¥ä¸‹æ˜¯è§£å†³ä¸€äº›æ–¹æ³•. ç½‘ä¸Šçš„å¾ˆå¤šæ¯”æˆ‘å†™è¿˜å¥½çš„. å¦‚æœ‰é›·åŒ. å‹¿å–· æ¥ä¸‹æ¥æˆ‘ä¼šä»¥ä¸‹é¢ä¸¤å¥—ç¯å¢ƒæ¥è¿›è¡Œå¤„ç†. apache + php nginx + php å¤„ç†çš„æ–¹å¼ ä¼ªé€ æˆå…¶ä»–åŒç±»äº§å“çš„é»˜è®¤å“åº”å¤´ã€‚ å½»åº•éšè— å…ˆè¯´ä¸‹ apache çš„ç¯å¢ƒå§ apache æ˜¯æŠŠ php å½“æˆè‡ªå·±çš„ä¸€ä¸ªæ¨¡å—è¿è¡Œçš„. æ‰€ä»¥å®ƒæ‰ä¼šçŸ¥é“ php æ˜¯ä»€ä¹ˆç‰ˆæœ¬.åœ¨ç½‘ä¸Šæˆ‘æ‰¾äº†å¾ˆå¤šèµ„æ–™, éƒ½è¯´æƒ³å“åº”å¤´ä¸­çš„ server ä¸èƒ½éšè—èµ·æ¥ï¼ˆä½ è¦çŸ¥é“å’Œæˆ‘è¯´ä¸‹å“Ÿï¼‰. æœ€å°‘ä¹Ÿä¼šç•™ä¸ªæœåŠ¡å™¨ç±»å‹. ä¸‹é¢æˆ‘è¦åšçš„å°±æ˜¯æŠŠä»–èƒ½éšè—çš„ä¿¡æ¯éšè—èµ·æ¥ 12ServerTokensServerSignature åœ¨ apache.conf ä¸­æ‰¾åˆ°äº†è¿™ä¸¤ä¸ªé…ç½®å€¼. windows é‡Œçš„ä¸ºä»€ä¹ˆæ‰¾ä¸åˆ°é˜¿. é‚£æ˜¯å› ä¸ºä»–åœ¨ apache/conf/extra/httpd-default.conf ä¸­ æ³¨æ„å’¯: è¿™é‡Œæ”¹äº†è¿˜è¦çœ‹ä¸‹. apache/conf/httpd.conf é‡Œæœ‰æ²¡æœ‰æŠŠè¿™ä¸ªæ–‡ä»¶å¼•å…¥. å¯ä»¥åœ¨ httpd.conf ä¸­æœç´¢ httpd-default.conf å¦‚æœå‰é¢æœ‰ # æ³¨é‡Šå°±å»é™¤. ä½ æ‰¾åˆ°äº†è¿™ä¸¤å‚æ•°äº†ä½ ä¸è¯´æ€ä¹ˆè®¾ç½®å—? ç½‘ä¸Šçš„æ–‡ç« å’Œæˆ‘é…ç½®é‡Œçš„é…ç½®å‚æ•°ä¸ä¸€æ ·. ä¸è¦é—®æˆ‘æ˜¯æ€ä¹ˆçŸ¥é“çš„. æˆ‘ä¹Ÿæ˜¯çœ‹è¿™ä¸ªå‚æ•°ä¸Šåœ¨å†™çš„æ³¨é‡Šé‡Œå¾—çŸ¥çš„. 123456789## ServerTokens# This directive configures what you return as the Server HTTP response# Header. The default is &apos;Full&apos; which sends information about the OS-Type# and compiled in modules.# Set to one of: Full | OS | Minor | Minimal | Major | Prod# where Full conveys the most information, and Prod the least.# çœ‹åˆ°ç”¨ | éš”å¼€çš„äº†å—? é‚£å°±æ˜¯å‚æ•°. å¦‚æœä½ è‹±æ–‡å¥½. é‚£ä½ ä¸€å®šçŸ¥é“æ˜¯è¿™äº›å‚æ•°ä»£è¡¨ç€ä»€ä¹ˆ. è‹±æ–‡ä¸å¥½. èµ¶ç´§ç¿»è¯‘å». å“¦, å¯¹äº†. æ˜¯ç¿»è¯‘ä½ è‡ªå·±çš„ä¸æ˜¯ç¿»è¯‘æˆ‘çš„(ç¬‘) æˆ‘è®¾ç½®çš„æ˜¯ Prod(äº§å“). æƒ³æ·±å…¥ç ”ç©¶ä¹Ÿå¯ä»¥æŠŠå‚æ•°æ¯ä¸ªé…ç½®ä¸€éçœ‹çœ‹ ServerSignature å‚æ•°ä¹Ÿä¸€æ ·. è¿›è¡Œè®¾ç½®.(è®°å¾—çœ‹æ³¨é‡Šå“¦) é…ç½®å®Œäº†. é‡å¯ apache. çœ‹çœ‹å¯¹æ¯”å¯¹æ¯”æœ‰æ²¡æœ‰å˜åŒ–. nginxä¸»è¦ä¹Ÿæ˜¯éšè—è‡ªèº«çš„ç‰ˆæœ¬å·. å‚æ•°server_tokens off; è¿™ä¸ªå‚æ•°åªç”¨è®¾ç½®åˆ° http{} é‡Œé¢å°±å¯ä»¥äº† phpphp é‡Œå¯ä»¥æ§åˆ¶æ˜¾ç¤º X-Powered-By å’Œ Set-Cookie é‡Œçš„ä¿¡æ¯. ä¸»è¦é…ç½®å‚æ•°éƒ½åœ¨ php.ini ä¸­çš„ session.name æ§åˆ¶ Set-Cookie é‡Œçš„ä¸€ä¸ª key ç›¸ä¿¡ä½ çœ‹åˆ°äº†ç†Ÿæ‚‰çš„ PHPSESSID , laravel æ¡†æ¶é»˜è®¤ä½¿ç”¨ laravel_session expose_php æ§åˆ¶ç€ X-Powered-By çš„è¾“å‡º. æˆ‘ä»¬å…³æ‰å°±å¯ä»¥äº† å…¶ä»–å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç©ºé—´. ä½¿ç”¨php å‡½æ•° ini_set è¿›è¡Œè®¾ç½®123ini_set('session.name', 'newvalue');header_remove('x-powered-by'); // php 5.3+header('x-powered-by:'); // é€šç”¨å…¼å®¹æ–¹æ³•,ä¸è¿‡å“åº”å¤´ä¼šè¾“å‡ºç©ºçš„ x-powered-by æ³¨æ„: å¦‚æœä½ ç½‘ç«™æ˜¯æ”¾åœ¨ç©ºé—´é‡Œè¿è¡Œçš„è¯. ç©ºé—´é»˜è®¤æ˜¯ä¼šå¸®ä½ è¿›è¡Œä¸€äº›å®‰å…¨å¤„ç†çš„. å…ˆæŸ¥çœ‹å®ƒçš„æ˜¾ç¤ºæ–¹å¼å†è¿›è¡Œä¿®æ”¹. è¦ä¸ç„¶ä¼šå‡ºç°ä¸€äº›å¯ç¬‘çš„ç°è±¡.å¦‚: è¯·æ±‚å¤´ä¸­å‡ºç°äº†ä¸¤ä¸ª X-Powered-By æœ‰äº›æ¡†æ¶é»˜è®¤ä¼šä½¿ç”¨ php å‡½æ•°è®¾ç½®è¿™äº›é…ç½®. å¦‚ ThinkPHP(X-Powered-By), laravel(set-cookie) è¯¯åŒº php ini_set() å¯ä»¥è®¾ç½® expose_php é…ç½®. åœ¨è®¾ç½®ç³»ç»Ÿå‚æ•°ä¹‹å‰è¯·æŸ¥çœ‹æ¸…æ¥šæ–‡æ¡£çš„ä»‹ç». ç½‘ä¸Šå¾ˆå¤šéƒ½å†™äº†ç”¨ ini_set() å¯ä»¥è®¾ç½® expose_post çš„é…ç½®. äº‹å®ä¸Šåªæœ‰ php.ini å¯ä»¥è¿›è¡Œè®¾ç½® äº†è§£æ›´å¤š: http://php.net/manual/zh/ini.list.php http://php.net/manual/zh/configuration.changes.modes.php æ€»ç»“ è¦æƒ³è®©é¡¹ç›®å°½é‡çš„å®‰å…¨, è¦æ³¨æ„å®‰å…¨æ–¹é¢çš„äº‹æƒ…è¦ä»ç»†èŠ‚æŠ“èµ·. é…ç½®é‡Œæœ‰å¾ˆå¤šä½ æ²¡æœ‰æƒ³åˆ°çš„åŠŸèƒ½. ä¸ä¸€å®šè¦ç¢°åˆ°äº†æ‰å»å¤„ç†. ç²—ç•¥çœ‹ä¸€éä¹Ÿä¼šå¯¹äº†è§£ç³»ç»Ÿæœ‰å¾ˆå¤§çš„å¸®åŠ©]]></content>
      <categories>
        <category>å®‰å…¨</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git çš„ä½¿ç”¨æŠ€å·§1-ç¯å¢ƒçš„ä½¿ç”¨]]></title>
    <url>%2F%E5%B7%A5%E5%85%B7%2Fgit-skill-1%2F</url>
    <content type="text"><![CDATA[1ã€git ä¸subversion(svn) çš„åŒºåˆ« åˆ†å¸ƒå¼(git)ä¸é›†ä¸­å¼(svn)çš„åŒºåˆ«ï¼ é›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶ä»£ç æ˜¯ç»Ÿä¸€ç®¡ç†çš„ã€‚å¦‚æœè¿œç¨‹åº“çš„æœåŠ¡å™¨å‡ºé—®é¢˜äº†ä¼šå—å½±å“ã€‚å¤§å¤šæ•°æ“ä½œéƒ½éœ€è¦æœ‰ç½‘ç»œçš„æ”¯æŒï¼æäº¤ã€ æ›´æ–°å’ŒæŸ¥çœ‹æ—¥å¿—ç¼“æ…¢ã€‚ åˆ†å¸ƒå¼æ˜¯æ¯ä¸€å°ç”µè„‘é‡Œéƒ½æ˜¯å®Œæ•´çš„ä»£ç ï¼Œå°±ç®—æ˜¯æ²¡æœ‰ç½‘ç»œçš„ç¯å¢ƒä¹Ÿå¯ä»¥æ­£å¸¸çš„åšæäº¤å’Œä¿®æ”¹å¤„ç†ã€‚æ‰€æœ‰æäº¤æ—¥å¿—éƒ½å­˜åœ¨æœ¬åœ°ã€‚å¯ä»¥æƒ³è±¡æŸ¥çœ‹é€Ÿåº¦æœ‰å¤šå¿«ï¼åˆ°æœ‰ç½‘ç»œçš„ç¯å¢ƒå†è¿›è¡Œä¸Šä¼ ã€‚è€Œä¸”å½“å…¶ä»–äººçš„ç”µè„‘å‡ºé—®é¢˜äº†ä¹Ÿåªæ˜¯ä¸¢å¤±ä»–ä¸ªäººçš„è·ç¦»ä¸Šä¸€æ¬¡æäº¤åˆ°ç½‘ç»œä¸Šçš„ä»£ç å’Œè®°å½•ï¼ç›¸å¯¹äºé›†ä¸­å¼è§‰å¾—åˆ†å¸ƒå¼çš„ååˆ†å ä¼˜ã€‚ ä¸‹é¢è¯´è¯´ Git ç”¨æˆ·ç¯å¢ƒçš„æ­å»º 2ã€Github å®‰è£… Github çš„å®‰è£…çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯å®˜ç½‘çš„ç½‘ç»œå®‰è£…å’Œéå®˜ç½‘çš„ç¦»çº¿å®‰è£…ã€‚ åœ¨ä¸­å›½ä½¿ç”¨å®˜ç½‘çš„ç½‘ç»œå®‰è£…ç®€ç›´é¾Ÿé€Ÿï¼Œè€Œä¸”å®¹æ˜“å®‰è£…å¤±è´¥ã€‚æ‰€ä»¥æˆ‘æ¨èç¦»çº¿å®‰è£…ã€‚ ä¸‹è½½é¡µé¢ï¼šhttp://www.pc6.com/softview/SoftView_415864.html ç›¸ä¿¡å¾ˆå¤šäººéƒ½è§‰å¾—è¿™ç§ç½‘ç«™å¤ªå‘çˆ¹äº†ã€‚å› ä¸ºæ¯æ¬¡å®‰è£…å®Œæ¡Œå­ä¸Šå°±ä¸€å †åƒåœ¾è½¯ä»¶ï¼Œå…¶å®åªè¦ä¸ç”¨ é«˜é€Ÿä¸‹è½½å™¨åœ°å€ é‡Œçš„ä¸‹è½½å°±å¯ä»¥ç›´æ¥ä¸‹è½½è‡ªå·±æƒ³è¦çš„å‹ç¼©åŒ…äº†ã€‚å½“ç„¶ä¸‹è½½äº†ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå®‰è£…çš„æ—¶å€™çª—å£é‡Œçš„æ¯ä¸€ä¸ªè§’è½éƒ½çœ‹ä¸‹ã€‚æœ‰æ²¡æœ‰ä¸œè¥¿æ˜¯è¢«å‹¾ä¸Šçš„ï¼ŒæŠŠé‚£äº›æ²¡æœ‰å¿…è¦çš„å‹¾å»æ‰å°±å¯ä»¥äº†ã€‚ 3ã€Atom çš„å®‰è£… Atom ä¹Ÿæ˜¯github å¼€å‘çš„ä¸€ä¸ªå·¥å…·. è™½ç„¶ä¹‹å‰å¹¶ä¸æ˜¯å¾ˆå¥½ç”¨, ä½†æ˜¯ç°åœ¨å¥½ç”¨å¾ˆå¤šäº†. å®‰è£…åŒ…å¯ä»¥åœ¨å®˜ç½‘ä¸­è·å¾—. å¦‚æœæ™®é€šä¸‹è½½å¤ªæ…¢. å¯ä»¥ä½¿ç”¨è¿…é›·æ¥æé«˜ä¸‹è½½é€Ÿåº¦. ä¹Ÿå¯ä»¥åˆ°ç½‘ä¸Šä¸‹è½½ç»¿åŒ–åŒ…. 4ã€æŠ€å·§è¯´æ˜ ä¸ºä»€ä¹ˆè¦åœ¨è¿™é‡Œè®² github desktop å’Œ atom å‘¢. å…¶å®è¿™äº›éƒ½æ˜¯ä¸ºäº†è¾…åŠ© git çš„ç”¨æˆ·ä½¿ç”¨. å…ˆè¯´è¯´ github desktop ã€‚ä¸ªäººè§‰å¾—ç•Œé¢åšçš„å¾ˆå¥½ï¼Œæ–¹ä¾¿æŸ¥çœ‹æœ¬åœ°é¡¹ç›®çš„æäº¤å’Œä»£ç çš„ä¿®æ”¹ã€‚é‡Œé¢è¿˜è‡ªå¸¦äº† git ã€‚å¯ä»¥çœå»å®‰è£… git è¿™ä¸€æ­¥ã€‚æ›´é‡è¦çš„æ˜¯å®ƒä¸ä½†å¯ä»¥æäº¤æœ¬åœ°æäº¤åˆ° github è¿œç¨‹ä»“åº“ä¸­ï¼Œè¿˜å¯ä»¥æäº¤åˆ°ä¸ªäººçš„è¿œç¨‹ä»“åº“ä¸­ï¼åªè¦ä½ ä½¿ç”¨ git å‘½ä»¤ç»™å®ƒæ·»åŠ è¿œç¨‹ä»“åº“å°±å¯ä»¥äº†ã€‚ git remote add [è¿œç¨‹ä»“åº“åœ°å€] atom æ˜¯ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ã€‚å®ƒçš„ä¼˜ç‚¹å°±æ˜¯ï¼šä½ åŠ è½½äº† git æ§åˆ¶çš„é¡¹ç›®ä»–å°±ä¼šæŠŠå½“å‰é¡¹ç›®æ¯ä¸€ä¸ªä¿®æ”¹æ–‡ä»¶ä»¥åŠæ–‡ä»¶çš„ä¿®æ”¹è¡Œæ·»åŠ è¡Œç»™ä½ å…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥ã€‚è¿˜å¯ä»¥åœ¨ç¼–è¾‘å™¨å®‰è£…ä¸€äº›æ’ä»¶ï¼Œå–œæ¬¢ç”¨ vim æ¨¡å¼çš„åŒå­¦ä¹Ÿå¯ä»¥å¾ˆå¥½çš„ä½¿ç”¨å®ƒã€‚è¿˜æœ‰ä¸€äº› sublime text é‡Œå¥½ç”¨æ’ä»¶ä¹Ÿå¯ä»¥è¿›è¡Œå®‰è£…ï¼Œå¦‚ emmet ç­‰ç­‰ã€‚ç›¸å¯¹äºå…¶ä»–çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚git å·²ç»æ˜¯ç”¨æˆ·ä½“éªŒæå¥½çš„æ§åˆ¶è½¯ä»¶äº† è¿™æ ·å¯ä»¥ä¸ä½¿ç”¨å‘½ä»¤è¡Œéƒ½å¯ä»¥è¿›è¡Œå·¥ä½œäº†ã€‚(ä½ è¦æ˜¯æƒ³è£…é€¼æˆ‘ä¹Ÿä¸æ‹¦ä½  [æ»‘ç¨½] ) 5ã€ç›¸å…³å¸®åŠ©èµ„æ–™ ProGit ç¬¬äºŒç‰ˆ ç®€ä½“ä¸­æ–‡ (PDF ç”µå­æ–‡æ¡£) http://git.oschina.net/progit/ é‡ç‚¹æ˜¯2.Git åŸºç¡€ è¿™ä¸€ç« çœ‹å®ŒåŸºç¡€å‘½ä»¤æ“ä½œå°±å·²ç»å­¦å…¨äº† Atom æ–‡æ¡£ (åœ¨çº¿æ–‡æ¡£) http://wiki.jikexueyuan.com/project/atom/overview.html è¿™æ–‡æ¡£åšçš„å¾ˆå…¨ï¼è™½ç„¶æˆ‘ä¸æ˜¯çœ‹è¿™é‡Œå­¦çš„ï¼Œä½†æ˜¯æ–‡ç« å·®ä¸å¤šçš„ã€‚ï¼šï¼‰ Github desktop (è§†é¢‘) http://www.imooc.com/video/7625 åªçœ‹çœ‹è¿™ä¸€ä¸ªè§†é¢‘å°±å¯ä»¥äº†. å¦‚æœæœ‰å…´è¶£çš„è¯å¯ä»¥æŠŠè¿™ä¸ªè¯¾ç¨‹çœ‹å®Œ! ä¸‹æœŸé¢„å‘Š è¿™ä¸€æœŸåªæ˜¯ç®€å•çš„è¯´äº†ä¸‹ git çš„å¥½ç”¨çš„åœ°æ–¹ã€‚æ²¡æœ‰ä»€ä¹ˆå¹²è´§ï¼Œæ–‡åŒ–æ°´å¹³ä¸é«˜æ–‡ç¬”åªèƒ½å†™åˆ°è¿™ç§ç¨‹åº¦ã€‚ä¹‹åæˆ‘ä¼šå†™ Atom ç¼–è¾‘å™¨å’Œ Github Desktop çš„ä¸€äº›é…ç½®å’Œä½¿ç”¨å°æŠ€å·§ã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†’æ³¡æ’åºæ³•ç†è§£]]></title>
    <url>%2F%E7%AE%97%E6%B3%95%2Fbubble-sort%2F</url>
    <content type="text"><![CDATA[æ ¸å¿ƒæŠ€æœ¯: å€¼å¯¹æ¢, å¤šé‡å¾ªç¯ è¯´æ˜: å¾ªç¯æ¯”å¯¹å€¼çš„å¤§å°, å¦‚æœç¬¬ä¸€ä¸ªå€¼æ¯”ç¬¬äºŒä¸ªå€¼å¤§å°±è¿›è¡Œå¯¹æ¢.ç¬¬ä¸€æ¬¡å¾ªç¯å¾—åˆ°ç¬¬ä¸€å¤§çš„å€¼æ¯äºŒæ¬¡å¾ªç¯å¾—åˆ°ç¬¬äºŒå¤§çš„å€¼â€¦ç›´åˆ°åªå‰©ä¸€ä¸ªå€¼åç»“æŸå¾ªç¯ æ³¨æ„ç‚¹: è¿™é‡Œä½¿ç”¨äº†é€’å¢é€’å‡ä¸¤ç§å¾ªç¯. æ‰€ä»¥å¯¹å¾ªç¯çš„æŒæ¡è¦æ±‚æ¯”è¾ƒé«˜. è¦ä¸ç„¶å¾ˆå®¹æ˜“å‡ºç°æ’åºå®Œæˆå æ•°ç»„å‡ºç°ä¸€ä¸ªå¤šä½™çš„ ç©ºå€¼. 12345678910111213141516171819202122&lt;?php$arr = array(5,2,7,9,10,3);function mp($arr) &#123; $count = count($arr) - 1; // 5 å› ä¸ºä¸‹é¢ç¬¬äºŒä¸ªå¾ªç¯ä¸­çš„å¯¹æ¯”å€¼ // å› ä¸ºç¬¬ä¸€æ¬¡å¾ªç¯ä¼šå¾—åˆ°æœ€å¤§çš„å€¼, ç¬¬äºŒæ¬¡å°±å¾—åˆ°ç¬¬äºŒä¸ªæœ€å¤§å€¼. æ‰€ä»¥ä½¿ç”¨ é€’å‡çš„æ–¹æ³•. for ($i = $count; $i &gt; 0; $i--) &#123; for ($j = 0; $j &lt; $i; $j++) &#123; // å‰åå¯¹æ¯”å¯¹æ¢ if ($arr[$j] &gt; $arr[($j+1)]) &#123; $big = $arr[$j]; $arr[$j] = $arr[($j+1)]; $arr[($j+1)] = $big; &#125; &#125; &#125;&#125;$arr = mp($arr);print_r($arr);]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¿«é€Ÿæ’åºæ³•ç†è§£]]></title>
    <url>%2F%E7%AE%97%E6%B3%95%2Fquicksort%2F</url>
    <content type="text"><![CDATA[æ ¸å¿ƒæŠ€æœ¯: é€’å½’, æ•°ç»„åˆå¹¶, å¼•ç”¨ è¯´æ˜: å–æ’åºä¸­çš„ä¸€ä¸ªæ•°å­—. å¯¹å‰©ä¸‹çš„æ•°å­—è¿›è¡Œæ’åº. å¾—åˆ°æ¯”è¿™ä¸ªæ•°å­— (ä¸­é—´å€¼) å¤§çš„å’Œå°çš„ä¸¤ä¸ªæ•°ç»„. å†å¯¹è¿™ä¸¤ä¸ªæ•°ç»„è¿›è¡Œé€’å½’å¤„ç†. æ³¨æ„ç‚¹: å› ä¸ºæ˜¯é€’å½’æ‰€ä»¥éœ€è¦é€’å½’ç‚¹. ä¸ç„¶ä¼šå‡ºç°æ­»å¾ªç¯çš„æƒ…å†µ. è¿™ä¸ªé€’å½’ç‚¹æ˜¯: å¯¹æ¯”æ•°ç»„é•¿åº¦å°äºç­‰äº 1çš„æ—¶å€™å°±ç›´æ¥è¿”å› 12345678910111213141516171819202122232425262728293031&lt;?php$arr = array(5,2,7,9,10,3);function kp(&amp;$arr) &#123; // è¿™é‡Œçš„å¼•ç”¨å¾ˆé‡è¦, å› ä¸ºé€’å½’ä¸­ä¼šæœ‰æ²¡æœ‰è¿”å›å€¼çš„æƒ…å†µ.æ‰€ä»¥éœ€è¦å¼•ç”¨ $count = count($arr); if ($count &gt; 1) &#123; // é€’å½’ç‚¹ $median = $arr[0]; // ä¸­é—´å¯¹æ¯”å€¼ $min = array(); $max = array(); // å¯¹æ¯” for ($i = 1; $i &lt; $count; $i++) &#123; // æ³¨: è¿™é‡Œçš„æ˜¯ä»æ•°ç»„ 1 å¼€å§‹. å› ä¸ºæ•°ç»„ 0 è¢«æ‹¿å»å½“ä¸­é—´å¯¹æ¯”å€¼äº† if ($arr[$i] &lt;= $median) &#123; // è¿™é‡Œä½¿ç”¨å°äºç­‰äºæ˜¯ä¸ºäº†é˜²æ­¢ç›¸ç­‰çš„å€¼ä¼šå‡ºç°é—®é¢˜ $min[] =&amp; $arr[$i]; // è¿™é‡Œä½¿ç”¨[å¼•ç”¨èµ‹å€¼]èŠ‚çœå†…å­˜ç©ºé—´ &#125; else &#123; $max[] =&amp; $arr[$i]; &#125; &#125; $min = kp($min); // åªæœ‰é€’å½’åˆ° return $arr è¿™ä¸€æ­¥æ‰ä¼šå¾—è¿™ä¸€æ®µçš„ç»“æœ $max = kp($max); // è¿”å›æ’åºç»“æœ return array_merge($min, array($median), $max); &#125; else &#123; return $arr; &#125; &#125;$arr = kp($arr);print_r($arr);]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
</search>
